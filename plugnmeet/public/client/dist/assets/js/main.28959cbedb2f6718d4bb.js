/*! For license information please see main.28959cbedb2f6718d4bb.js.LICENSE.txt */
(self.webpackChunkplugnmeet_client=self.webpackChunkplugnmeet_client||[]).push([[179],{77410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Abs:()=>r.SYM,Acos:()=>r.VGw,Acosh:()=>r.SpW,AdadeltaOptimizer:()=>r.zJI,AdagradOptimizer:()=>r.HeW,AdamOptimizer:()=>r.a4z,AdamaxOptimizer:()=>r.DBS,Add:()=>r.mm_,AddN:()=>r.Xze,All:()=>r.oT6,Any:()=>r.IKK,ArgMax:()=>r.sJF,ArgMin:()=>r.aJk,Asin:()=>r.M2y,Asinh:()=>r.qw7,Atan:()=>r.jMg,Atan2:()=>r.QCc,Atanh:()=>r.Oyi,AvgPool:()=>r.JhU,AvgPool3D:()=>r._k9,AvgPool3DGrad:()=>r.IMb,AvgPoolGrad:()=>r.ROF,BatchMatMul:()=>r.XLW,BatchToSpaceND:()=>r.zws,Bincount:()=>r.zvY,BroadcastArgs:()=>r.eEB,BroadcastTo:()=>r.Ly9,Cast:()=>r.RFZ,Ceil:()=>r.gJX,ClipByValue:()=>r.xnO,Complex:()=>r.Zz9,ComplexAbs:()=>r.yj2,Concat:()=>r.Eh3,Conv2D:()=>r.mhS,Conv2DBackpropFilter:()=>r.wUP,Conv2DBackpropInput:()=>r.wm,Conv3D:()=>r.x12,Conv3DBackpropFilterV2:()=>r.o2y,Conv3DBackpropInputV2:()=>r.ik2,Cos:()=>r.mc4,Cosh:()=>r.TR1,CropAndResize:()=>r.VcC,Cumprod:()=>r.Byc,Cumsum:()=>r.iHb,DataStorage:()=>r.JLz,DenseBincount:()=>r.QRR,DepthToSpace:()=>r.T0n,DepthwiseConv2dNative:()=>r.cie,DepthwiseConv2dNativeBackpropFilter:()=>r.sL$,DepthwiseConv2dNativeBackpropInput:()=>r.y7R,Diag:()=>r.$w,Dilation2D:()=>r.p4S,Dilation2DBackpropFilter:()=>r.Vn9,Dilation2DBackpropInput:()=>r.ekb,ENV:()=>r.ViN,Einsum:()=>r.$g6,Elu:()=>r.SX0,EluGrad:()=>r.HEU,Environment:()=>r.qAh,Equal:()=>r.hdR,Erf:()=>r.Omj,Exp:()=>r.NEP,ExpandDims:()=>r.YFo,Expm1:()=>r.Y0y,FFT:()=>r.vwp,Fill:()=>r.deh,FlipLeftRight:()=>r.Uyb,Floor:()=>r.OR,FloorDiv:()=>r.jeX,FromPixels:()=>r.eBW,FusedBatchNorm:()=>r.sHE,FusedConv2D:()=>r._V0,FusedDepthwiseConv2D:()=>r.luS,GatherNd:()=>r.q1x,GatherV2:()=>r.qi_,Greater:()=>r.iZT,GreaterEqual:()=>r.Acj,IFFT:()=>r.Qg5,Identity:()=>r.iJz,Imag:()=>r.J_u,IsFinite:()=>r.avt,IsInf:()=>r.iWB,IsNan:()=>r.r7n,KernelBackend:()=>r.Zuw,LRN:()=>r.eZ0,LRNGrad:()=>r.Hhh,LeakyRelu:()=>r.J$2,Less:()=>r.vtC,LessEqual:()=>r.CAk,LinSpace:()=>r.e7N,Log:()=>r.ZbH,Log1p:()=>r.kU,LogSoftmax:()=>r.qCd,LogicalAnd:()=>r.PYm,LogicalNot:()=>r.VfG,LogicalOr:()=>r.MZg,Max:()=>r.YoZ,MaxPool:()=>r.mTV,MaxPool3D:()=>r.OAf,MaxPool3DGrad:()=>r.OU7,MaxPoolGrad:()=>r.OV7,MaxPoolWithArgmax:()=>r.vFR,Maximum:()=>r.BMI,Mean:()=>r.q2K,Min:()=>r.c17,Minimum:()=>r.q8u,MirrorPad:()=>r.jQs,Mod:()=>r.Vbg,MomentumOptimizer:()=>r.rIn,Multinomial:()=>r.NZg,Multiply:()=>r.wYn,Neg:()=>r.kuV,NonMaxSuppressionV3:()=>r.uv1,NonMaxSuppressionV4:()=>r.cye,NonMaxSuppressionV5:()=>r.W0H,NotEqual:()=>r.yQU,OP_SCOPE_SUFFIX:()=>r.zvA,OneHot:()=>r.we_,OnesLike:()=>r.qWM,Optimizer:()=>r.gaJ,OptimizerConstructors:()=>r.eEe,Pack:()=>r.QiL,PadV2:()=>r.lyA,Pool:()=>r.Kgp,Pow:()=>r.pe_,Prelu:()=>r.o0g,Prod:()=>r.DlI,RMSPropOptimizer:()=>r.gVI,Range:()=>r.e6w,Rank:()=>r.yw1,Real:()=>r.xJR,RealDiv:()=>r.oHH,Reciprocal:()=>r.$HU,Reduction:()=>r.IH3,Relu:()=>r.qkr,Relu6:()=>r.SbG,Reshape:()=>r.HZH,ResizeBilinear:()=>r._Yw,ResizeBilinearGrad:()=>r.zbQ,ResizeNearestNeighbor:()=>r.dpD,ResizeNearestNeighborGrad:()=>r.Hmb,Reverse:()=>r.mKl,RotateWithOffset:()=>r.b9H,Round:()=>r.e07,Rsqrt:()=>r.bV0,SGDOptimizer:()=>r.DYp,ScatterNd:()=>r.xQA,Select:()=>r.PhF,Selu:()=>r.oFR,Sigmoid:()=>r.a5O,Sign:()=>r.i5y,Sin:()=>r.RQH,Sinh:()=>r.wYB,Slice:()=>r.p2w,Softmax:()=>r.Gcp,Softplus:()=>r.MRv,SpaceToBatchND:()=>r.TQc,SparseFillEmptyRows:()=>r.O3z,SparseReshape:()=>r.nhH,SparseSegmentMean:()=>r.w3H,SparseSegmentSum:()=>r.ZjV,SparseToDense:()=>r.D2d,SplitV:()=>r.L8s,Sqrt:()=>r.FKq,Square:()=>r.bK0,SquaredDifference:()=>r._tC,Step:()=>r.h8e,StridedSlice:()=>r.jQk,StringNGrams:()=>r._JP,StringSplit:()=>r.s1s,StringToHashBucketFast:()=>r.XkS,Sub:()=>r.Tr8,Sum:()=>r.GBy,Tan:()=>r.sEM,Tanh:()=>r.MIZ,Tensor:()=>r.esB,TensorBuffer:()=>r.YDk,Tile:()=>r.n9L,TopK:()=>r.cWu,Transform:()=>r.wx7,Transpose:()=>r.G3Y,Unique:()=>r.kpP,Unpack:()=>r.ToN,UnsortedSegmentSum:()=>r.Qvg,Variable:()=>r._wD,ZerosLike:()=>r.RuY,_FusedMatMul:()=>r.usg,abs:()=>r.WnP,acos:()=>r.Khb,acosh:()=>r.__u,add:()=>r.IHx,addN:()=>r.QBD,all:()=>r.$6P,any:()=>r.YjB,argMax:()=>r.NqF,argMin:()=>r.vHJ,asin:()=>r.ZRM,asinh:()=>r.VfV,atan:()=>r.z4N,atan2:()=>r.fvJ,atanh:()=>r.C80,avgPool:()=>r.wS1,avgPool3d:()=>r.uR5,backend:()=>r.y3$,backend_util:()=>r.Wap,basicLSTMCell:()=>r.zEQ,batchNorm:()=>r.tgs,batchNorm2d:()=>r.Dxk,batchNorm3d:()=>r.JY5,batchNorm4d:()=>r.p3b,batchToSpaceND:()=>r.E4h,bincount:()=>r.yE8,booleanMaskAsync:()=>r.anm,broadcastArgs:()=>r.XsQ,broadcastTo:()=>r.UFq,broadcast_util:()=>r.Jyw,browser:()=>r.Xhn,buffer:()=>r.f3b,cast:()=>r.pju,ceil:()=>r.mDi,clipByValue:()=>r.iUl,clone:()=>r.d9v,complex:()=>r.PYB,concat:()=>r.zoF,concat1d:()=>r.gME,concat2d:()=>r.Izb,concat3d:()=>r.MNy,concat4d:()=>r.ZaL,conv1d:()=>r.PAt,conv2d:()=>r.Tek,conv2dTranspose:()=>r.bc,conv3d:()=>r.pdZ,conv3dTranspose:()=>r.$QV,copyRegisteredKernels:()=>r.T3b,cos:()=>r.mCk,cosh:()=>r.f9Y,cosineWindow:()=>r.mew,cumprod:()=>r.$Gn,cumsum:()=>r.zbp,customGrad:()=>r.cbc,denseBincount:()=>r.ppE,deprecationWarn:()=>r.MXe,depthToSpace:()=>r.nTT,depthwiseConv2d:()=>r.B10,device_util:()=>r.C2$,diag:()=>r.Ka3,dilation2d:()=>r.WmZ,disableDeprecationWarnings:()=>r.cFr,dispose:()=>r.B90,disposeVariables:()=>r.N8o,div:()=>r.hiC,divNoNan:()=>r.NTj,dot:()=>r.AKD,dropout:()=>r.rvX,einsum:()=>r.WYO,elu:()=>r.pyx,enableDebugMode:()=>r.Ra$,enableProdMode:()=>r.G48,enclosingPowerOfTwo:()=>r.GRh,engine:()=>r.SRH,env:()=>r.OBj,equal:()=>r.DgJ,erf:()=>r.qNN,exp:()=>r.Qqt,expandDims:()=>r.dt4,expm1:()=>r.t$B,eye:()=>r.iyy,fft:()=>r.kp_,fill:()=>r.hlL,findBackend:()=>r.x3e,findBackendFactory:()=>r.zel,floor:()=>r.GWj,floorDiv:()=>r.qPi,fused:()=>r.imm,gather:()=>r.Iqj,gatherND:()=>r.dbB,gather_util:()=>r.DaI,getBackend:()=>r.N_N,getGradient:()=>r.ukX,getKernel:()=>r.pIF,getKernelsForBackend:()=>r.trD,grad:()=>r.UQy,grads:()=>r.tiA,greater:()=>r.pjt,greaterEqual:()=>r.brS,ifft:()=>r.Sxn,imag:()=>r.asL,image:()=>r.BHj,inTopKAsync:()=>r.V3u,io:()=>r.io,irfft:()=>r.wx0,isFinite:()=>r.xVT,isInf:()=>r.UWc,isNaN:()=>r.i2d,keep:()=>r.CnY,kernel_impls:()=>r.GDt,leakyRelu:()=>r.hi7,less:()=>r.d9m,lessEqual:()=>r.zN1,linalg:()=>r.$r2,linspace:()=>r.SX3,localResponseNormalization:()=>r.G9k,log:()=>r.cM7,log1p:()=>r.Krr,logSigmoid:()=>r.e_t,logSoftmax:()=>r.CmS,logSumExp:()=>r.l_t,logicalAnd:()=>r.HvI,logicalNot:()=>r.hJK,logicalOr:()=>r.K5V,logicalXor:()=>r.egP,losses:()=>r.MB5,matMul:()=>r.OI3,math:()=>r.mAU,max:()=>r.Fp7,maxPool:()=>r._sB,maxPool3d:()=>r.YQQ,maxPoolWithArgmax:()=>r.Ip$,maximum:()=>r.gWQ,mean:()=>r.J69,memory:()=>r.sq6,meshgrid:()=>r.ry_,min:()=>r.VV$,minimum:()=>r.LTh,mirrorPad:()=>r.VdP,mod:()=>r.wQq,moments:()=>r.Gi7,movingAverage:()=>r.p_,mul:()=>r.dC7,multiRNNCell:()=>r.rq4,multinomial:()=>r.SJ_,neg:()=>r.W76,nextFrame:()=>r.glt,norm:()=>r.KOy,notEqual:()=>r.Quu,oneHot:()=>r.lfX,ones:()=>r.iUs,onesLike:()=>r.JpU,op:()=>r.op,outerProduct:()=>r.N2O,pad:()=>r.vku,pad1d:()=>r.pNR,pad2d:()=>r.koy,pad3d:()=>r.t1L,pad4d:()=>r.lGY,pool:()=>r.d_R,pow:()=>r.sQ3,prelu:()=>r.AL3,print:()=>r.S0v,prod:()=>r.WVs,profile:()=>r.N5s,rand:()=>r.TN_,randomGamma:()=>r.wzB,randomNormal:()=>r.nGf,randomUniform:()=>r.LGj,range:()=>r.w6H,ready:()=>r.Cd_,real:()=>r.kwC,reciprocal:()=>r.M25,registerBackend:()=>r.jqO,registerGradient:()=>r.LiG,registerKernel:()=>r.wCN,relu:()=>r.UYe,relu6:()=>r.btT,removeBackend:()=>r.cjG,reshape:()=>r.XLQ,reverse:()=>r.GYS,reverse1d:()=>r.SDf,reverse2d:()=>r.diP,reverse3d:()=>r.sx7,reverse4d:()=>r.mG2,rfft:()=>r.QEs,round:()=>r.NMM,rsqrt:()=>r.bp0,scalar:()=>r.iD$,scatterND:()=>r.snQ,scatter_util:()=>r.yV1,selu:()=>r.U8D,separableConv2d:()=>r.U_I,serialization:()=>r.m7h,setBackend:()=>r.CQI,setPlatform:()=>r.VYu,setdiff1dAsync:()=>r.ODp,sigmoid:()=>r.XD2,sign:()=>r.Xxe,signal:()=>r.tdS,sin:()=>r.O$l,sinh:()=>r.R_K,slice:()=>r.tPi,slice1d:()=>r.jZU,slice2d:()=>r.SmN,slice3d:()=>r.CnO,slice4d:()=>r.p0P,slice_util:()=>r.kuN,softmax:()=>r.XAC,softplus:()=>r.Wvh,spaceToBatchND:()=>r.fBT,sparse:()=>r.rVs,sparseToDense:()=>r.ers,spectral:()=>r.uN7,split:()=>r.Vl2,sqrt:()=>r._b3,square:()=>r.h62,squaredDifference:()=>r.$i,squeeze:()=>r.L9e,stack:()=>r.knu,step:()=>r.Nbs,stridedSlice:()=>r.NXj,string:()=>r.Z_8,sub:()=>r.luU,sum:()=>r.Smz,sumOutType:()=>r.z4k,tan:()=>r.ORZ,tanh:()=>r.AEp,tensor:()=>r.XeE,tensor1d:()=>r.RRF,tensor2d:()=>r.odF,tensor3d:()=>r.wOQ,tensor4d:()=>r.yXz,tensor5d:()=>r.Bfx,tensor6d:()=>r.xZs,tensor_util:()=>r.piX,test_util:()=>r.p3L,tidy:()=>r.lub,tile:()=>r.Gg6,time:()=>r.XVJ,topk:()=>r.hg7,train:()=>r.p_j,transpose:()=>r.p4s,truncatedNormal:()=>r.Xu6,unique:()=>r.Two,unregisterGradient:()=>r.bt3,unregisterKernel:()=>r.nEe,unsortedSegmentSum:()=>r.pUJ,unstack:()=>r.HHK,upcastType:()=>r.x8V,util:()=>r.D5U,valueAndGrad:()=>r.h76,valueAndGrads:()=>r.fNQ,variable:()=>r.VD$,variableGrads:()=>r.pnJ,version_core:()=>r.jTM,where:()=>r.arb,whereAsync:()=>r.itS,zeros:()=>r.lls,zerosLike:()=>r.P84});n(85186);var r=n(86931)},48357:(e,t,n)=>{"use strict";var r,o=n(85893),a=n(67294),i=n(73935),s=n(26372),c=n(39249),l=(n(21407),n(41796)),u=n(68718),d=n(26071),f=n(65538),p=null!==(r=window.STATIC_ASSETS_PATH)&&void 0!==r?r:"/assets";l.ZP.use(d.Z).use(u.Db).use(f.Z).init({debug:!1,fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:p+"/locales/{{lng}}/{{ns}}.json"}});const m=l.ZP;var h,v=n(85973),b=(0,v.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),x=b.getSelectors((function(e){return e.activeSpeakers})),g=(0,v.oM)({name:"activeSpeakers",initialState:b.getInitialState(),reducers:{addSpeaker:b.addOne,addManySpeakers:b.addMany,setAllSpeakers:b.setAll,removeSpeakers:b.removeAll}}),y=(h=g.actions).addSpeaker,w=(h.addManySpeakers,h.removeSpeakers),S=h.setAllSpeakers;const _=g.reducer;var k,j=(0,v.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),T=j.getSelectors((function(e){return e.participants})),N=(0,v.oM)({name:"participants",initialState:j.getInitialState(),reducers:{addParticipant:j.addOne,removeParticipant:j.removeOne,updateParticipant:j.updateOne}}),E=(k=N.actions).addParticipant,C=k.removeParticipant,A=k.updateParticipant;const R=N.reducer;var P,F=(0,v.oM)({name:"session",initialState:{token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,userDeviceType:"desktop",currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,chat_features:{allow_chat:!0,allow_file_upload:!0},shared_note_pad_features:{allowed_shared_note_pad:!1,is_active:!1,visible:!1},whiteboard_features:{allowed_whiteboard:!0,visible:!1}}}}},reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currenUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currenUser&&(e.currenUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)},updateUserDeviceType:function(e,t){e.userDeviceType=t.payload}}}),O=(P=F.actions).addToken,I=P.toggleStartup,M=P.addCurrentUser,D=P.addCurrentRoom,U=P.updateScreenSharing,L=P.setWebcamPaginating,B=P.updateCurrentUserMetadata,W=P.updateCurrentRoomMetadata,V=P.updateIsChatServiceReady,G=P.updateTotalVideoSubscribers,H=P.updateTotalAudioSubscribers,z=P.updateMuteOnStart,q=P.updateUserDeviceType;const X=F.reducer;var J,Y,$={type:"none"},K=null!==(J=window.STATIC_ASSETS_PATH)&&void 0!==J?J:"./assets",Q=["architecture-5082700_1280","porch-691330_1280","saxon-switzerland-539418_1280","shibuyasky-4768679_1280"].map((function(e){return"".concat(K,"/backgrounds/").concat(e,".jpg")})),Z={isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveSharedNotePad:!1,isActiveWhiteboard:!1,isMicMuted:!1,screenWidth:1024,screenHeight:500,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,totalUnreadChatMsgs:0,virtualBackground:$},ee=(0,v.oM)({name:"bottomIconsActivity",initialState:Z,reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload,e.isActiveChatPanel&&(e.totalUnreadChatMsgs=0)},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload,e.isActiveScreenshare&&(e.isActiveSharedNotePad=!1,e.isActiveWhiteboard=!1,e.isActiveParticipantsPanel=!1)},updateIsActiveSharedNotePad:function(e,t){e.isActiveSharedNotePad=t.payload,e.isActiveSharedNotePad&&(e.isActiveParticipantsPanel=!1)},updateIsActiveWhiteboard:function(e,t){e.isActiveWhiteboard=t.payload,e.isActiveWhiteboard&&(e.isActiveParticipantsPanel=!1)},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateScreenHeight:function(e,t){e.screenHeight=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateTotalUnreadChatMsgs:function(e){e.isActiveChatPanel||(e.totalUnreadChatMsgs+=1)},updateVirtualBackground:function(e,t){e.virtualBackground=t.payload}}}),te=(Y=ee.actions).updateIsActiveMicrophone,ne=Y.updateIsMicMuted,re=Y.updateIsActiveWebcam,oe=Y.updateIsActiveChatPanel,ae=Y.updateIsActiveParticipantsPanel,ie=Y.updateIsActiveRaisehand,se=(Y.updateIsActiveRecording,Y.updateIsActiveScreenshare),ce=Y.updateIsActiveSharedNotePad,le=Y.updateIsActiveWhiteboard,ue=Y.updateShowMicrophoneModal,de=Y.updateShowVideoShareModal,fe=Y.updateShowLockSettingsModal,pe=Y.updateShowRtmpModal,me=Y.updateScreenWidth,he=Y.updateScreenHeight,ve=Y.updateTotalUnreadChatMsgs,be=Y.updateVirtualBackground;const xe=ee.reducer;var ge,ye=(0,v.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var n=new Date(e.time),r=new Date(t.time);return n.getTime()>r.getTime()?1:n.getTime()<r.getTime()?-1:0}}),we=ye.getSelectors((function(e){return e.chatMessages})),Se=(0,v.oM)({name:"chat-messages",initialState:ye.getInitialState(),reducers:{addChatMessage:ye.addOne,removeChatMessage:ye.removeOne,updateChatMessage:ye.updateOne}}),_e=(ge=Se.actions).addChatMessage;ge.removeChatMessage,ge.updateChatMessage;const ke=Se.reducer;var je,Te=(0,v.oM)({name:"room-settings",initialState:{isShowRoomSettingsModal:!1,isShowKeyboardShortcuts:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0},reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},updateShowKeyboardShortcutsModal:function(e,t){e.isShowKeyboardShortcuts=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload}}}),Ne=(je=Te.actions).addAudioDevices,Ee=je.addVideoDevices,Ce=je.updateSelectedAudioDevice,Ae=je.updateSelectedVideoDevice,Re=je.updatePlayAudioNotification,Pe=je.updateShowRoomSettingsModal,Fe=je.updateActivateWebcamsView,Oe=je.updateActiveScreenSharingView,Ie=je.updateAllowPlayAudioNotification,Me=je.updateShowKeyboardShortcutsModal;const De=Te.reducer;var Ue,Le=(0,v.oM)({name:"whiteboard",initialState:{excalidrawElements:"",mousePointerLocation:"",whiteboardFiles:"",requestedWhiteboardData:{requested:!1,sendTo:""}},reducers:{updateExcalidrawElements:function(e,t){e.excalidrawElements=t.payload},updateMousePointerLocation:function(e,t){e.mousePointerLocation=t.payload},addWhiteboardFile:function(e,t){var n=[];e.whiteboardFiles&&(n=JSON.parse(e.whiteboardFiles)),n.push(t.payload),e.whiteboardFiles=JSON.stringify(n)},addWhiteboardFileAsJSON:function(e,t){e.whiteboardFiles=t.payload},updateRequestedWhiteboardData:function(e,t){e.requestedWhiteboardData=t.payload}}}),Be=(Ue=Le.actions).updateExcalidrawElements,We=Ue.updateMousePointerLocation,Ve=Ue.addWhiteboardFile,Ge=Ue.addWhiteboardFileAsJSON,He=Ue.updateRequestedWhiteboardData;const ze=Le.reducer;var qe=(0,v.xC)({reducer:{participants:R,activeSpeakers:_,session:X,bottomIconsActivity:xe,chatMessages:ke,roomSettings:De,whiteboard:ze},devTools:!1}),Xe=function(){return(0,s.I0)()},Je=s.v9,Ye=n(12437),$e=n.n(Ye),Ke=n(22327),Qe=function(){return Qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qe.apply(this,arguments)};const Ze=function(e){var t,n=e.title,r=e.text,a=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",Qe({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("div",{className:"error-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat("".concat(a,"/imgs/app-banner.jpg"),'")')}}),(0,o.jsx)("div",Qe({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] flex items-center justify-center"},{children:(0,o.jsxs)("div",Qe({className:"inner text-center"},{children:[(0,o.jsx)("h2",Qe({className:"text-3xl font-medium mb-4"},{children:n})),(0,o.jsx)("p",{children:r})]}))}))]}))};var et=function(){return et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},et.apply(this,arguments)};const tt=function(e){var t=e.text;return(0,o.jsx)("div",et({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",et({className:"inner"},{children:[(0,o.jsxs)("div",et({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})),(0,o.jsx)("p",et({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}))]}))}))};var nt=n(20573),rt=n(78219),ot=n(56727),at=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},it=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function st(e){return at(this,void 0,void 0,(function(){var t,n,r,o,a,i;return it(this,(function(s){switch(s.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:if((r=(r=s.sent()).filter((function(t){return t.kind===e}))).length>1&&"default"===r[0].deviceId){for(o=r[0],a=1;a<r.length;a+=1)if(r[a].groupId===o.groupId){i=r[0],r[0]=r[a],r[a]=i;break}return[2,r.filter((function(e){return e!==o}))]}return n.getTracks().forEach((function(e){e.stop()})),[2,r]}}))}))}var ct=function(e){return e.toString(16).padStart(2,"0")},lt=function(e){void 0===e&&(e=20);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,ct).join("")},ut=function(e){void 0===e&&(e=10);var t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Number(t.join(""))},dt=function(){var e,t=null!==(e=window.DEFAULT_SCREEN_SHARE_RESOLUTION)&&void 0!==e?e:"h1080fps15",n=rt.ScreenSharePresets.h1080fps15.resolution;switch(t){case"h360fps3":n=rt.ScreenSharePresets.h360fps3.resolution;break;case"h720fps5":n=rt.ScreenSharePresets.h720fps5.resolution;break;case"h720fps15":n=rt.ScreenSharePresets.h720fps15.resolution;break;case"h1080fps15":n=rt.ScreenSharePresets.h1080fps15.resolution;break;case"h1080fps30":n=rt.ScreenSharePresets.h1080fps30.resolution}return n},ft=function(){return ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ft.apply(this,arguments)};const pt=function(e){var t=e.deviceId,n=e.onSourcePlayback,r=e.onMediaStream,i=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=i.current,n={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(n).then((function(t){e&&(r(t),e.srcObject=t)})),function(){e&&(e.pause(),e.removeAttribute("src"))}}),[t]);return(0,o.jsx)("div",ft({className:"preview-camera-webcam"},{children:(0,o.jsx)("video",{className:"my-5 w-full",ref:i,autoPlay:!0,height:"50",onLoadedData:function(e){var t,r,o=e.target;n({htmlElement:o,width:null!==(t=o.videoWidth)&&void 0!==t?t:330,height:null!==(r=o.videoHeight)&&void 0!==r?r:200})}})}))};var mt={"640x360":[640,360],"256x256":[256,256],"256x144":[256,144],"160x96":[160,96]},ht={model:"meet",backend:"wasmSimd",inputResolution:"160x96",pipeline:"webgl2"};var vt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},bt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},xt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function gt(e,t,n,r,o,a,i){var s=r.getContext("2d"),c=xt(mt[n.inputResolution],2),l=c[0],u=c[1],d=l*u,f=new ImageData(l,u),p=document.createElement("canvas");p.width=l,p.height=u;var m,h=p.getContext("2d"),v=a._getInputMemoryOffset()/4,b=a._getOutputMemoryOffset()/4;function x(){return vt(this,void 0,void 0,(function(){var e,t;return bt(this,(function(n){switch(n.label){case 0:return[4,o.segmentPerson(p)];case 1:for(e=n.sent(),t=0;t<d;t++)f.data[4*t+3]=e.data[t]?255:0;return h.putImageData(f,0,0),[2]}}))}))}return{render:function(){return vt(this,void 0,void 0,(function(){return bt(this,(function(r){switch(r.label){case 0:return"none"!==t.type&&function(){if(h.drawImage(e.htmlElement,0,0,e.width,e.height,0,0,l,u),"meet"===n.model||"mlkit"===n.model)for(var t=h.getImageData(0,0,l,u),r=0;r<d;r++)a.HEAPF32[v+3*r]=t.data[4*r]/255,a.HEAPF32[v+3*r+1]=t.data[4*r+1]/255,a.HEAPF32[v+3*r+2]=t.data[4*r+2]/255}(),i(),"none"===t.type?[3,3]:"bodyPix"!==n.model?[3,2]:[4,x()];case 1:return r.sent(),[3,3];case 2:!function(){a._runInference();for(var e=0;e<d;e++)if("meet"===n.model){var t=a.HEAPF32[b+2*e],r=a.HEAPF32[b+2*e+1],o=Math.max(t,r),i=Math.exp(t-o),s=Math.exp(r-o);f.data[4*e+3]=255*s/(i+s)}else if("mlkit"===n.model){r=a.HEAPF32[b+e];f.data[4*e+3]=255*r}h.putImageData(f,0,0)}(),r.label=3;case 3:return i(),function(){s.globalCompositeOperation="copy",s.filter="none",(null===m||void 0===m?void 0:m.smoothSegmentationMask)&&("blur"===t.type?s.filter="blur(8px)":"image"===t.type&&(s.filter="blur(4px)"));"none"!==t.type&&(s.drawImage(p,0,0,l,u,0,0,e.width,e.height),s.globalCompositeOperation="source-in",s.filter="none");s.drawImage(e.htmlElement,0,0),"blur"===t.type&&(s.globalCompositeOperation="destination-over",s.filter="blur(8px)",s.drawImage(e.htmlElement,0,0))}(),[2]}}))}))},updatePostProcessingConfig:function(e){m=e},cleanUp:function(){}}}var yt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},St=String.raw;function _t(e,t,n,r,o){var a=function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(e.getProgramInfoLog(r)));return r}(e,t,n),i=e.getAttribLocation(a,"a_position");e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0);var s=e.getAttribLocation(a,"a_texCoord");return e.enableVertexAttribArray(s),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),a}function kt(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(e.getShaderInfoLog(r)));return r}function jt(e,t,n,r,o,a){void 0===o&&(o=e.NEAREST),void 0===a&&(a=e.NEAREST);var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a),e.texStorage2D(e.TEXTURE_2D,1,t,n,r),i}function Tt(e,t,n,r,o,a,i){return yt(this,void 0,void 0,(function(){var s,c;return wt(this,(function(l){switch(l.label){case 0:return s=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),e.flush(),[4,Nt(e,s)];case 1:return c=l.sent(),e.deleteSync(s),c!==e.WAIT_FAILED&&(e.bindBuffer(t,n),e.getBufferSubData(t,r,o,a,i),e.bindBuffer(t,null)),[2]}}))}))}function Nt(e,t){return new Promise((function(n){requestAnimationFrame((function r(){var o=e.clientWaitSync(t,0,0);o!==e.WAIT_FAILED?o!==e.TIMEOUT_EXPIRED?n(o):requestAnimationFrame(r):n(o)}))}))}var Et,Ct,At,Rt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function Pt(e,t,n,r,o,a){var i=function(e,t,n,r,o,a){var i=St(Et||(Et=Rt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    const float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);\n    const float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,\n      0.0540540541, 0.0162162162);\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < 5; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord) * weight[i] *\n          (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  "]))),s=.5,c=a.width*s,l=a.height*s,u=1/c,d=1/l,f=kt(e,e.FRAGMENT_SHADER,i),p=_t(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),h=e.getUniformLocation(p,"u_personMask"),v=e.getUniformLocation(p,"u_texelSize"),b=jt(e,e.RGBA8,c,l,e.NEAREST,e.LINEAR),x=jt(e,e.RGBA8,c,l,e.NEAREST,e.LINEAR),g=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,g),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0);var y=e.createFramebuffer();function w(){e.viewport(0,0,c,l),e.useProgram(p),e.uniform1i(m,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o);for(var t=0;t<3;t++)e.uniform2f(v,0,d),e.bindFramebuffer(e.FRAMEBUFFER,g),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,b),e.uniform1i(m,2),e.uniform2f(v,u,0),e.bindFramebuffer(e.FRAMEBUFFER,y),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,x)}function S(){e.deleteFramebuffer(y),e.deleteFramebuffer(g),e.deleteTexture(x),e.deleteTexture(b),e.deleteProgram(p),e.deleteShader(f)}return e.bindFramebuffer(e.FRAMEBUFFER,y),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,x,0),e.useProgram(p),e.uniform1i(h,1),{render:w,cleanUp:S}}(e,t,n,r,o,a),s=function(e,t,n,r){var o=St(Ct||(Ct=Rt(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),a=St(At||(At=Rt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  "]))),i=r.width,s=r.height,c=kt(e,e.VERTEX_SHADER,o),l=kt(e,e.FRAGMENT_SHADER,a),u=_t(e,c,l,t,n),d=e.getUniformLocation(u,"u_inputFrame"),f=e.getUniformLocation(u,"u_personMask"),p=e.getUniformLocation(u,"u_blurredInputFrame"),m=e.getUniformLocation(u,"u_coverage");function h(){e.viewport(0,0,i,s),e.useProgram(u),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function v(t){e.useProgram(u),e.uniform2f(m,t[0],t[1])}function b(){e.deleteProgram(u),e.deleteShader(l),e.deleteShader(c)}return e.useProgram(u),e.uniform1i(d,0),e.uniform1i(f,1),e.uniform1i(p,2),e.uniform2f(m,0,1),{render:h,updateCoverage:v,cleanUp:b}}(e,n,r,a);return{render:function(){i.render(),s.render()},updateCoverage:function(e){s.updateCoverage(e)},cleanUp:function(){s.cleanUp(),i.cleanUp()}}}var Ft,Ot,It=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var Mt,Dt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ut=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Lt,Bt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Wt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Vt,Gt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ht=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function zt(e,t,n,r,o,a){var i=St(Vt||(Vt=Gt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  "]))),s=a._getInputMemoryOffset()/4,c=Ht(mt[o.inputResolution],2),l=c[0],u=c[1],d=l*u,f=kt(e,e.FRAGMENT_SHADER,i),p=_t(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputFrame"),h=jt(e,e.RGBA8,l,u),v=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h,0);var b=new Uint8Array(4*d);return e.useProgram(p),e.uniform1i(m,0),{render:function(){e.viewport(0,0,l,u),e.useProgram(p),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4),function(e,t,n,r,o,a,i,s){yt(this,void 0,void 0,(function(){var c;return wt(this,(function(l){switch(l.label){case 0:return c=e.createBuffer(),e.bindBuffer(e.PIXEL_PACK_BUFFER,c),e.bufferData(e.PIXEL_PACK_BUFFER,s.byteLength,e.STREAM_READ),e.readPixels(t,n,r,o,a,i,0),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),[4,Tt(e,e.PIXEL_PACK_BUFFER,c,0,s)];case 1:return l.sent(),e.deleteBuffer(c),[2,s]}}))}))}(e,0,0,l,u,e.RGBA,e.UNSIGNED_BYTE,b);for(var t=0;t<d;t++){var n=s+3*t,r=4*t;a.HEAPF32[n]=b[r]/255,a.HEAPF32[n+1]=b[r+1]/255,a.HEAPF32[n+2]=b[r+2]/255}},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}var qt,Xt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Jt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};var Yt,$t=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Kt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Qt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Zt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function en(e,t,n,r,o,a,i){var s=St(Yt||(Yt=$t(["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "],["#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  "]))),c=e.width,l=e.height,u=Zt(mt[r.inputResolution],2),d=u[0],f=u[1],p=o.getContext("webgl2"),m=kt(p,p.VERTEX_SHADER,s),h=p.createVertexArray();p.bindVertexArray(h);var v=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,v),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),p.STATIC_DRAW);var b=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,b),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),p.STATIC_DRAW);var x=p.createTexture();p.bindTexture(p.TEXTURE_2D,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);var g=jt(p,p.RGBA8,d,f),y=jt(p,p.RGBA8,c,l),w=zt(p,m,v,b,r,a),S="meet"===r.model?function(e,t,n,r,o,a,i){var s=St(qt||(qt=Xt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  "]))),c=a._getOutputMemoryOffset()/4,l=Jt(mt[o.inputResolution],2),u=l[0],d=l[1],f=kt(e,e.FRAGMENT_SHADER,s),p=_t(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),h=jt(e,e.RG32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RG,e.FLOAT,a.HEAPF32,c),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,b,r,a,g):function(e,t,n,r,o,a,i){var s=St(Lt||(Lt=Bt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      float segmentation = texture(u_inputSegmentation, v_texCoord).r;\n      outColor = vec4(vec3(0.0), segmentation);\n    }\n  "]))),c=a._getOutputMemoryOffset()/4,l=Wt(mt[o.inputResolution],2),u=l[0],d=l[1],f=kt(e,e.FRAGMENT_SHADER,s),p=_t(e,t,f,n,r),m=e.getUniformLocation(p,"u_inputSegmentation"),h=jt(e,e.R32F,u,d),v=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(p),e.uniform1i(m,1),{render:function(){e.viewport(0,0,u,d),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,d,e.RED,e.FLOAT,a.HEAPF32,c),e.bindFramebuffer(e.FRAMEBUFFER,v),e.drawArrays(e.TRIANGLE_STRIP,0,4)},cleanUp:function(){e.deleteFramebuffer(v),e.deleteTexture(h),e.deleteProgram(p),e.deleteShader(f)}}}(p,m,v,b,r,a,g),_=function(e,t,n,r,o,a,i,s){var c=St(Mt||(Mt=Dt(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  "]))),l=Ut(mt[a.inputResolution],2),u=l[0],d=l[1],f=s.width,p=s.height,m=1/f,h=1/p,v=kt(e,e.FRAGMENT_SHADER,c),b=_t(e,t,v,n,r),x=e.getUniformLocation(b,"u_inputFrame"),g=e.getUniformLocation(b,"u_segmentationMask"),y=e.getUniformLocation(b,"u_texelSize"),w=e.getUniformLocation(b,"u_step"),S=e.getUniformLocation(b,"u_radius"),_=e.getUniformLocation(b,"u_offset"),k=e.getUniformLocation(b,"u_sigmaTexel"),j=e.getUniformLocation(b,"u_sigmaColor"),T=e.createFramebuffer();function N(t){t*=Math.max(f/u,p/d);var n=Math.max(1,.66*Math.sqrt(t)),r=t,o=n>1?.5*n:0,a=Math.max(m,h)*t;e.useProgram(b),e.uniform1f(w,n),e.uniform1f(S,r),e.uniform1f(_,o),e.uniform1f(k,a)}function E(t){e.useProgram(b),e.uniform1f(j,t)}return e.bindFramebuffer(e.FRAMEBUFFER,T),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.useProgram(b),e.uniform1i(x,0),e.uniform1i(g,1),e.uniform2f(y,m,h),N(0),E(0),{render:function(){e.viewport(0,0,f,p),e.useProgram(b),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,T),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateSigmaSpace:N,updateSigmaColor:E,cleanUp:function(){e.deleteFramebuffer(T),e.deleteProgram(b),e.deleteShader(v)}}}(p,m,v,b,g,r,y,o),k="blur"===n.type?Pt(p,m,v,b,y,o):function(e,t,n,r,o,a){var i=St(Ft||(Ft=It(["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "],["#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  "]))),s=St(Ot||(Ot=It(["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "],["#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap) +\n        (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  "]))),c=a.width,l=a.height,u=c/l,d=kt(e,e.VERTEX_SHADER,i),f=kt(e,e.FRAGMENT_SHADER,s),p=_t(e,d,f,t,n),m=e.getUniformLocation(p,"u_backgroundScale"),h=e.getUniformLocation(p,"u_backgroundOffset"),v=e.getUniformLocation(p,"u_inputFrame"),b=e.getUniformLocation(p,"u_personMask"),x=e.getUniformLocation(p,"u_background"),g=e.getUniformLocation(p,"u_coverage"),y=e.getUniformLocation(p,"u_lightWrapping"),w=e.getUniformLocation(p,"u_blendMode");e.useProgram(p),e.uniform2f(m,1,1),e.uniform2f(h,0,0),e.uniform1i(v,0),e.uniform1i(b,1),e.uniform2f(g,0,1),e.uniform1f(y,0),e.uniform1f(w,0);var S=null;function _(t){S=jt(e,e.RGBA8,t.naturalWidth,t.naturalHeight,e.LINEAR,e.LINEAR),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.naturalWidth,t.naturalHeight,e.RGBA,e.UNSIGNED_BYTE,t);var n=0,r=0,o=t.naturalWidth,a=t.naturalHeight;o/a<u?(a=o/u,r=(t.naturalHeight-a)/2):(o=a*u,n=(t.naturalWidth-o)/2);var i=o/t.naturalWidth,s=a/t.naturalHeight;n/=t.naturalWidth,r/=t.naturalHeight,e.uniform2f(m,i,s),e.uniform2f(h,n,r)}return(null===o||void 0===o?void 0:o.complete)?_(o):o&&(o.onload=function(){_(o)}),{render:function(){e.viewport(0,0,c,l),e.useProgram(p),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,r),null!==S&&(e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,S),e.uniform1i(x,2)),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLE_STRIP,0,4)},updateCoverage:function(t){e.useProgram(p),e.uniform2f(g,t[0],t[1])},updateLightWrapping:function(t){e.useProgram(p),e.uniform1f(y,t)},updateBlendMode:function(t){e.useProgram(p),e.uniform1f(w,"screen"===t?0:1)},cleanUp:function(){e.deleteTexture(S),e.deleteProgram(p),e.deleteShader(f),e.deleteShader(d)}}}(p,v,b,y,t,o);return{render:function(){return Kt(this,void 0,void 0,(function(){return Qt(this,(function(t){return p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,x),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,e.htmlElement),p.bindVertexArray(h),w.render(),i(),a._runInference(),i(),S.render(),_.render(),k.render(),[2]}))}))},updatePostProcessingConfig:function(e){if(_.updateSigmaSpace(e.jointBilateralFilter.sigmaSpace),_.updateSigmaColor(e.jointBilateralFilter.sigmaColor),"image"===n.type)(t=k).updateCoverage(e.coverage),t.updateLightWrapping(e.lightWrapping),t.updateBlendMode(e.blendMode);else if("blur"===n.type){k.updateCoverage(e.coverage)}else{var t;(t=k).updateCoverage([0,.9999]),t.updateLightWrapping(0)}},cleanUp:function(){k.cleanUp(),_.cleanUp(),S.cleanUp(),w.cleanUp(),p.deleteTexture(y),p.deleteTexture(g),p.deleteTexture(x),p.deleteBuffer(b),p.deleteBuffer(v),p.deleteVertexArray(h),p.deleteShader(m)}}}var tn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},nn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},rn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const on=function(e,t,n,r,o){var i=rn((0,a.useState)(null),2),s=i[0],c=i[1],l=(0,a.useRef)(null),u=(0,a.useRef)(null),d=rn((0,a.useState)(0),2),f=d[0],p=d[1],m=rn((0,a.useState)([]),2),h=m[0],v=m[1];return(0,a.useEffect)((function(){var a,i=!0,s=0,d=0,f=0,m=0,h=[],b="webgl2"===n.pipeline?en(e,l.current,t,n,u.current,o,x):gt(e,t,n,u.current,r,o,x);function x(){var e=Date.now();h[f]=e-d,d=e,f++}return function e(){return tn(this,void 0,void 0,(function(){return nn(this,(function(t){switch(t.label){case 0:return i?(d=Date.now(),[4,b.render()]):[2];case 1:return t.sent(),function(){var e=Date.now();h[f]=e-d,m++,e>=s+1e3&&(p(1e3*m/(e-s)),v(h),s=e,m=0);f=0}(),a=requestAnimationFrame(e),[2]}}))}))}(),c(b),function(){i=!1,cancelAnimationFrame(a),b.cleanUp(),c(null)}}),[e,t,n,r,o]),{pipeline:s,backgroundImageRef:l,canvasRef:u,fps:f,durations:h}};var an=function(){return an=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},an.apply(this,arguments)};const sn=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.segmentationConfig,i=e.postProcessingConfig,s=e.bodyPix,c=e.tflite,l=e.id,u=e.onCanvasRef,d=on(t,n,r,s,c),f=d.pipeline,p=d.backgroundImageRef,m=d.canvasRef;return(0,a.useEffect)((function(){f&&f.updatePostProcessingConfig(i)}),[f,i]),(0,a.useEffect)((function(){u&&u(m)}),[m]),(0,o.jsxs)("div",an({className:"root preview-camera-webcam"},{children:["image"===n.type&&(0,o.jsx)("img",{ref:p,className:"render",src:n.url,alt:"",hidden:"webgl2"===r.pipeline}),(0,o.jsx)("canvas",{ref:m,className:"render w-full my-5",width:t.width,height:t.height,id:l},r.pipeline)]}))};var cn={smoothSegmentationMask:!0,jointBilateralFilter:{sigmaSpace:1,sigmaColor:.1},coverage:[.5,.75],lightWrapping:.3,blendMode:"screen"},ln=n(56124),un=(n(85186),n(86931)),dn=(n(68607),function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))}),fn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},pn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const mn=function(){var e=pn((0,a.useState)(),2),t=e[0],n=e[1];return(0,a.useEffect)((function(){!function(){dn(this,void 0,void 0,(function(){var e;return fn(this,(function(t){switch(t.label){case 0:return console.log("Loading TensorFlow.js and BodyPix segmentation model"),[4,un.Cd_()];case 1:return t.sent(),e=n,[4,ln.zD()];case 2:return e.apply(void 0,[t.sent()]),console.log("TensorFlow.js and BodyPix loaded"),[2]}}))}))}()}),[]),t};var hn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},vn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},bn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const xn=function(e){var t,n=bn((0,a.useState)(),2),r=n[0],o=n[1],i=bn((0,a.useState)(),2),s=i[0],c=i[1],l=bn((0,a.useState)(),2),u=l[0],d=l[1],f=bn((0,a.useState)(!1),2),p=f[0],m=f[1],h=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){!function(){hn(this,void 0,void 0,(function(){var e;return vn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,createTFLiteSIMDModule()];case 1:return e=t.sent(),c(e),o(e),m(!0),[3,3];case 2:t.sent();try{createTFLiteModule().then(o)}catch(n){console.warn("Failed to create TFLite WebAssembly module.",n)}return[3,3];case 3:return[2]}}))}))}()}),[]),(0,a.useEffect)((function(){!function(){hn(this,void 0,void 0,(function(){var t,n,o,a;return vn(this,(function(i){switch(i.label){case 0:if(!r||p&&!s||!p&&"wasmSimd"===e.backend||"meet"!==e.model&&"mlkit"!==e.model)return[2];if(d(void 0),!(t="wasmSimd"===e.backend?s:r))throw new Error("TFLite backend unavailable: ".concat(e.backend));return n=function(e,t){switch(e){case"meet":return"256x144"===t?"segm_full_v679":"segm_lite_v681";case"mlkit":return"selfiesegmentation_mlkit-256x256-2021_01_19-v1215.f16";default:throw new Error("No TFLite file for this segmentation model: ".concat(e))}}(e.model,e.inputResolution),console.log("Loading tflite model:",n),[4,fetch("".concat(h,"/models/").concat(n,".tflite"))];case 1:return[4,i.sent().arrayBuffer()];case 2:return o=i.sent(),console.log("Model buffer size:",o.byteLength),a=t._getModelBufferMemoryOffset(),console.log("Model buffer memory offset:",a),console.log("Loading model buffer..."),t.HEAPU8.set(new Uint8Array(o),a),console.log("_loadModel result:",t._loadModel(o.byteLength)),console.log("Input memory offset:",t._getInputMemoryOffset()),console.log("Input height:",t._getInputHeight()),console.log("Input width:",t._getInputWidth()),console.log("Input channels:",t._getInputChannelCount()),console.log("Output memory offset:",t._getOutputMemoryOffset()),console.log("Output height:",t._getOutputHeight()),console.log("Output width:",t._getOutputWidth()),console.log("Output channels:",t._getOutputChannelCount()),d(t),[2]}}))}))}()}),[r,s,p,e.model,e.backend,e.inputResolution]),{tflite:u,isSIMDSupported:p}};var gn=function(){return gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gn.apply(this,arguments)},yn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const wn=function(e){var t=e.sourcePlayback,n=e.backgroundConfig,r=e.id,i=e.onCanvasRef,s=yn((0,a.useState)(ht),2),c=s[0],l=s[1],u=mn(),d=xn(c),f=d.tflite,p=d.isSIMDSupported;return(0,a.useEffect)((function(){u&&l((function(e){return"wasmSimd"!==e.backend||p?e:gn(gn({},e),{backend:"wasm"})}))}),[p]),(0,o.jsx)(o.Fragment,{children:t&&u&&f?(0,o.jsx)(sn,{sourcePlayback:t,backgroundConfig:null!==n&&void 0!==n?n:$,segmentationConfig:c,postProcessingConfig:cn,bodyPix:u,tflite:f,id:r,onCanvasRef:i}):null})};var Sn=function(){return Sn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sn.apply(this,arguments)},_n=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const kn=function(e){var t=e.onSelect,n=_n((0,a.useState)($),2),r=n[0],i=n[1],s=function(e,n){var r={type:e,url:n};i(r),t(r)};return(0,o.jsxs)("div",Sn({className:"flex flex-wrap items-center justify-start p-3 bg-slate-100 shadow-header"},{children:[(0,o.jsx)("div",Sn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in  ".concat("none"===r.type?"border-brandColor2 scale-95":""),onClick:function(){return s("none","")}},{children:(0,o.jsx)("i",{className:"pnm-ban-solid"})})),(0,o.jsx)("div",Sn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center border-2 border-solid border-gray-300 transition transform scale-90 hover:scale-95 ease-in ".concat("blur"===r.type?"border-brandColor2 scale-95":""),onClick:function(){return s("blur","")}},{children:(0,o.jsx)("i",{className:"pnm-blur"})})),Q.map((function(e){return(0,o.jsx)("div",Sn({className:"cursor-pointer rounded-md w-[62px] h-[62px] overflow-hidden flex items-center justify-center transition transform scale-90 hover:scale-95 ease-in border-2 border-solid border-transparent ".concat(r.url===e?"border-brandColor2 scale-95":""),onClick:function(){return s("image",e)}},{children:(0,o.jsx)("img",{src:e,alt:e,className:"object-cover w-full h-full"})}),e)}))]}))};var jn=function(){return jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jn.apply(this,arguments)},Tn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Nn=function(e){var t,n=e.deviceId,r=Tn((0,a.useState)(),2),i=r[0],s=r[1],c=Tn((0,a.useState)(!1),2),l=c[0],u=c[1],d=Tn((0,a.useState)(),2),f=d[0],p=d[1],m=Tn((0,a.useState)(),2),h=m[0],v=m[1],b=Tn((0,a.useState)(),2),x=b[0],g=b[1],y=null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.userId,w=Xe(),S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(0,a.useEffect)((function(){f!==n&&(u(!1),p(n))}),[n]),(0,a.useEffect)((function(){u(!1);i&&setTimeout((function(){u(!0)}),500)}),[i]),(0,a.useEffect)((function(){return function(){x&&x.getTracks().forEach((function(e){e.stop()}))}}),[x]);return(0,o.jsxs)("div",jn({className:"mt-5"},{children:[n?(0,o.jsx)("div",jn({style:h?{display:"none"}:{display:""}},{children:(0,o.jsx)(pt,{deviceId:n,onSourcePlayback:s,onMediaStream:g})})):null,l&&i&&y&&h?(0,o.jsx)(wn,{sourcePlayback:i,backgroundConfig:h,id:y}):null,S?null:(0,o.jsx)(kn,{onSelect:function(e){w(be(e)),"none"===e.type?(u(!1),v(void 0)):(!l&&n&&u(!0),v(e))}})]}))};var En=function(){return En=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},En.apply(this,arguments)},Cn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},An=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Rn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Pn=(0,nt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const Fn=function(e){var t=e.onSelectedDevice,n=Je(Pn),r=Rn((0,a.useState)(!0),2),i=r[0],s=r[1],c=Rn((0,a.useState)(""),2),l=c[0],u=c[1],d=Rn((0,a.useState)([]),2),f=d[0],p=d[1],m=Xe(),h=(0,Ke.$)().t;(0,a.useEffect)((function(){Cn(void 0,void 0,void 0,(function(){var e,t,n;return An(this,(function(r){switch(r.label){case 0:return[4,st("videoinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",En({value:e.deviceId},{children:e.label}),e.deviceId)})),p(n),u(e[0].deviceId),t.length&&m(Ee(t)),[2]}}))}))}),[m]),(0,a.useEffect)((function(){n&&s(!0)}),[n]);var v=function(){s(!1),m(de(!1)),m(re(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(ot.uT,En({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ot.Vq,En({open:i,onClose:function(){return v()},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",En({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",En({className:"popup-inner bg-white w-full max-w-md rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",En({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return v()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,En({className:"mb-6"},{children:h("footer.modal.select-webcam")})),(0,o.jsx)("div",En({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",En({value:l,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:f}))})),(0,o.jsx)("div",En({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(Nn,{deviceId:l})})),(0,o.jsx)("div",En({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",En({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brandColor1 hover:bg-brandColor2 focus:outline-none",onClick:function(){return Cn(void 0,void 0,void 0,(function(){return An(this,(function(e){return v(),l?(t(l),[2]):[2]}))}))}},{children:h("share")}))}))]}))]}))}))})):null})};var On=function(){return On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},On.apply(this,arguments)},In=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Mn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Dn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Un=(0,nt.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),Ln=(0,nt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const Bn=function(e){var t=e.currentRoom,n=Xe(),r=(0,Ke.$)().t,i=Je(Un),s=Je(Ln),c=Dn((0,a.useState)(),2),l=c[0],u=c[1],d=Dn((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",On({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:function(){return(0,o.jsx)("p",On({className:"".concat(s===e.id?"brand-color2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return p(e.id)}},{children:e.label}))}})}),e.id)}));u(e)}),[s,i]),(0,a.useEffect)((function(){f&&n(Ae(f))}),[f,n]);return(0,o.jsxs)(ot.v2.Items,On({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[l,(0,o.jsx)("div",On({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:function(){return(0,o.jsx)("p",On({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return In(void 0,void 0,void 0,(function(){return Mn(this,(function(n){return e.track&&e.track.source===rt.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(re(!1)),n(Ae("")),void n(be({type:"none"}))}},{children:r("footer.menus.leave-webcam")}))}})}))]}))};var Wn=function(){return Wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wn.apply(this,arguments)};const Vn=function(e){var t=e.currentRoom;return(0,o.jsx)(a.Fragment,{children:(0,o.jsx)("div",Wn({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)(ot.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ot.v2.Button,{children:(0,o.jsx)("div",Wn({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(ot.uT,Wn({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Bn,{currentRoom:t})}))]})}})}))})};var Gn=function(){return Gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gn.apply(this,arguments)},Hn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},zn=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},qn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Xn=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),Jn=(0,nt.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),Yn=(0,nt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_webcam}),(function(e){return e})),$n=(0,nt.P1)((function(e){return e.bottomIconsActivity.virtualBackground}),(function(e){return e})),Kn=(0,nt.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const Qn=function(e){var t=e.currentRoom,n=Xe(),r="desktop"===qe.getState().session.userDeviceType,i=Je(Jn),s=Je(Xn),c=Je(Yn),l=Je($n),u=Je(Kn),d=(0,Ke.$)().t,f=qn((0,a.useState)(!1),2),p=f[0],m=f[1],h=qn((0,a.useState)(),2),v=h[0],b=h[1],x=qn((0,a.useState)(),2),g=x[0],y=x[1],w=qn((0,a.useState)(),2),S=w[0],_=w[1],k=(0,a.useRef)(null);(0,a.useEffect)((function(){if(c){m(!0);var e=T.selectById(qe.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===rt.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),n(re(!1)))}else m(!1)}),[c,t,n]),(0,a.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=qe.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,a=null===(r=null===(n=qe.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!a&&!1!==c&&m(!0)}),[]),(0,a.useEffect)((function(){s||!S||u||S.getTracks().forEach((function(e){return e.stop()})),s||u||!v||b(void 0)}),[u]),(0,a.useEffect)((function(){if(u&&v&&u!==v){"none"===l.type?function(e){Hn(void 0,void 0,void 0,(function(){return zn(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return n.sent(),[2]}}))}))}(u):function(e){Hn(void 0,void 0,void 0,(function(){return zn(this,(function(t){switch(t.label){case 0:return[4,N(e)];case 1:return t.sent(),[2]}}))}))}(u),b(u)}}),[u]),(0,a.useEffect)((function(){if(S&&k){var e=k.current;e&&(e.srcObject=S)}return function(){S&&S.getTracks().forEach((function(e){return e.stop()}))}}),[S]);var j=function(){var e,t,n=k.current;n&&y({htmlElement:n,width:null!==(e=n.videoWidth)&&void 0!==e?e:320,height:null!==(t=n.videoHeight)&&void 0!==t?t:180})},N=function(e){return Hn(void 0,void 0,void 0,(function(){var r,o,a,i;return zn(this,(function(s){switch(s.label){case 0:return"none"!==l.type?[3,3]:(r=function(){var e,t=null!==(e=window.DEFAULT_WEBCAM_RESOLUTION)&&void 0!==e?e:"h720",n=rt.VideoPresets.h720.resolution;switch(t){case"h90":n=rt.VideoPresets.h90.resolution;break;case"h180":n=rt.VideoPresets.h180.resolution;break;case"h216":n=rt.VideoPresets.h216.resolution;break;case"h360":n=rt.VideoPresets.h360.resolution;break;case"h540":n=rt.VideoPresets.h540.resolution;break;case"h720":n=rt.VideoPresets.h720.resolution;break;case"h1080":n=rt.VideoPresets.h1080.resolution;break;case"h1440":n=rt.VideoPresets.h1440.resolution;break;case"h2160":n=rt.VideoPresets.h2160.resolution}return n}(),[4,(0,rt.createLocalVideoTrack)({deviceId:{exact:e,ideal:e},resolution:r})]);case 1:return o=s.sent(),[4,t.localParticipant.publishTrack(o)];case 2:return s.sent(),n(re(!0)),[3,5];case 3:return a={video:{deviceId:{exact:e,ideal:e}}},[4,navigator.mediaDevices.getUserMedia(a)];case 4:i=s.sent(),_(i),s.label=5;case 5:return[2]}}))}))},E=function(e){return Hn(void 0,void 0,void 0,(function(){return zn(this,(function(t){switch(t.label){case 0:return b(e),[4,N(e)];case 1:return t.sent(),n(Ae(e)),[2]}}))}))},C=function(e){e.current.captureStream(15).getTracks().forEach((function(e){return Hn(void 0,void 0,void 0,(function(){return zn(this,(function(r){switch(r.label){case 0:return e.kind!==rt.Track.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e,{source:rt.Track.Source.Camera,name:"canvas"})];case 1:r.sent(),n(re(!0)),r.label=2;case 2:return[2]}}))}))}))},A=function(){return(0,o.jsxs)("div",Gn({className:"relative"},{children:[(0,o.jsxs)("div",Gn({className:"camera footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){p||(s?s&&(t.localParticipant.videoTracks.forEach((function(e){return Hn(void 0,void 0,void 0,(function(){return zn(this,(function(n){return e.track&&e.track.source===rt.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(re(!1)),n(Ae("")),n(be({type:"none"}))):n(de(!s)))}},{children:[(0,o.jsx)("span",Gn({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s||c?!s&&c?d("footer.icons.webcam-locked"):s?d("footer.icons.leave-webcam"):void 0:d("footer.icons.start-webcam")})),s?null:(0,o.jsx)("i",{className:"pnm-webcam brand-color1 text-[10px] lg:text-[14px]"}),p?(0,o.jsx)("div",Gn({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"})})):null,s?(0,o.jsx)("i",{className:"pnm-webcam brand-color2 text-[10px] lg:text-[14px]"}):null]})),s?(0,o.jsx)(Vn,{currentRoom:t}):null]}))};return(0,o.jsx)(o.Fragment,{children:function(){var e,t,n=qe.getState().session,r=null===(e=n.currentRoom.metadata)||void 0===e?void 0:e.room_features,o=n.currenUser;return!!(null===r||void 0===r?void 0:r.allow_webcams)&&!((null===r||void 0===r?void 0:r.admin_only_webcams)&&!(null===(t=null===o||void 0===o?void 0:o.metadata)||void 0===t?void 0:t.is_admin))}()?(0,o.jsxs)(o.Fragment,{children:[A(),i?(0,o.jsx)(Fn,{onSelectedDevice:E}):null,g&&v&&"none"!==l.type?(0,o.jsx)("div",Gn({style:{display:"none"}},{children:(0,o.jsx)(wn,{sourcePlayback:g,id:v,backgroundConfig:l,onCanvasRef:C})})):null,S?(0,o.jsx)("div",Gn({style:{display:"none"}},{children:(0,o.jsx)("video",{ref:k,autoPlay:!0,onLoadedData:j})})):null]}):null})};var Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zn.apply(this,arguments)},er=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},tr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},nr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},rr=(0,nt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const or=function(e){var t,n,r=e.currentRoom,i=Je(rr),s=nr((0,a.useState)(!0),2),c=s[0],l=s[1],u=nr((0,a.useState)(""),2),d=u[0],f=u[1],p=nr((0,a.useState)([]),2),m=p[0],h=p[1],v=Xe(),b=(0,Ke.$)().t,x=null!==(n=null===(t=qe.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==n&&n;(0,a.useEffect)((function(){er(void 0,void 0,void 0,(function(){var e,t,n;return tr(this,(function(r){switch(r.label){case 0:return[4,st("audioinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",Zn({value:e.deviceId},{children:e.label}),e.deviceId)})),h(n),f(e[0].deviceId),t.length&&v(Ne(t)),[2]}}))}))}),[v]),(0,a.useEffect)((function(){i&&l(!0)}),[i]);var g=function(){l(!1),v(ue(!1))};return(0,o.jsx)(a.Fragment,{children:i?(0,o.jsx)(ot.uT,Zn({show:c,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ot.Vq,Zn({open:c,onClose:function(){return g()},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Zn({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",Zn({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Zn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return g()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,Zn({className:"mb-6"},{children:b("footer.modal.select-microphone")})),(0,o.jsx)("div",Zn({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",Zn({value:d,onChange:function(e){return f(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:m}))})),(0,o.jsx)("div",Zn({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",Zn({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brandColor1 hover:bg-brandColor2 focus:outline-none",onClick:function(){return er(void 0,void 0,void 0,(function(){return tr(this,(function(e){switch(e.label){case 0:return l(!1),v(ue(!1)),d?[4,(0,rt.createLocalTracks)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return er(void 0,void 0,void 0,(function(){return tr(this,(function(t){switch(t.label){case 0:return e.kind!==rt.Track.Kind.Audio?[3,2]:[4,null===r||void 0===r?void 0:r.localParticipant.publishTrack(e)];case 1:t.sent(),v(te(!0)),t.label=2;case 2:return[2]}}))}))})),x&&setTimeout((function(){return er(void 0,void 0,void 0,(function(){return tr(this,(function(e){return null===r||void 0===r||r.localParticipant.audioTracks.forEach((function(e){return er(void 0,void 0,void 0,(function(){return tr(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===rt.Track.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),v(ne(!0)),v(z(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),v(Ce(d)),[2]}}))}))}},{children:b("join")}))}))]}))]}))}))})):null})};var ar=function(){return ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ar.apply(this,arguments)},ir=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},sr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},lr=(0,nt.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),ur=(0,nt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),dr=(0,nt.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const fr=function(e){var t=e.currentRoom,n=Xe(),r=(0,Ke.$)().t,i=Je(lr),s=Je(ur),c=Je(dr),l=cr((0,a.useState)(),2),u=l[0],d=l[1],f=cr((0,a.useState)(),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e=i.map((function(e){return(0,o.jsx)("div",ar({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:function(){return(0,o.jsx)("p",ar({className:"".concat(c===e.id?"brand-color2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return m(e.id)}},{children:e.label}))}})}),e.id)}));d(e)}),[i,c]),(0,a.useEffect)((function(){var e;p&&(e=p,ir(void 0,void 0,void 0,(function(){return sr(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return n.sent(),[2]}}))})),n(Ce(p)))}),[p,t,n]);return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(ot.v2.Items,ar({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[u,(0,o.jsx)("div",ar({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:function(){return(0,o.jsx)("p",ar({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-brandColor1 hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return ir(void 0,void 0,void 0,(function(){return sr(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===rt.Track.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ne(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:r(s?"footer.menus.unmute-microphone":"footer.menus.mute-microphone")}))}})})),(0,o.jsx)("div",ar({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:function(){return(0,o.jsx)("p",ar({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return ir(void 0,void 0,void 0,(function(){return sr(this,(function(n){return e.track&&e.kind===rt.Track.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(te(!1)),n(ne(!1)),void n(Ce(""))}},{children:r("footer.menus.leave-microphone")}))}})}))]}))})};var pr=function(){return pr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pr.apply(this,arguments)};const mr=function(e){var t=e.currentRoom;return(0,o.jsx)(a.Fragment,{children:(0,o.jsx)("div",pr({className:"absolute bottom-0 right-3 lg:right-6"},{children:(0,o.jsx)(ot.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ot.v2.Button,{children:(0,o.jsx)("div",pr({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[10px] sm:text-[12px]"})}))}),(0,o.jsx)(ot.uT,pr({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(fr,{currentRoom:t})}))]})}})}))})};var hr=function(){return hr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hr.apply(this,arguments)},vr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},br=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},xr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},gr=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),yr=(0,nt.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),wr=(0,nt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_microphone}),(function(e){return e})),Sr=(0,nt.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const _r=function(e){var t=e.currentRoom,n=Xe(),r="desktop"===qe.getState().session.userDeviceType,i=(0,Ke.$)().t,s=Je(yr),c=Je(gr),l=Je(wr),u=Je(Sr),d=xr((0,a.useState)(!1),2),f=d[0],p=d[1];(0,a.useEffect)((function(){if(l){p(!0);var e=T.selectById(qe.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===rt.Track.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),n(te(!1)),n(ne(!1)))}else p(!1)}),[l,t,n]),(0,a.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=qe.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,a=null===(r=null===(n=qe.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!a&&!1!==l&&p(!0)}),[]);var m=function(){c||f||n(ue(!0)),c&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return vr(void 0,void 0,void 0,(function(){return br(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===rt.Track.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(ne(!0)),t.label=4;case 4:return[2]}}))}))})))};return(0,o.jsxs)("div",hr({className:"relative"},{children:[s?(0,o.jsx)(or,{currentRoom:t}):null,(0,o.jsxs)("div",hr({className:"microphone footer-icon relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){return m()}},{children:[(0,o.jsx)("span",hr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:c||f?!c&&f?i("footer.icons.microphone-locked"):c&&!u?i("footer.menus.mute-microphone"):c&&u?i("footer.menus.unmute-microphone"):void 0:i("footer.icons.start-microphone-sharing")})),c?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1 text-[10px] lg:text-[14px]"}),f?(0,o.jsx)("div",hr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"})})):null]}),!u&&c?(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 text-[10px] lg:text-[14px]"}):null,u&&c?(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 text-[10px] lg:text-[14px]"}):null]})),c?(0,o.jsx)(mr,{currentRoom:t}):null]}))};var kr=function(){return kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kr.apply(this,arguments)},jr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Tr=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Nr=(0,nt.P1)((function(e){return e.bottomIconsActivity.totalUnreadChatMsgs}),(function(e){return e}));const Er=function(){var e=Xe(),t="desktop"===qe.getState().session.userDeviceType,n=(0,Ke.$)().t,r=Je(Tr),i=Je(Nr),s=jr((0,a.useState)("brand-color1"),2),c=s[0],l=s[1],u=jr((0,a.useState)(!0),2),d=u[0],f=u[1];(0,a.useEffect)((function(){l(r?"brand-color2":"brand-color1")}),[r]),(0,a.useEffect)((function(){var t;(null===(t=qe.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(f(!1),e(oe(!1)))}),[e]);return(0,o.jsx)(a.Fragment,{children:d?(0,o.jsxs)("div",kr({className:"message footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(oe(!r))}},{children:[(0,o.jsx)("span",kr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-chat-panel":"footer.icons.show-chat-panel")})),(0,o.jsx)("i",{className:"pnm-chat ".concat(c," text-[12px] lg:text-[16px]")}),!r&&i>0?(0,o.jsx)("div",kr({className:"unseen-message-count bg-brandRed w-5 h-5 rounded-full text-xs text-white absolute -top-2 -right-1 flex justify-center items-center"},{children:i})):null]})):null})};var Cr=function(){return Cr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cr.apply(this,arguments)},Ar=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Rr=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e}));const Pr=function(){var e=Xe(),t="desktop"===qe.getState().session.userDeviceType,n=(0,Ke.$)().t,r=Je(Rr),i=Ar((0,a.useState)("brand-color1"),2),s=i[0],c=i[1];(0,a.useEffect)((function(){c(r?"brand-color2":"brand-color1")}),[r]);return(0,o.jsxs)("div",Cr({className:"participants footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(ae(!r))}},{children:[(0,o.jsx)("span",Cr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-users-list":"footer.icons.show-users-list")})),(0,o.jsx)("i",{className:"pnm-participant ".concat(s," text-[12px] lg:text-[16px]")})]}))};var Fr=n(9669),Or=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Ir=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Mr=n.n(Fr)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),Dr=function(){if(qe.getState().session.token)return qe.getState().session.token;var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).access_token};const Ur=function(e,t){return Or(void 0,void 0,void 0,(function(){return Ir(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Mr.post(e,JSON.stringify(t),{headers:{Authorization:Dr(),"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw n.sent().response;case 3:return[2]}}))}))};var Lr,Br,Wr;!function(e){e.USER="USER",e.SYSTEM="SYSTEM",e.WHITEBOARD="WHITEBOARD"}(Lr||(Lr={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS",e.INIT_WHITEBOARD="INIT_WHITEBOARD"}(Br||(Br={})),function(e){e.SCENE_UPDATE="SCENE_UPDATE",e.POINTER_UPDATE="POINTER_UPDATE",e.ADD_WHITEBOARD_FILE="ADD_WHITEBOARD_FILE"}(Wr||(Wr={}));var Vr=function(){return Vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vr.apply(this,arguments)},Gr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Hr=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},zr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},qr=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const Xr=function(e){var t=e.currentRoom,n="desktop"===qe.getState().session.userDeviceType,r=(0,Ke.$)().t,i=Xe(),s=Je(qr),l=zr((0,a.useState)("brand-color1"),2),u=l[0],d=l[1];(0,a.useEffect)((function(){d(s?"brand-color2":"brand-color1")}),[s]);return(0,o.jsxs)("div",Vr({className:"hands footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return Gr(void 0,void 0,void 0,(function(){var e,n;return Hr(this,(function(o){switch(o.label){case 0:return s?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:Br.RAISE_HAND,msg:r("footer.notice.has-raised-hand",{user:t.localParticipant.name})},[4,Ur("dataMessage",e)]);case 1:return(n=o.sent()).status?(i(ie(!0)),(0,c.Am)(r("footer.notice.you-raised-hand"),{type:"info"})):(0,c.Am)(n.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:Br.LOWER_HAND,msg:Br.LOWER_HAND},[4,Ur("dataMessage",e)];case 3:(n=o.sent()).status?i(ie(!1)):(0,c.Am)(n.msg,{type:"error"}),o.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",Vr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(s?"footer.icons.lower-hand":"footer.icons.raise-hand")})),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(u," text-[12px] lg:text-[16px]")})]}))};var Jr=function(){return Jr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jr.apply(this,arguments)},Yr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},$r=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Kr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Qr=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),Zr=(0,nt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),eo=(0,nt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_screen_sharing}),(function(e){return e}));const to=function(e){var t,n,r=e.currentRoom,i="desktop"===qe.getState().session.userDeviceType,s=Xe(),l=(0,Ke.$)().t,u=Je(Qr),d=Je(Zr),f=Je(eo),p=Kr((0,a.useState)("brand-color1"),2),m=p[0],h=p[1],v=Kr((0,a.useState)(!1),2),b=v[0],x=v[1],g=null===(n=null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;(0,a.useEffect)((function(){h(u?"brand-color2":"brand-color1")}),[u]);var y=(0,a.useCallback)((function(){u&&(r.localParticipant.tracks.forEach((function(e){e.source!==rt.Track.Source.ScreenShare&&e.source!==rt.Track.Source.ScreenShareAudio||!e.track||r.localParticipant.unpublishTrack(e.track)})),s(se(!1)),s(U({isActive:!1,sharedBy:""})))}),[u,s,r]);(0,a.useEffect)((function(){g||(f?(x(!0),y()):f||x(!1))}),[y,f]),(0,a.useEffect)((function(){!d&&u&&s(se(!1))}),[d]);return(0,o.jsx)(o.Fragment,{children:function(){var e;return null===(e=qe.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_screen_share}()?(0,o.jsxs)("div",Jr({className:"share-screen footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer ".concat(i?"has-tooltip":""),onClick:function(){return Yr(void 0,void 0,void 0,(function(){return $r(this,(function(e){switch(e.label){case 0:return b?[2]:u?[3,2]:d?((0,c.Am)(l("footer.notice.already-active-screen-sharing"),{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,rt.createLocalScreenTracks)({audio:!0,resolution:dt()})];case 1:return e.sent().forEach((function(e){return Yr(void 0,void 0,void 0,(function(){return $r(this,(function(t){switch(t.label){case 0:return[4,r.localParticipant.publishTrack(e)];case 1:return t.sent(),[2]}}))}))})),s(se(!0)),s(U({isActive:!0,sharedBy:r.localParticipant.identity})),[3,3];case 2:y(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",Jr({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:u?l("footer.icons.stop-screen-sharing"):u||b?b?l("footer.icons.screen-sharing-locked"):void 0:l("footer.icons.start-screen-sharing")})),(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(m," text-[12px] lg:text-[16px]")}),b?(0,o.jsx)("div",Jr({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"})})):null]})]})):null})};var no=function(){return no=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},no.apply(this,arguments)},ro=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},oo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ao=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},io=(0,nt.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const so=function(){var e,t,n="desktop"===qe.getState().session.userDeviceType,r=(0,Ke.$)().t,i=Je(io),s=ao((0,a.useState)(!1),2),l=s[0],u=s[1],d=ao((0,a.useState)(!1),2),f=d[0],p=d[1],m=ao((0,a.useState)(!0),2),h=m[0],v=m[1],b=null===(t=null===(e=qe.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,x=0;(0,a.useEffect)((function(){return i?(p(!0),clearTimeout(x),u(!1)):!i&&f&&(p(!1),clearTimeout(x),u(!1)),function(){clearTimeout(x)}}),[i,f,x]),(0,a.useEffect)((function(){var e;(null===(e=qe.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||v(!1)}),[]);var g=function(){return ro(void 0,void 0,void 0,(function(){var e,t,n;return oo(this,(function(o){switch(o.label){case 0:return e={task:"start-recording",sid:qe.getState().session.currentRoom.sid},[4,Ur("recording",e)];case 1:return t=o.sent(),n="footer.notice.start-recording-progress",t.status||(n=t.msg),(0,c.Am)(r(n),{toastId:"recording-status",type:"info"}),x=setTimeout((function(){u(!1),(0,c.Am)(r("footer.notice.recording-not-start"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},y=function(){return ro(void 0,void 0,void 0,(function(){var e,t,n;return oo(this,(function(o){switch(o.label){case 0:return e={task:"stop-recording",sid:qe.getState().session.currentRoom.sid},[4,Ur("recording",e)];case 1:return t=o.sent(),n="footer.notice.stop-recording-service-in-progress",t.status||(n=t.msg),(0,c.Am)(r(n),{toastId:"recording-status",type:"info"}),x=setTimeout((function(){u(!1),(0,c.Am)(r("footer.notice.recording-did-not-stop"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(a.Fragment,{children:h&&b?(0,o.jsxs)("button",no({className:"".concat(i?"record":""," footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ").concat(n?"has-tooltip":""),onClick:function(){return u(!0),void(i?y():g())},disabled:l},{children:[(0,o.jsx)("span",no({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(i?"footer.icons.stop-recording":"footer.icons.start-recording")})),(0,o.jsx)("i",{className:"pnm-rec brand-color1 text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"})]})):null})};var co=function(){return co=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},co.apply(this,arguments)},lo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},uo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},fo=(0,nt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const po=function(){var e=Xe(),t=(0,Ke.$)().t,n=Je(fo),r=qe.getState().session,i=function(e,n){return lo(void 0,void 0,void 0,(function(){var o,a,i;return uo(this,(function(s){switch(s.label){case 0:return o=e?"lock":"unlock",a={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:"all",service:n,direction:o},[4,Ur("updateLockSettings",a)];case 1:return(i=s.sent()).status?(0,c.Am)(t("footer.notice.applied-settings"),{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(i.msg,{type:"error"}),[2]}}))}))},s=function(){e(fe(!1))},l=function(){var e,r,a,s,c,l,u,d;return(0,o.jsxs)(ot.rs.Group,{children:[(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-microphone")})),(0,o.jsx)(ot.rs,co({checked:null!==(e=null===n||void 0===n?void 0:n.lock_microphone)&&void 0!==e&&e,onChange:function(e){return i(e,"mic")},className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-webcams")})),(0,o.jsx)(ot.rs,co({checked:null!==(r=null===n||void 0===n?void 0:n.lock_webcam)&&void 0!==r&&r,onChange:function(e){return i(e,"webcam")},className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-screen-sharing")})),(0,o.jsx)(ot.rs,co({checked:null!==(a=null===n||void 0===n?void 0:n.lock_screen_sharing)&&void 0!==a&&a,onChange:function(e){return i(e,"screenShare")},className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-whiteboard")})),(0,o.jsx)(ot.rs,co({checked:null!==(s=null===n||void 0===n?void 0:n.lock_whiteboard)&&void 0!==s&&s,onChange:function(e){return i(e,"whiteboard")},className:"".concat((null===n||void 0===n?void 0:n.lock_whiteboard)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_whiteboard)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-shared-notepad")})),(0,o.jsx)(ot.rs,co({checked:null!==(c=null===n||void 0===n?void 0:n.lock_shared_notepad)&&void 0!==c&&c,onChange:function(e){return i(e,"sharedNotepad")},className:"".concat((null===n||void 0===n?void 0:n.lock_shared_notepad)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_shared_notepad)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat")})),(0,o.jsx)(ot.rs,co({checked:null!==(l=null===n||void 0===n?void 0:n.lock_chat)&&void 0!==l&&l,onChange:function(e){return i(e,"chat")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-send-message")})),(0,o.jsx)(ot.rs,co({checked:null!==(u=null===n||void 0===n?void 0:n.lock_chat_send_message)&&void 0!==u&&u,onChange:function(e){return i(e,"sendChatMsg")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",co({className:"flex items-center justify-between mb-4"},{children:[(0,o.jsx)(ot.rs.Label,co({className:"pr-4 w-full"},{children:t("footer.modal.lock-chat-file-share")})),(0,o.jsx)(ot.rs,co({checked:null!==(d=null===n||void 0===n?void 0:n.lock_chat_file_share)&&void 0!==d&&d,onChange:function(e){return i(e,"chatFile")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ot.uT,co({appear:!0,show:!0,as:a.Fragment},{children:(0,o.jsx)(ot.Vq,co({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:s},{children:(0,o.jsxs)("div",co({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(ot.uT.Child,co({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",co({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(ot.uT.Child,co({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",co({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",co({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,co({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("footer.modal.lock-settings-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",co({className:"mt-6"},{children:l()}))]}))}))]}))}))}))})})};var mo=n(48966),ho=function(){return ho=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ho.apply(this,arguments)},vo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},bo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},xo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},go=(0,nt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const yo=function(){var e=Xe(),t=(0,Ke.$)().t,n=Je(go),r=xo((0,a.useState)("youtube"),2),i=r[0],s=r[1],l=xo((0,a.useState)(!1),2),u=l[0],d=l[1],f=xo((0,a.useState)(""),2),p=f[0],m=f[1],h=xo((0,a.useState)(""),2),v=h[0],b=h[1],x={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,a.useEffect)((function(){d("other"===i)}),[i]);var g=function(){e(pe(!1))},y=function(n){return void 0===n&&(n=!1),vo(void 0,void 0,void 0,(function(){var r,o,a;return bo(this,(function(i){switch(i.label){case 0:return e(pe(!1)),n?(r={task:"stop-rtmp",sid:qe.getState().session.currentRoom.sid},[4,Ur("rtmp",r)]):[2];case 1:return o=i.sent(),a=t("footer.notice.rtmp-ending"),o.status||(a=o.msg),(0,c.Am)(t(a),{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ot.uT,ho({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ot.Vq,ho({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:y},{children:(0,o.jsxs)("div",ho({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(ot.uT.Child,ho({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ho({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(ot.uT.Child,ho({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ho({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ho({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,ho({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.rtmp-close-confirm")})),(0,o.jsx)("div",ho({className:"mt-2"},{children:(0,o.jsx)("p",ho({className:"text-sm text-gray-500"},{children:t("footer.modal.rtmp-close-msg")}))})),(0,o.jsxs)("div",ho({className:"mt-4"},{children:[(0,o.jsx)("button",ho({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return y(!0)}},{children:t("ok")})),(0,o.jsx)("button",ho({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return y(!1)}},{children:t("close")}))]}))]}))}))]}))}))}))}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ot.uT,ho({appear:!0,show:!n,as:a.Fragment},{children:(0,o.jsx)(ot.Vq,ho({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:g},{children:(0,o.jsxs)("div",ho({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(ot.uT.Child,ho({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ho({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(ot.uT.Child,ho({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ho({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ho({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return g()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,ho({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.rtmp-title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",ho({className:"mt-6"},{children:(0,o.jsxs)("form",ho({action:"#",method:"POST",onSubmit:function(n){return function(n){return vo(void 0,void 0,void 0,(function(){var r,o,a,s;return bo(this,(function(l){switch(l.label){case 0:return n.preventDefault(),"other"===i&&(0,mo.isEmpty)(p)||(0,mo.isEmpty)(v)?[2]:(r="",r="other"===i?p:x[i],(0,mo.isURL)(r,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:qe.getState().session.currentRoom.sid,rtmp_url:r+"/"+v},[4,Ur("rtmp",o)]):[2]);case 1:return a=l.sent(),s="footer.notice.rtmp-starting",a.status||(s=a.msg),(0,c.Am)(t(s),{toastId:"rtmp-status",type:"info"}),e(pe(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",ho({className:"s"},{children:(0,o.jsxs)("div",ho({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",ho({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ho({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-select-provider")})),(0,o.jsxs)("select",ho({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return s(e.currentTarget.value)},value:i},{children:[(0,o.jsx)("option",ho({value:"youtube"},{children:"YouTube"})),(0,o.jsx)("option",ho({value:"facebook"},{children:"Facebook"})),(0,o.jsx)("option",ho({value:"other"},{children:"Other"}))]}))]})),u?(0,o.jsxs)("div",ho({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ho({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-server-url")})),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:p,onChange:function(e){return m(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]})):null,(0,o.jsxs)("div",ho({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",ho({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-stream-key")})),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:v,onChange:function(e){return b(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"})]}))]}))})),(0,o.jsx)("div",ho({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",ho({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brandColor1 hover:bg-brandColor2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:bg-brandColor2"},{children:t("footer.modal.rtmp-start-broadcast")}))}))]}))}))]}))}))]}))}))}))})})};var wo=function(){return wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wo.apply(this,arguments)},So=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},_o=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ko=(0,nt.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),jo=(0,nt.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),To=(0,nt.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e})),No=(0,nt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e}));const Eo=function(){var e,t,n=qe.getState().session,r=Xe(),a=(0,Ke.$)().t,i=Je(ko),s=Je(No),l=Je(To),u=Je(jo),d=null===(t=null===(e=qe.getState().session.currentRoom)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.room_features;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",wo({className:"menu relative"},{children:(0,o.jsx)(ot.v2,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ot.v2.Button,wo({className:"footer-icon h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal brand-color1 text-[3px] lg:text-[5px]"})})),(0,o.jsx)(ot.uT,wo({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(ot.v2.Items,wo({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-56 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(null===d||void 0===d?void 0:d.allow_rtmp)?(0,o.jsx)("div",wo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",wo({className:"footer-podcast-button text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){r(pe(!0))}},{children:[u?(0,o.jsxs)("div",wo({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]})):null,(0,o.jsx)("i",{className:"pnm-broadcasting text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),a(u?"footer.icons.stop-rtmp-broadcasting":"footer.icons.start-rtmp-broadcasting")]}))})})):null,(0,o.jsx)("div",wo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",wo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){return So(void 0,void 0,void 0,(function(){var e,t;return _o(this,(function(r){switch(r.label){case 0:return e={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:"all",muted:!0},[4,Ur("muteUnmuteTrack",e)];case 1:return(t=r.sent()).status?(0,c.Am)(a("footer.notice.muted-all-microphone"),{toastId:"asked-status",type:"info"}):(0,c.Am)(a(t.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),a("footer.menus.mute-all-users")]}))})})),(null===d||void 0===d?void 0:d.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",wo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",wo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){return So(void 0,void 0,void 0,(function(){var e,t,n;return _o(this,(function(o){switch(o.label){case 0:return(e=null===(n=qe.getState().session.currentRoom.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.host)||s?[3,2]:[4,Ur("etherpad/create",{})];case 1:return(t=o.sent()).status?r(ce(!0)):(0,c.Am)(a(t.msg),{type:"error"}),[3,6];case 2:return!e||s?[3,4]:[4,Ur("etherpad/changeStatus",{room_id:qe.getState().session.currentRoom.room_id,is_active:!0})];case 3:return(t=o.sent()).status?r(ce(!0)):(0,c.Am)(a(t.msg),{type:"error"}),[3,6];case 4:return e&&s?[4,Ur("etherpad/changeStatus",{room_id:qe.getState().session.currentRoom.room_id,is_active:!1})]:[3,6];case 5:(t=o.sent()).status?r(ce(!1)):(0,c.Am)(a(t.msg),{type:"error"}),o.label=6;case 6:return[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-notepad text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),a(s?"footer.menus.disable-shared-notepad":"footer.menus.enable-shared-notepad")]}))})})):null,(0,o.jsx)("div",wo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",wo({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){r(fe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),a("footer.menus.room-lock-settings")]}))})}))]}))}))]})}})}))," ",i?(0,o.jsx)(po,{}):null," ",l?(0,o.jsx)(yo,{}):null]})};var Co=function(){return Co=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Co.apply(this,arguments)},Ao=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Ro=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Po=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Fo=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Oo=(0,nt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.is_active}),(function(e){return e})),Io=(0,nt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible}),(function(e){return e}));const Mo=function(){var e,t,n,r=(0,Ke.$)().t,i=Xe(),s="desktop"===qe.getState().session.userDeviceType,c=Po((0,a.useState)("brand-color1"),2),l=c[0],u=c[1],d=Je(Fo),f=Je(Oo),p=Je(Io),m=Po((0,a.useState)(!1),2),h=m[0],v=m[1],b=null===(t=null===(e=qe.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,x=null===(n=qe.getState().session.currenUser)||void 0===n?void 0:n.isRecorder;(0,a.useEffect)((function(){i(ce(!!f))}),[f,i]),(0,a.useEffect)((function(){d?(u("brand-color2"),qe.getState().bottomIconsActivity.isActiveWhiteboard&&i(le(!1))):u("brand-color1")}),[d,i]),(0,a.useEffect)((function(){f&&i(ce(!!p))}),[p]),(0,a.useEffect)((function(){var e,t,n;if(b&&!x){var r=qe.getState().session.currentRoom;if(h||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.shared_note_pad_features.visible)){h||v(!0);var o=function(e){return Ao(void 0,void 0,void 0,(function(){return Ro(this,(function(t){switch(t.label){case 0:return[4,Ur("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(d&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features.visible)){var a={room_id:r.room_id,visible_white_board:!1,visible_notepad:!0};setTimeout((function(){o(a)}),500)}else if(!d&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.shared_note_pad_features.visible)){var i={room_id:r.room_id,visible_notepad:!1};o(i)}}else v(!0)}}),[d]);return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("div",Co({className:"shared-notepad h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(s?"has-tooltip":""),onClick:function(){return Ao(void 0,void 0,void 0,(function(){return Ro(this,(function(e){return qe.getState().bottomIconsActivity.isActiveScreenshare||i(ce(!d)),[2]}))}))}},{children:[(0,o.jsx)("span",Co({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(d?"footer.icons.hide-shared-notepad":"footer.icons.show-shared-notepad")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-notepad ".concat(l," text-[12px] lg:text-[16px]")})})]})):null})};var Do=function(){return Do=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Do.apply(this,arguments)},Uo=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Lo=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Bo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Wo=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e})),Vo=(0,nt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible}),(function(e){return e}));const Go=function(){var e,t,n,r,i=(0,Ke.$)().t,s=Xe(),c="desktop"===qe.getState().session.userDeviceType,l=Bo((0,a.useState)("brand-color1"),2),u=l[0],d=l[1],f=Bo((0,a.useState)(!1),2),p=f[0],m=f[1],h=Je(Wo),v=Je(Vo),b=null===(e=qe.getState().session.currentRoom.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.allowed_whiteboard,x=null===(n=null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,g=null===(r=qe.getState().session.currenUser)||void 0===r?void 0:r.isRecorder;(0,a.useEffect)((function(){h?(d("brand-color2"),qe.getState().bottomIconsActivity.isActiveSharedNotePad&&s(ce(!1))):d("brand-color1")}),[s,h]),(0,a.useEffect)((function(){b&&(v?s(le(!0)):v||s(le(!1)))}),[v]),(0,a.useEffect)((function(){var e,t,n;if(x&&!g){var r=qe.getState().session.currentRoom;if(p||!(null===(e=r.metadata)||void 0===e?void 0:e.room_features.whiteboard_features.visible)){p||m(!0);var o=function(e){return Uo(void 0,void 0,void 0,(function(){return Lo(this,(function(t){switch(t.label){case 0:return[4,Ur("changeVisibility",e)];case 1:return t.sent(),[2]}}))}))};if(h&&!(null===(t=r.metadata)||void 0===t?void 0:t.room_features.whiteboard_features.visible)){var a={room_id:r.room_id,visible_white_board:!0,visible_notepad:!1};setTimeout((function(){o(a)}),500)}else if(!h&&(null===(n=r.metadata)||void 0===n?void 0:n.room_features.whiteboard_features.visible)){var i={room_id:r.room_id,visible_white_board:!1};o(i)}}else m(!0)}}),[h]);return(0,o.jsx)(o.Fragment,{children:b?(0,o.jsxs)("div",Do({className:"whiteboard h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(c?"has-tooltip":""),onClick:function(){return Uo(void 0,void 0,void 0,(function(){return Lo(this,(function(e){return qe.getState().bottomIconsActivity.isActiveScreenshare||s(le(!h)),[2]}))}))}},{children:[(0,o.jsx)("span",Do({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:i(h?"footer.icons.hide-whiteboard":"footer.icons.show-whiteboard")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"pnm-whiteboard ".concat(u," text-[12px] lg:text-[16px]")})})]})):null})};var Ho=function(){return Ho=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ho.apply(this,arguments)};const zo=a.memo((function(e){var t,n,r=e.currentRoom,a=e.isRecorder,i=null===(n=null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;return(0,o.jsx)("footer",Ho({id:"main-footer",className:"h-[55px] lg:h-[60px] px-4 shadow-footer flex items-center justify-between",style:{display:a?"none":""}},{children:(0,o.jsxs)("div",Ho({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",Ho({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)(Qn,{currentRoom:r}),(0,o.jsx)(_r,{currentRoom:r})]})),(0,o.jsxs)("div",Ho({className:"footer-middle flex items-center"},{children:[(0,o.jsx)(Pr,{}),(0,o.jsx)(Er,{}),(0,o.jsx)(to,{currentRoom:r}),(0,o.jsx)(Xr,{currentRoom:r}),(0,o.jsx)(Go,{}),(0,o.jsx)(Mo,{}),(0,o.jsx)(so,{}),i?(0,o.jsx)(Eo,{}):null]})),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"})]}))}))}));var qo=function(){return qo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qo.apply(this,arguments)};const Xo=a.memo((function(e){var t,n,r=e.onOpenAlert,a=null===(n=null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,i=Xe(),s=(0,Ke.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(ot.v2.Items,qo({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){i(Pe(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),s("header.menus.settings")]}))})})),(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){i(Me(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-keyboard text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),s("header.menus.keyboard-shortcuts")]}))})})),(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",qo({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){r("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"}),s("header.menus.logout")]}))})})),a?(0,o.jsx)("div",qo({className:"py-1",role:"none"},{children:(0,o.jsx)(ot.v2.Item,{children:(0,o.jsxs)("button",qo({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){r("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "}),s("header.menus.end")]}))})})):null]}))})}));var Jo=function(){return Jo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jo.apply(this,arguments)},Yo=(0,nt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),$o=(0,nt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Ko=function(){var e=Xe(),t=(0,Ke.$)().t,n=Je(Yo),r=Je($o),a=function(){e(Fe(!n))},i=function(){e(Oe(!r))};return(0,o.jsx)("div",Jo({className:"mt-2"},{children:(0,o.jsxs)(ot.rs.Group,{children:[(0,o.jsxs)("div",Jo({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(ot.rs.Label,Jo({className:"pr-4 w-full"},{children:t("header.room-settings.show-webcams")})),(0,o.jsx)(ot.rs,Jo({checked:n,onChange:a,className:"".concat(n?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]})),(0,o.jsxs)("div",Jo({className:"flex items-center justify-between"},{children:[(0,o.jsx)(ot.rs.Label,Jo({className:"pr-4 w-full"},{children:t("header.room-settings.show-screen-share")})),(0,o.jsx)(ot.rs,Jo({checked:r,onChange:i,className:"".concat(r?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(r?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))]})}))};var Qo=function(){return Qo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qo.apply(this,arguments)},Zo=(0,nt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const ea=function(){var e=Xe(),t=(0,Ke.$)().t,n=Je(Zo),r=function(){e(Ie(!n))};return(0,o.jsx)("div",Qo({className:"mt-2"},{children:(0,o.jsx)(ot.rs.Group,{children:(0,o.jsxs)("div",Qo({className:"flex items-center justify-between mb-2"},{children:[(0,o.jsx)(ot.rs.Label,Qo({className:"pr-4 w-full"},{children:t("header.room-settings.allow-audio-notification")})),(0,o.jsx)(ot.rs,Qo({checked:n,onChange:r,className:"".concat(n?"bg-brandColor1":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")})}))]}))})}))};const ta=[{code:"en",text:"English"},{code:"es-ES",text:"Espa\xf1ol"},{code:"fr-FR",text:"Fran\xe7ais"},{code:"pt-PT",text:"Portugu\xeas"},{code:"zh-CN",text:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-HK",text:"\u7e41\u9ad4\u4e2d\u6587"}];var na=function(){return na=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},na.apply(this,arguments)};const ra=function(){var e=(0,Ke.$)(),t=e.t,n=e.i18n;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",na({className:"s"},{children:(0,o.jsx)("div",na({className:"grid"},{children:(0,o.jsxs)("div",na({className:"flex items-center justify-start"},{children:[(0,o.jsx)("label",na({htmlFor:"language",className:"w-2/5 block text-sm font-medium text-gray-700 mr-5"},{children:t("header.room-settings.language")})),(0,o.jsx)("select",na({id:"language",name:"language",value:n.languages[0],onChange:function(e){return n.changeLanguage(e.target.value)},className:"mt-1 block w-3/5 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:ta.map((function(e){var t=e.code,n=e.text;return(0,o.jsx)("option",na({value:t},{children:n}),t)}))}))]}))}))}))})};var oa=function(){return oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oa.apply(this,arguments)},aa=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ia=(0,nt.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const sa=function(){var e=Xe(),t=(0,Ke.$)().t,n=Je(ia),r=aa((0,a.useState)({"header.room-settings.application":[{id:1,elm:(0,o.jsx)(ra,{})}],"header.room-settings.data-savings":[{id:1,elm:(0,o.jsx)(Ko,{})}],"header.room-settings.notifications":[{id:1,elm:(0,o.jsx)(ea,{})}]}),1)[0],i=function(){e(Pe(!1))};var s=function(){return(0,o.jsx)("div",oa({className:"max-w-full"},{children:(0,o.jsxs)(ot.OK.Group,oa({vertical:!0},{children:[(0,o.jsx)(ot.OK.List,oa({className:"flex p-1 space-x-1 bg-brandColor1 rounded-xl"},{children:Object.keys(r).map((function(e){return(0,o.jsx)(ot.OK,oa({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-xs sm:text-sm leading-5 font-medium text-brandColor2 rounded-lg outline-none","ring-white ring-opacity-60",e.selected?"bg-white shadow text-brandColor1":"hover:bg-white/[0.12] hover:text-white")}},{children:t(e)}),e)}))})),(0,o.jsx)(ot.OK.Panels,oa({className:"mt-2"},{children:Object.values(r).map((function(e,t){return(0,o.jsx)(ot.OK.Panel,oa({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))})}),t)}))}))]}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ot.uT,oa({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ot.Vq,oa({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:i},{children:(0,o.jsxs)("div",oa({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(ot.uT.Child,oa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",oa({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(ot.uT.Child,oa({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",oa({className:"inline-block w-full h-96 max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",oa({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return i()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,oa({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.room-settings.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",oa({className:"mt-2"},{children:s()}))]}))}))]}))}))}))}):null})};var ca=function(){return ca=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ca.apply(this,arguments)},la=(0,nt.P1)((function(e){return e.roomSettings.isShowKeyboardShortcuts}),(function(e){return e}));const ua=function(){var e=Xe(),t=(0,Ke.$)().t,n=Je(la),r=function(){e(Me(!1))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ot.uT,ca({appear:!0,show:n,as:a.Fragment},{children:(0,o.jsx)(ot.Vq,ca({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:r},{children:(0,o.jsxs)("div",ca({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(ot.uT.Child,ca({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",ca({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(ot.uT.Child,ca({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",ca({className:"inline-block w-full max-w-xl py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",ca({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return r()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,ca({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.keyboard-shortcuts.title")})),(0,o.jsx)("hr",{}),(0,o.jsx)("div",ca({className:"mt-2"},{children:(0,o.jsxs)("table",ca({className:"border-collapse border border-slate-500 w-full"},{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.key-comb")})})),(0,o.jsx)("th",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:(0,o.jsx)("strong",{children:t("header.keyboard-shortcuts.actions")})}))]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + m"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base "},{children:t("header.keyboard-shortcuts.mute-unmute")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + a"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + o"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-audio")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + v"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.start-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + x"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.leave-webcam")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + u"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-user-list")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + c"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-chat")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + l"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-lock-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + s"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-settings")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-b border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + w"})),(0,o.jsx)("td",ca({className:"pl-2 border-b border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-whiteboard")}))]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",ca({className:"pl-2 border-r border-slate-700 text-xs sm:text-sm md:text-base"},{children:"ctrl + alt/option + r"})),(0,o.jsx)("td",ca({className:"pl-2 border-slate-700 text-xs sm:text-sm md:text-base"},{children:t("header.keyboard-shortcuts.show-hide-hand")}))]})]})]}))}))]}))}))]}))}))}))}):null})};var da=function(){return da=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},da.apply(this,arguments)},fa=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},pa=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ma=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ha=(0,nt.P1)((function(e){return e.session.currentRoom.metadata}),(function(e){return e}));const va=a.memo((function(e){var t,n,r=e.currentRoom,i=Je(ha),s=(0,Ke.$)().t,l=ma((0,a.useState)(""),2),u=l[0],d=l[1],f=ma((0,a.useState)(!1),2),p=f[0],m=f[1],h=ma((0,a.useState)(""),2),v=h[0],b=h[1],x=ma((0,a.useState)(""),2),g=x[0],y=x[1],w=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets",S=null!==(n=window.CUSTOM_LOGO)&&void 0!==n?n:"".concat(w,"/imgs/main-logo.png");(0,a.useEffect)((function(){i&&d(i.room_title)}),[i]);var _=function(e){return void 0===e&&(e=!1),fa(void 0,void 0,void 0,(function(){var t,n,o;return pa(this,(function(a){switch(a.label){case 0:return m(!1),e?"logout"!==g?[3,1]:(r.disconnect(),[3,3]):[2];case 1:return"end Room"!==g?[3,3]:(t=qe.getState().session,n={room_id:t.currentRoom.room_id},[4,Ur("endRoom",n)]);case 2:(o=a.sent()).status||(0,c.Am)(o.msg,{type:"error"}),a.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",da({id:"main-header",className:"relative z-[99999] h-[50px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("div",{className:"header-before-start absolute top-0 left-[-35px] w-[300px] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(w,'/imgs/header-before2.png")')}}),(0,o.jsx)("div",da({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("div",{className:"".concat((window.CUSTOM_LOGO,"h-[45px]")," header-logo h-full bg-contain bg-no-repeat"),style:{backgroundImage:'url("'.concat(S,'")')}})})),(0,o.jsx)("div",da({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",da({className:"header-title text-base text-black leading-[1] text-center"},{children:u}))})),(0,o.jsx)("div",da({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:(0,o.jsx)(ot.v2,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ot.v2.Button,da({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",da({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"})}))})),(0,o.jsx)(ot.uT,da({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Xo,{onOpenAlert:function(e){return function(e){y(e),"logout"===e?b(s("header.menus.alert.logout")):"end Room"===e&&b(s("header.menus.alert.end")),m(!0)}(e)}})}))]})}})})),(0,o.jsx)("div",{className:"header-before-end absolute top-0 right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none bg-cover bg-center h-full",style:{backgroundImage:'url("'.concat(w,'/imgs/header-before2.png")')}}),p?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ot.uT,da({appear:!0,show:p,as:a.Fragment},{children:(0,o.jsx)(ot.Vq,da({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:_},{children:(0,o.jsxs)("div",da({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(ot.uT.Child,da({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"})})),(0,o.jsx)("span",da({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"})),(0,o.jsx)(ot.uT.Child,da({as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",da({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",da({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return _()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,da({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:s("header.menus.alert.confirm")})),(0,o.jsx)("div",da({className:"mt-2"},{children:(0,o.jsx)("p",da({className:"text-sm text-gray-500"},{children:v}))})),(0,o.jsxs)("div",da({className:"mt-4"},{children:[(0,o.jsx)("button",da({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return _(!0)}},{children:s("ok")})),(0,o.jsx)("button",da({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium bg-brandColor1 hover:bg-brandColor2 text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return _(!1)}},{children:s("close")}))]}))]}))}))]}))}))}))}):null]})),(0,o.jsx)(sa,{}),(0,o.jsx)(ua,{})]})}));var ba=function(){return ba=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ba.apply(this,arguments)};const xa=function(e){var t=e.participant;return(0,o.jsx)("div",ba({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-brandColor1 flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name}):(0,o.jsx)(a.Fragment,{children:t.name.slice(0,2).toUpperCase()})}))};var ga=function(){return ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ga.apply(this,arguments)};const ya=function(e){var t=e.name,n=e.isCurrentUser;return(0,o.jsxs)("p",ga({className:"text-[11px] xl:text-[13px] brand-color1"},{children:[t," ",n?" (me)":null]}))};var wa=function(){return wa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wa.apply(this,arguments)};const Sa=function(e){var t=e.userId,n=Je((function(e){return T.selectById(e,t)}));return(0,o.jsx)(a.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",wa({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[8px]"})})):null})};var _a=function(){return _a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_a.apply(this,arguments)};const ka=function(e){var t=e.userId,n=Je((function(e){return T.selectById(e,t)}));return(0,o.jsx)(a.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?n.isMuted?(0,o.jsx)("div",_a({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 opacity-50 text-[8px]"})})):(0,o.jsx)("div",_a({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 opacity-50 text-[8px]"})})):null})};var ja=function(){return ja=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ja.apply(this,arguments)};const Ta=function(e){var t=e.userId,n=Je((function(e){return T.selectById(e,t)}));return(0,o.jsx)(a.Fragment,{children:(null===n||void 0===n?void 0:n.videoTracks)?(0,o.jsx)("div",ja({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 opacity-50 text-[8px]"})})):null})};var Na,Ea,Ca,Aa=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Ra=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Pa=!1,Fa=0,Oa=!1,Ia=function(){var e=za();(Ea=new WebSocket(e)).onopen=function(){Pa=!0,Ha(),qe.dispatch(V(!0)),Ca&&(clearInterval(Ca),Ca=0,Fa=0)},Ea.onclose=function(){Pa=!1,qe.dispatch(V(!1)),Ca||Oa||(Ca=setInterval((function(){Fa>10&&(clearInterval(Ca),Fa=0),Ea=void 0,Ia(),Fa++}),2e3))},Ea.onerror=function(){console.log("Error in websocket")},Ea.onmessage=function(e){Ma(e)}},Ma=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(n){return void console.log(e.data)}"USER"===t.type?Da(t.body,t.message_id):"SYSTEM"===t.type?Ua(t):"WHITEBOARD"===t.type&&Ga(t.body)}},Da=function(e,t){"CHAT"===e.type&&(e.message_id||(e.message_id=t),qe.dispatch(_e(e)),e.isPrivate||qe.getState().bottomIconsActivity.isActiveChatPanel||qe.dispatch(ve()))},Ua=function(e){switch(e.body.type){case Br.SEND_CHAT_MSGS:La(e);break;case Br.INIT_WHITEBOARD:Ba(e);break;case Br.RENEW_TOKEN:Wa(e);break;case Br.INFO:case Br.ALERT:Va(e)}},La=function(e){we.selectAll(qe.getState()).filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return Aa(void 0,void 0,void 0,(function(){var n,r;return Ra(this,(function(o){return n=t,r={type:Lr.USER,body:n,to:e.body.from.sid,room_sid:Na.currentRoom.sid,message_id:""},Xa(JSON.stringify(r)),[2]}))}))}))},Ba=function(e){qe.getState().whiteboard.requestedWhiteboardData.requested||qe.dispatch(He({requested:!0,sendTo:e.body.from.sid}))},Wa=function(e){qe.dispatch(O(e.body.msg))},Va=function(e){switch(e.body.type){case Br.INFO:(0,c.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case Br.ALERT:(0,c.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},Ga=function(e){"SCENE_UPDATE"===e.type?qe.dispatch(Be(e.msg)):"POINTER_UPDATE"===e.type?qe.dispatch(We(e.msg)):"ADD_WHITEBOARD_FILE"===e.type&&qe.dispatch(Ge(e.msg))},Ha=function(){var e,t,n,r,o,a,i,s,c=T.selectAll(qe.getState()).filter((function(e){var t;return e.sid!==(null===(t=Na.currenUser)||void 0===t?void 0:t.sid)}));if(c.length){c.sort((function(e,t){return e.joinedAt-t.joinedAt}));var l=c[0],u={type:Lr.SYSTEM,room_sid:Na.currentRoom.sid,message_id:"",to:l.sid,body:{type:Br.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=Na.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=Na.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:""}};Xa(JSON.stringify(u));var d={type:Lr.SYSTEM,room_sid:Na.currentRoom.sid,message_id:"",to:l.sid,body:{type:Br.INIT_WHITEBOARD,from:{sid:null!==(a=null===(o=Na.currenUser)||void 0===o?void 0:o.sid)&&void 0!==a?a:"",userId:null!==(s=null===(i=Na.currenUser)||void 0===i?void 0:i.userId)&&void 0!==s?s:""},msg:""}};Xa(JSON.stringify(d))}},za=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),n="ws://";"https:"===t.protocol&&(n="wss://"),e=n+t.host,"/"!==t.pathname&&(e+=t.pathname);var r=Na.token,o=Na.currenUser,a=Na.currentRoom;return e=e+"/ws?token="+r+"&roomSid="+a.sid+"&userSid="+(null===o||void 0===o?void 0:o.sid)+"&roomId="+a.room_id+"&userId="+(null===o||void 0===o?void 0:o.userId)},qa=function(){return Pa},Xa=function(e){Pa&&(null===Ea||void 0===Ea||Ea.send(e))},Ja=function(){return Ja=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ja.apply(this,arguments)},Ya=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},$a=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ka=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Qa=function(e){var t,n=e.userId,r=Je((function(e){return T.selectById(e,n)})),i=qe.getState().session,s=Ka((0,a.useState)("Ask to share Microphone"),2),l=s[0],u=s[1],d=Ka((0,a.useState)(""),2),f=d[0],p=d[1],m=(0,Ke.$)().t;(0,a.useEffect)((function(){0===(null===r||void 0===r?void 0:r.audioTracks)?(u(m("left-panel.menus.items.ask-to-share-microphone")),p("left-panel.menus.items.share-microphone")):(null===r||void 0===r?void 0:r.isMuted)?(u(m("left-panel.menus.items.ask-to-unmute-mic")),p("left-panel.menus.items.unmute-mic")):(null===r||void 0===r?void 0:r.audioTracks)&&(u(m("left-panel.menus.items.mute-mic")),p("mute"))}),[m,null===r||void 0===r?void 0:r.isMuted,null===r||void 0===r?void 0:r.audioTracks]);var h=function(){return Ya(void 0,void 0,void 0,(function(){var e,t,n;return $a(this,(function(o){switch(o.label){case 0:return e=qe.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===r||void 0===r?void 0:r.userId,muted:!0},[4,Ur("muteUnmuteTrack",t)];case 1:return(n=o.sent()).status?(0,c.Am)(m("left-panel.menus.notice.you-have-muted-to",{name:null===r||void 0===r?void 0:r.name}),{toastId:"asked-status",type:"info"}):(0,c.Am)(m(n.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(a.Fragment,{children:(null===(t=i.currenUser)||void 0===t?void 0:t.userId)!==(null===r||void 0===r?void 0:r.userId)?(0,o.jsx)("div",Ja({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,Ja({onClick:function(){return function(){var e,t,n,o,a;if("mute"!==f){var s={type:Lr.SYSTEM,room_sid:i.currentRoom.sid,message_id:"",to:null===r||void 0===r?void 0:r.sid,body:{type:Br.INFO,from:{sid:null!==(t=null===(e=i.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(n=i.currenUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:m("left-panel.menus.notice.asked-you-to",{name:null===(a=i.currenUser)||void 0===a?void 0:a.name})+m(f)}};Xa(JSON.stringify(s)),(0,c.Am)(m("left-panel.menus.notice.you-have-asked",{name:null===r||void 0===r?void 0:r.name})+m(f),{toastId:"asked-status",type:"info"})}else h()}()}},{children:function(){return(0,o.jsx)("button",Ja({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:l}))}}))})):null})};var Za=function(){return Za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Za.apply(this,arguments)},ei=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ti=function(e){var t,n,r=e.userId,i=(0,Ke.$)().t,s=Je((function(e){return T.selectById(e,r)})),l=null===(t=qe.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,u=qe.getState().session,d=ei((0,a.useState)("Ask to share Webcam"),2),f=d[0],p=d[1],m=ei((0,a.useState)(""),2),h=m[0],v=m[1];(0,a.useEffect)((function(){0===(null===s||void 0===s?void 0:s.videoTracks)?(p(i("left-panel.menus.items.ask-to-share-webcam")),v("left-panel.menus.items.share-webcam")):(p(i("left-panel.menus.items.ask-to-stop-webcam")),v("left-panel.menus.items.stop-webcam"))}),[i,null===s||void 0===s?void 0:s.videoTracks]);return(0,o.jsx)(a.Fragment,{children:(null===(n=u.currenUser)||void 0===n?void 0:n.userId)!==(null===s||void 0===s?void 0:s.userId)&&(null===l||void 0===l?void 0:l.allow_webcams)&&!l.admin_only_webcams?(0,o.jsx)("div",Za({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,Za({onClick:function(){return function(){var e,t,n,r,o,a={type:Lr.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",to:null===s||void 0===s?void 0:s.sid,body:{type:Br.INFO,from:{sid:null!==(t=null===(e=u.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=u.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:i("left-panel.menus.notice.asked-you-to",{name:null===(o=u.currenUser)||void 0===o?void 0:o.name})+i(h)}};Xa(JSON.stringify(a)),(0,c.Am)(i("left-panel.menus.notice.you-have-asked",{name:null===s||void 0===s?void 0:s.name})+i(h),{toastId:"asked-status",type:"info"})}()}},{children:function(){return(0,o.jsx)("button",Za({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:f}))}}))})):null})};var ni=function(){return ni=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ni.apply(this,arguments)},ri=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},oi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const ai=function(e){var t=e.userId,n=Je((function(e){return T.selectById(e,t)})),r=Xe(),i=(0,Ke.$)().t;return(0,o.jsx)(a.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",ni({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ni({onClick:function(){return ri(void 0,void 0,void 0,(function(){var e,t,o;return oi(this,(function(a){switch(a.label){case 0:return e=qe.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:Br.OTHER_USER_LOWER_HAND,msg:null===n||void 0===n?void 0:n.userId},[4,Ur("dataMessage",t)];case 1:return(o=a.sent()).status?r(ie(!1)):(0,c.Am)(i(o.msg),{type:"error"}),[2]}}))}))}},{children:function(){return(0,o.jsx)("button",ni({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:i("footer.icons.lower-hand")}))}}))})):null})};var ii=function(){return ii=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ii.apply(this,arguments)},si=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},ci=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const li=function(e){var t,n=e.userId,r=null===(t=qe.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,i=(0,Ke.$)().t,s=Je((function(e){return T.selectById(e,n)})),l=function(e){return si(void 0,void 0,void 0,(function(){var t,n,r,o,a,l;return ci(this,(function(u){switch(u.label){case 0:switch(t=s.metadata,n=qe.getState().session,r=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"whiteboard":o=(null===t||void 0===t?void 0:t.lock_settings.lock_whiteboard)?"unlock":"lock";break;case"sharedNotepad":o=(null===t||void 0===t?void 0:t.lock_settings.lock_shared_notepad)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return a={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:null===s||void 0===s?void 0:s.userId,service:r,direction:o},[4,Ur("updateLockSettings",a)];case 1:return(l=u.sent()).status?(0,c.Am)(i("left-panel.menus.notice.applied-new-setting"),{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(i(l.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("mic")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_microphone)?i("left-panel.menus.items.unlock-microphone"):i("left-panel.menus.items.lock-microphone")}))}}))})),(null===r||void 0===r?void 0:r.allow_webcams)&&!(null===r||void 0===r?void 0:r.admin_only_webcams)?(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("webcam")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_webcam)?i("left-panel.menus.items.unlock-webcam"):i("left-panel.menus.items.lock-webcam")}))}}))})):null,(null===r||void 0===r?void 0:r.allow_screen_share)?(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("screenShare")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_screen_sharing)?i("left-panel.menus.items.unlock-screen-sharing"):i("left-panel.menus.items.lock-screen-sharing")}))}}))})):null,(null===r||void 0===r?void 0:r.whiteboard_features.allowed_whiteboard)?(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("whiteboard")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_whiteboard)?i("left-panel.menus.items.unlock-whiteboard"):i("left-panel.menus.items.lock-whiteboard")}))}}))})):null,(null===r||void 0===r?void 0:r.shared_note_pad_features.allowed_shared_note_pad)?(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("sharedNotepad")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_shared_notepad)?i("left-panel.menus.items.unlock-shared-notepad"):i("left-panel.menus.items.lock-shared-notepad")}))}}))})):null,(null===r||void 0===r?void 0:r.chat_features.allow_chat)?(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("chat")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat)?i("left-panel.menus.items.unlock-chat"):i("left-panel.menus.items.lock-chat")}))}}))})),(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("sendChatMsg")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat_send_message)?i("left-panel.menus.items.unlock-send-chat-message"):i("left-panel.menus.items.lock-send-chat-message")}))}}))})),r.chat_features.allow_file_upload?(0,o.jsx)("div",ii({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ii({onClick:function(){return l("chatFile")}},{children:function(){return(0,o.jsx)("button",ii({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat_file_share)?i("left-panel.menus.items.unlock-send-file"):i("left-panel.menus.items.lock-send-file")}))}}))})):null]}):null]})})};var ui=function(){return ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ui.apply(this,arguments)};const di=function(e){var t=e.userId,n=e.onOpenAlert,r=(0,Ke.$)().t;return(0,o.jsx)(a.Fragment,{children:(0,o.jsx)(a.Fragment,{children:(0,o.jsx)("div",ui({className:"",role:"none"},{children:(0,o.jsx)(ot.v2.Item,ui({onClick:function(){n(t)}},{children:function(){return(0,o.jsx)("button",ui({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white"},{children:r("left-panel.menus.items.remove-participant")}))}}))}))})})};var fi=function(){return fi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fi.apply(this,arguments)},pi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},mi=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},hi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const vi=function(e){var t=e.userId,n=e.name,r=hi((0,a.useState)(!1),2),i=r[0],s=r[1],l=(0,Ke.$)().t,u=function(e){e===t&&s(!0)},d=function(e){return void 0===e&&(e=!1),pi(void 0,void 0,void 0,(function(){var n,r,o;return mi(this,(function(a){switch(a.label){case 0:return s(!1),e?(n=qe.getState().session,r={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:t},[4,Ur("removeParticipant",r)]):[2];case 1:return(o=a.sent()).status?(0,c.Am)(l("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,c.Am)(l(o.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(ot.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ot.v2.Button,fi({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small brand-color1 opacity-50"})})),(0,o.jsx)(ot.uT,fi({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(ot.v2.Items,fi({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)(Qa,{userId:t}),(0,o.jsx)(ti,{userId:t}),(0,o.jsx)(ai,{userId:t}),(0,o.jsx)(li,{userId:t}),(0,o.jsx)(di,{onOpenAlert:u,userId:t})]}))}))]})}}),(0,o.jsx)(ot.uT,fi({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(ot.Vq,fi({open:i,onClose:function(){return d()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",fi({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(ot.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),(0,o.jsxs)("div",fi({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",fi({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return d()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)(ot.Vq.Title,fi({className:"mb-4 md:mb-6 text-sm"},{children:l("left-panel.menus.notice.confirm",{name:n})})),(0,o.jsx)("button",fi({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return d(!0)}},{children:l("left-panel.menus.notice.remove")})),(0,o.jsx)("button",fi({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium bg-brandColor1 hover:bg-brandColor2 text-white border border-transparent rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return d(!1)}},{children:l("cancel")}))]}))]}))}))}))]})})};var bi=function(){return bi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bi.apply(this,arguments)};const xi=function(e){var t,n=e.participant,r=qe.getState().session.currenUser;return(0,o.jsx)("li",bi({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",bi({className:"flex items-center justify-between"},{children:[(0,o.jsxs)("div",bi({className:"left flex items-center "},{children:[(0,o.jsx)(xa,{participant:n}),(0,o.jsx)(ya,{name:n.name,isCurrentUser:(null===r||void 0===r?void 0:r.userId)===n.userId})]})),(0,o.jsxs)("div",bi({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(Sa,{userId:n.userId}),(0,o.jsx)(ka,{userId:n.userId}),(0,o.jsx)(Ta,{userId:n.userId}),(null===(t=null===r||void 0===r?void 0:r.metadata)||void 0===t?void 0:t.is_admin)&&r.userId!==n.userId?(0,o.jsx)(vi,{userId:n.userId,name:n.name}):null]}))]}))}))};var gi=function(){return gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gi.apply(this,arguments)};const yi=a.memo((function(){var e=Je(T.selectAll),t=(0,Ke.$)().t;return(0,o.jsx)("div",gi({id:"main-left-panel",className:"participants-wrapper scrollBar relative z-10 left-0 top-0 h-full w-[200px] xl:w-[270px] px-2 xl:px-4 pt-2 xl:pt-5 overflow-auto multi-gradient"},{children:(0,o.jsxs)("div",gi({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",gi({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsx)("p",gi({className:"text-sm text-black"},{children:t("left-panel.participants",{total:e.length})}))})),(0,o.jsx)("div",gi({className:"all-participants-wrap"},{children:function(){var t,n,r,a,i,s,c,l=qe.getState().session,u=null===(t=l.currenUser)||void 0===t?void 0:t.userId,d=null!==(a=null===(r=null===(n=l.currentRoom.metadata)||void 0===n?void 0:n.room_features)||void 0===r?void 0:r.allow_view_other_users_list)&&void 0!==a&&a,f=null!==(c=null===(s=null===(i=l.currenUser)||void 0===i?void 0:i.metadata)||void 0===s?void 0:s.is_admin)&&void 0!==c&&c;return e.map((function(e){if(f||d||e.metadata.is_admin||u===e.userId)return(0,o.jsx)(xi,{participant:e},e.sid)}))}()}))]}))}))}));var wi=function(){return wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wi.apply(this,arguments)};const Si=function(e){var t=e.participant,n=e.from;return(0,o.jsx)("div",wi({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-brandColor1"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name});var r=n.name;return(null===t||void 0===t?void 0:t.name)&&(r=null===t||void 0===t?void 0:t.name),(0,o.jsx)(a.Fragment,{children:null===r||void 0===r?void 0:r.slice(0,2).toUpperCase()})}()}))};var _i=function(){return _i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_i.apply(this,arguments)};const ki=a.memo((function(e){var t=e.body,n=e.currentUser,r=Je((function(e){return T.selectById(e,t.from.userId)})),i=(0,Ke.$)().t;return(0,o.jsx)("div",_i({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",_i({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",_i({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-brandColor1 text-white",dangerouslySetInnerHTML:{__html:t.msg}})})):(null===n||void 0===n?void 0:n.userId)===t.from.userId?(0,o.jsxs)("div",_i({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",_i({className:"name pl-2 text-sm pb-1 brand-color1"},{children:i("right-panel.you")})),(0,o.jsx)("p",{className:"message-content max-w-fit shadow-footer text-xs bg-brandColor2 text-white",dangerouslySetInnerHTML:{__html:t.msg}})]})):(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(Si,{participant:r,from:t.from}),(0,o.jsxs)("div",_i({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",_i({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===r||void 0===r?void 0:r.name," ",(0,o.jsx)("span",_i({style:{fontSize:"10px"}},{children:r?null:" (offline)"}))]})),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}})]}))]})}))}))}));var ji=function(){return ji=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ji.apply(this,arguments)},Ti=(0,nt.P1)((function(e){return e.session.currenUser}),(function(e){return e}));const Ni=function(){var e=(0,a.useRef)(null),t=Je(we.selectAll),n=Je(Ti);(0,a.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}));return(0,o.jsx)("div",ji({className:"pb-3",ref:e},{children:t.map((function(e){var t=e;return(0,o.jsx)(ki,{body:t,currentUser:n},t.message_id)}))}))};var Ei=n(91036),Ci=n.n(Ei),Ai=n(65342),Ri=n.n(Ai),Pi=function(){return Pi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pi.apply(this,arguments)},Fi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Oi=function(e){var t,n,r,i=e.isChatServiceReady,s=e.lockSendFile,l=e.currentRoom,u=(0,a.useRef)(null),d=a.useRef(null),f=Fi((0,a.useState)(!1),2),p=f[0],m=f[1],h=(0,Ke.$)().t,v=null===(t=qe.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.chat_features,b=null!==(r=null===(n=null===v||void 0===v?void 0:v.allowed_file_types)||void 0===n?void 0:n.map((function(e){return"."+e})).join(","))&&void 0!==r?r:"*",x=function(e,t){var n,r,o="",a=new(Ri())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(n=e.currenUser)||void 0===n?void 0:n.userId,resumable:!0},headers:{Authorization:e.token},fileType:null!==(r=null===v||void 0===v?void 0:v.allowed_file_types)&&void 0!==r?r:[],fileTypeErrorCallback:function(e){(0,c.Am)(h("notifications.file-type-not-allow",{filetype:e.type}),{type:c.Am.TYPE.ERROR})},maxFileSize:(null===v||void 0===v?void 0:v.max_file_size)?1e6*(null===v||void 0===v?void 0:v.max_file_size):void 0,maxFileSizeErrorCallback:function(){(0,c.Am)(h("notifications.max-file-size-exceeds"),{type:c.Am.TYPE.ERROR})}});a.on("fileAdded",(function(e){o=e.fileName,a.isUploading()||(m(!0),a.upload())})),a.on("fileSuccess",(function(e,t){var n=JSON.parse(t);m(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=d.current)&&void 0!==e?e:"")}),300),n.status&&(g(n.filePath,n.fileName),(0,c.Am)(h("right-panel.file-upload-success"),{type:c.Am.TYPE.SUCCESS}))})),a.on("fileError",(function(e,t){m(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=d.current)&&void 0!==e?e:"")}),300);try{var n=JSON.parse(t);(0,c.Am)(h(n.msg),{type:c.Am.TYPE.ERROR})}catch(r){(0,c.Am)(h("right-panel.file-upload-default-error"),{type:c.Am.TYPE.ERROR})}})),a.on("uploadStart",(function(){d.current=(0,c.Am)(h("right-panel.uploading-file",{fileName:o}),{closeButton:!1,progress:0})})),a.on("fileProgress",(function(e){var t,n=e.progress(!1);c.Am.update(null!==(t=d.current)&&void 0!==t?t:"",{progress:Number(n)})})),a.addFiles(t)},g=function(e,t){if(qa()){var n='<span class="download"> <i class="pnm-download"></i> <a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/chat/"+e,'" target="_blank">').concat(t,"</a></span>"),r={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:l.localParticipant.sid,userId:l.localParticipant.identity,name:l.localParticipant.name},msg:n},o={type:Lr.USER,room_sid:l.sid,message_id:"",body:r};Xa(JSON.stringify(o))}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:u,accept:b,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;if(t.length){var n=qe.getState().session;x(n,t)}}(e)}}),(0,o.jsx)("button",Pi({disabled:!i||s||p,onClick:function(){return function(){var e;p||null===(e=u.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment brand-color1 text-[20px] opacity-50"})}))]})})};var Ii=function(){return Ii=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ii.apply(this,arguments)},Mi=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Di=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ui=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Li=(0,nt.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),Bi=(0,nt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_send_message}),(function(e){return e})),Wi=(0,nt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_file_share}),(function(e){return e}));const Vi=function(e){var t=e.currentRoom,n=Je(Li),r=Je(Bi),i=Je(Wi),s=(0,Ke.$)().t,c=Ui((0,a.useState)(!1),2),l=c[0],u=c[1],d=Ui((0,a.useState)(!1),2),f=d[0],p=d[1],m=Ui((0,a.useState)(!0),2),h=m[0],v=m[1],b=Ui((0,a.useState)(""),2),x=b[0],g=b[1];(0,a.useEffect)((function(){qe.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||v(!1)}),[]),(0,a.useEffect)((function(){u(!!r),p(!!i)}),[r,i]),(0,a.useEffect)((function(){var e,t,n,o,a,i,s=null===(t=null===(e=qe.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,c=null===(o=null===(n=qe.getState().session.currentRoom.metadata)||void 0===n?void 0:n.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,l=null===(i=null===(a=qe.getState().session.currenUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin;s&&!l&&!1!==r&&u(!0),c&&!l&&!1!==r&&p(!0)}),[]);var y=function(){return Mi(void 0,void 0,void 0,(function(){var e,n,r;return Di(this,(function(o){var a;return a=x,e=Ci()(a,{allowedTags:["b","i","strong","br"],allowedSchemes:["mailto","tel"]}),(0,mo.isEmpty)(e)||(n={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},r={type:Lr.USER,room_sid:t.sid,message_id:"",body:n},qa()&&(Xa(JSON.stringify(r)),g(""))),[2]}))}))};return(0,o.jsxs)("div",Ii({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm brand-color1 placeholder:text-brandColor1/70",value:x,onChange:function(e){return g(e.currentTarget.value)},disabled:!n||l,placeholder:s("right-panel.chat-box-placeholder"),onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),y())}(e)}}),(0,o.jsxs)("div",Ii({className:"btns"},{children:[(0,o.jsx)("button",Ii({disabled:!n||l,onClick:function(){return y()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send brand-color1 text-[20px]"})})),h?(0,o.jsx)(Oi,{isChatServiceReady:n,lockSendFile:f,currentRoom:t}):null]}))]}))};var Gi=function(){return Gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gi.apply(this,arguments)},Hi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},zi=(0,nt.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat}),(function(e){return e}));const qi=a.memo((function(e){var t=e.currentRoom,n=e.isRecorder,r=Je(zi),i=Hi((0,a.useState)(!1),2),s=i[0],c=i[1];return(0,a.useEffect)((function(){var e,t,n,o,a=null===(t=null===(e=qe.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,i=null===(o=null===(n=qe.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.is_admin;a&&!i&&!1!==r&&c(!1)}),[]),(0,a.useEffect)((function(){n&&c(!1)}),[n]),(0,a.useEffect)((function(){n||c(!r)}),[r,n]),(0,o.jsxs)("div",Gi({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[(0,o.jsx)("div",Gi({className:"h-[calc(100%)] MessageModule-wrapper scrollBar relative z-10 right-0 top-0 w-[230px] xl:w-[300px] px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto multi-gradient"},{children:(0,o.jsx)("div",Gi({className:"all-MessageModule-wrap"},{children:(0,o.jsx)(Ni,{})}))})),n?(0,o.jsx)("div",{className:"w-[10px] h-[10px] hiddenAnimation"}):null,s?(0,o.jsx)("div",Gi({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(Vi,{currentRoom:t})})):null]}))}));var Xi=function(){return Xi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xi.apply(this,arguments)};const Ji=function(e){var t=e.speaker;return(0,o.jsxs)("div",Xi({className:"m-1 px-3 py-1 brand-color1 text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] brand-color2 mr-2"}),t.name]}))};var Yi=function(){return Yi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yi.apply(this,arguments)};const $i=a.memo((function(){var e=Je(x.selectAll);return(0,o.jsx)("div",Yi({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(Ji,{speaker:e},e.sid)})):null}))}));var Ki=function(){return Ki=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ki.apply(this,arguments)},Qi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Zi=function(e){var t=e.track,n=(0,a.useRef)(null),r=Qi((0,a.useState)(),2),i=r[0],s=r[1];(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Ki({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[i?null:(0,o.jsx)("div",Ki({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Ki({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}))})),(0,o.jsx)("button",Ki({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"})})),(0,o.jsx)("video",{onLoadedData:function(){console.log("onPlaying"),s(!0)},ref:n,className:"video-player absolute"})]}))};var es=function(){return es=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},es.apply(this,arguments)};const ts=function(e){var t=e.track,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",es({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))};var ns=function(){return ns=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ns.apply(this,arguments)},rs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const os=function(e){var t=e.track,n=(0,a.useRef)(null),r=rs((0,a.useState)(),2),i=r[0],s=r[1];(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",ns({className:"camera-video-player"},{children:[i?null:(0,o.jsx)("div",ns({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",ns({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}))})),(0,o.jsx)("button",ns({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"})})),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:n,height:"200px",width:"200px"})]}))};var as=function(){return as=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},as.apply(this,arguments)},is=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const ss=function(e){var t=e.userId,n=Je((function(e){return T.selectById(e,t)})),r=is((0,a.useState)("#FFFFFF"),2),i=r[0],s=r[1];(0,a.useEffect)((function(){switch(null===n||void 0===n?void 0:n.connectionQuality){case rt.ConnectionQuality.Excellent:s("#38f105");break;case rt.ConnectionQuality.Good:s("#c8f6bd");break;case rt.ConnectionQuality.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===n||void 0===n?void 0:n.connectionQuality]);return(0,o.jsx)("div",as({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:i},className:"pnm-network text-[7px]"})}))};var cs=function(){return cs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cs.apply(this,arguments)};const ls=function(e){var t=e.userId,n=Je((function(e){return T.selectById(e,t)}));return(0,o.jsx)(a.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?(0,o.jsx)("div",cs({className:"mic-status"},{children:(null===n||void 0===n?void 0:n.isMuted)?(0,o.jsx)("p",cs({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"})})):(0,o.jsx)("p",cs({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"})}))})):null})};var us=function(){return us=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},us.apply(this,arguments)};const ds=a.memo((function(e){var t=e.userId,n=e.track;return(0,o.jsx)("div",us({className:"camera-modules"},{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(ss,{userId:t}),(0,o.jsx)(ls,{userId:t}),(0,o.jsx)(os,{track:n})]})}))}));var fs=function(){return fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fs.apply(this,arguments)};const ps=function(e){var t,n=e.participantType,r=e.participant,a=Je((function(e){return x.selectById(e,r.identity)}));return(0,o.jsx)("div",fs({className:"video-camera-item relative ".concat(a?"speaking":""," ").concat(n.isAdmin?"admin":"participants")},{children:(t=[],r.tracks.forEach((function(e){if(e.source===rt.Track.Source.Camera){var a=(0,o.jsxs)("div",fs({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",fs({className:"name"},{children:[r.name," ",n.isLocal?"(me)":null]})),(0,o.jsx)(ds,{userId:r.identity,track:e})]}),e.trackSid);t.push(a)}})),t)}))};var ms=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const hs=function(e){var t=ms((0,a.useState)([]),2),n=t[0],r=t[1],i=ms((0,a.useState)(0),2),s=i[0],c=i[1];return(0,a.useEffect)((function(){var t=0,n=[];e.forEach((function(e){var r;if(e.metadata){var a={isAdmin:null!==(r=JSON.parse(e.metadata).is_admin)&&void 0!==r&&r,isLocal:e instanceof rt.LocalParticipant},i=e.getTracks().filter((function(e){return e.source===rt.Track.Source.Camera}));if(t+=i.length,i.length){var s=(0,o.jsx)(ps,{participantType:a,participant:e},e.sid);n.push(s)}}})),c(t),r(n)}),[e]),{allParticipants:n,totalNumWebcams:s}};var vs=function(){return vs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vs.apply(this,arguments)},bs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const xs=a.memo((function(e){var t=e.videoSubscribers,n=e.perPage,r=null!==n&&void 0!==n?n:25,i=Xe(),s=hs(t),c=s.allParticipants,l=s.totalNumWebcams,u=bs((0,a.useState)(0),2),d=u[0],f=u[1],p=bs((0,a.useState)([]),2),m=p[0],h=p[1],v=bs((0,a.useState)(!1),2),b=v[0],x=v[1],g=bs((0,a.useState)(!1),2),y=g[0],w=g[1];(0,a.useEffect)((function(){c.length<=r?h(c):(f(1),S(c,1,r))}),[c]),(0,a.useEffect)((function(){l>r?(x(1!==d),w(!(d>=l/r))):(x(!1),w(!1))}),[l,d,r]);var S=function(e,t,n){var r=bs(e).slice(0).slice((t-1)*n,t*n);h(r),i(L(1!==t))};return(0,o.jsx)(a.Fragment,{children:l>0?(0,o.jsx)("div",vs({className:"all-webcam-wrapper total-cam-".concat(l)},{children:(0,o.jsx)("div",vs({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(a.Fragment,{children:[b?(0,o.jsx)("button",vs({type:"button",className:"previous-cam",onClick:function(){return S(c,d-1,r),void f(d-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"})})):null,(0,o.jsx)(a.Fragment,{children:m}),y?(0,o.jsx)("button",vs({type:"button",className:"next-cam",onClick:function(){return S(c,d+1,r),void f(d+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"})})):null]})}))})):null})}));var gs=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),ys=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),ws=(0,nt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const Ss=a.memo((function(e){var t=e.videoSubscribers,n=Je(gs),r=Je(ys),a=Je(ws);return(0,o.jsx)(o.Fragment,{children:!t||!a||r&&n?null:(0,o.jsx)(xs,{videoSubscribers:t,perPage:3})})}));var _s=function(){return _s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_s.apply(this,arguments)};const ks=a.memo((function(e){var t=e.screenShareTracks,n=e.videoSubscribers,r=Xe();(0,a.useEffect)((function(){return function(){r(se(!1))}}),[r]);return(0,o.jsxs)("div",_s({className:"share-screen-wrapper is-share-screen-running"},{children:[(0,o.jsx)(Ss,{videoSubscribers:n}),function(){if(t){var e=Array();return t.forEach((function(t){t.source===rt.Track.Source.ScreenShare?e.push((0,o.jsx)(Zi,{track:t},t.trackSid)):t.source===rt.Track.Source.ScreenShareAudio&&e.push((0,o.jsx)(ts,{track:t},t.trackSid))})),e}return null}()]}))}));var js=function(){return js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},js.apply(this,arguments)};const Ts=a.memo((function(e){var t=e.track,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",js({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n})}))}));var Ns=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Es=a.memo((function(e){var t=e.audioSubscribers,n=Ns((0,a.useState)([]),2),r=n[0],i=n[1];return(0,a.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(Ts,{track:t},t.trackSid))}))})),i(e)}),[t]),(0,o.jsx)(a.Fragment,{children:r.length?r:null})}));var Cs=function(){return Cs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cs.apply(this,arguments)},As=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Rs=(0,nt.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.room_features.shared_note_pad_features}),(function(e){return e})),Ps=(0,nt.P1)((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings)||void 0===r?void 0:r.lock_shared_notepad}),(function(e){return e}));const Fs=a.memo((function(e){var t=e.videoSubscribers,n=Xe(),r=Je(Rs),i=Je(Ps),s=qe.getState().session.currenUser,c=As((0,a.useState)(),2),l=c[0],u=c[1],d=As((0,a.useState)(),2),f=d[0],p=d[1];(0,a.useEffect)((function(){n(ae(!1))}),[n]),(0,a.useEffect)((function(){if((null===r||void 0===r?void 0:r.is_active)&&r.host){var e=r.host;if(r.host.match("host.docker.internal")&&(e="http://localhost:9001"),null===s||void 0===s?void 0:s.isRecorder)return void p("".concat(e,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name));e=i?"".concat(e,"/p/").concat(r.read_only_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name):"".concat(e,"/p/").concat(r.note_pad_id,"?userName=").concat(null===s||void 0===s?void 0:s.name),p(e)}}),[r,i]);var m=function(){u(!0)};return(0,o.jsxs)("div",Cs({className:"middle-fullscreen-wrapper h-full flex"},{children:[(0,o.jsx)(Ss,{videoSubscribers:t}),f?(0,o.jsxs)("div",Cs({className:"notepad-wrapper h-[calc(100%-50px)] w-full flex-1 sm:px-5 mt-9"},{children:[l?null:(0,o.jsx)("div",Cs({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Cs({className:"lds-ripple"},{children:[(0,o.jsx)("div",{}),(0,o.jsx)("div",{})]}))})),(0,o.jsx)("iframe",{height:"100%",width:"100%",src:f,onLoad:m})]})):null]}))}));var Os=n(23493),Is=n.n(Os),Ms=n(74474),Ds=n.n(Ms),Us=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ls=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bs=function(e,t,n){var r,o,a;return!(!t||!(t.id===(null===(r=e.editingElement)||void 0===r?void 0:r.id)||t.id===(null===(o=e.resizingElement)||void 0===o?void 0:o.id)||t.id===(null===(a=e.draggingElement)||void 0===a?void 0:a.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ws.apply(this,arguments)},Vs=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Gs=function(){var e=(0,a.useRef)(null),t=a.useRef(null),n=Vs((0,a.useState)(!1),2),r=n[0],i=n[1],s=(0,Ke.$)().t,l=Xe(),u=function(e,n){var r,o="",a=new(Ri())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(r=e.currenUser)||void 0===r?void 0:r.userId,resumable:!0},headers:{Authorization:e.token},fileType:["jpg","jpeg","png","svg"],fileTypeErrorCallback:function(e){(0,c.Am)(s("notifications.file-type-not-allow",{filetype:e.type}),{type:c.Am.TYPE.ERROR})},maxFileSize:2e6,maxFileSizeErrorCallback:function(){(0,c.Am)(s("notifications.max-file-size-exceeds"),{type:c.Am.TYPE.ERROR})}});a.on("fileAdded",(function(e){o=e.fileName,a.isUploading()||(i(!0),a.upload())})),a.on("fileSuccess",(function(e,n){var r=JSON.parse(n);i(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=t.current)&&void 0!==e?e:"")}),300),r.status&&(!function(e,t){var n,r,o,a,i={id:lt(),filePath:e,fileName:t};l(Ve(i));var s=qe.getState().whiteboard.whiteboardFiles,c=qe.getState().session,u={type:Wr.ADD_WHITEBOARD_FILE,from:{sid:null!==(r=null===(n=c.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=c.currenUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:s},d={type:Lr.WHITEBOARD,room_sid:c.currentRoom.sid,room_id:c.currentRoom.room_id,message_id:"",body:u};Xa(JSON.stringify(d))}(r.filePath,r.fileName),(0,c.Am)(s("right-panel.file-upload-success"),{type:c.Am.TYPE.SUCCESS}))})),a.on("fileError",(function(e,n){var r=JSON.parse(n);i(!1),setTimeout((function(){var e;c.Am.dismiss(null!==(e=t.current)&&void 0!==e?e:"")}),300),(0,c.Am)(s(r.msg),{type:c.Am.TYPE.ERROR})})),a.on("uploadStart",(function(){t.current=(0,c.Am)(s("right-panel.uploading-file",{fileName:o}),{closeButton:!1,progress:0})})),a.on("fileProgress",(function(e){var n,r=e.progress(!1);c.Am.update(null!==(n=t.current)&&void 0!==n?n:"",{progress:Number(r)})})),a.addFiles(n)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:e,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;if(t.length){var n=qe.getState().session;u(n,t)}}(e)},accept:".png,.jpg,.jpeg,.svg"}),(0,o.jsx)("button",Ws({disabled:r,onClick:function(){return function(){var t;r||null===(t=e.current)||void 0===t||t.click()}()},className:"w-10 h-7 flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-attachment brand-color1 text-[14px] opacity-50"})}))]})})};var Hs,zs=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},qs=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Xs="",Js="",Ys="",$s=50,Ks=50,Qs=function(e,t,n){return zs(void 0,void 0,void 0,(function(){return qs(this,(function(r){return[2,new Promise((function(r,o){return zs(void 0,void 0,void 0,(function(){var a,i,s;return qs(this,(function(c){switch(c.label){case 0:return[4,fetch(e)];case 1:return[4,c.sent().blob()];case 2:return(a=c.sent())||o(null),Xs=t,(Hs=n)<0&&(Hs=1),i=new FileReader,s=new FileReader,i.onloadend=function(){"unknown"!==(Js=ec(i))?s.readAsDataURL(a):o(null)},i.readAsArrayBuffer(a),s.onload=function(){if(Ys=(Ys=s.result).replace("application/octet-stream",Js),"image/svg+xml"!==Js){var e=new Image;e.src=Ys,e.onload=function(){$s=e.height,Ks=e.width,$s>100&&($s=.2*e.height,Ks=.2*e.width);var t=Zs();r(t)}}else{var t=Zs();r(t)}},[2]}}))}))}))]}))}))},Zs=function(){return{image:{id:Xs,dataURL:Ys,mimeType:Js,created:Date.now()},elm:{id:Xs,type:"image",x:360,y:115,width:Ks,height:$s,angle:0,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,groupIds:[],strokeSharpness:"round",seed:ut(),version:Hs+1,versionNonce:ut(),isDeleted:!1,boundElements:null,updated:Date.now(),link:null,status:"pending",fileId:Xs,scale:[1,1]}}},ec=function(e){for(var t,n=new Uint8Array(e.result).subarray(0,4),r="",o=0;o<n.length;o++)r+=n[o].toString(16);switch(r){case"89504e47":t="image/png";break;case"47494638":t="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":t="image/jpeg";break;case"3c3f786d":case"3c737667":t="image/svg+xml";break;default:t="unknown"}return t},tc=function(){return tc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tc.apply(this,arguments)},nc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rc=new Map,oc=function(e,t){var n,r,o,a,i=qe.getState().session,s={sid:null!==(r=null===(n=i.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=i.currenUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},c=JSON.stringify(e),l={type:Wr.SCENE_UPDATE,from:s,msg:c},u={type:Lr.WHITEBOARD,room_sid:i.currentRoom.sid,room_id:i.currentRoom.room_id,message_id:"",body:l};""!==t&&(u.to=t),Xa(JSON.stringify(u))},ac=function(){return ac=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ac.apply(this,arguments)},ic=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},sc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},lc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uc=(0,nt.P1)((function(e){return e.whiteboard.excalidrawElements}),(function(e){return e})),dc=(0,nt.P1)((function(e){return e.whiteboard.mousePointerLocation}),(function(e){return e})),fc=(0,nt.P1)((function(e){return e.whiteboard.whiteboardFiles}),(function(e){return e})),pc=(0,nt.P1)((function(e){return e.whiteboard.requestedWhiteboardData}),(function(e){return e})),mc=(0,nt.P1)((function(e){var t,n,r;return null===(r=null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings)||void 0===r?void 0:r.lock_whiteboard}),(function(e){return e}));const hc=a.memo((function(e){var t=e.videoSubscribers,n=qe.getState().session.currenUser,r=qe.getState().session.currentRoom,i=-1,s=new Map,c=[],l=[],u=(0,Ke.$)().i18n,d=Xe(),f=Je(T.selectAll),p=cc(function(){var e=Us((0,a.useState)(null),2),t=e[0],n=e[1];return[t,(0,a.useCallback)((function(e){return n(e)}),[])]}(),2),m=p[0],h=p[1],v=cc((0,a.useState)(!0),2),b=v[0],x=v[1],g=cc((0,a.useState)("light"),2),y=g[0],w=g[1],S=Je(uc),_=Je(dc),k=Je(fc),j=Je(pc),N=Je(mc);(0,a.useEffect)((function(){var e,t;return m||(w("light"),(null===n||void 0===n?void 0:n.isRecorder)||(null===(t=null===(e=r.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_whiteboard)||x(!1)),function(){if(m){var e=JSON.stringify(m.getSceneElementsIncludingDeleted());d(Be(e))}}}),[m]),(0,a.useEffect)((function(){m||function(){var e=qe.getState().session,t=T.selectAll(qe.getState()).filter((function(t){var n;return t.sid!==(null===(n=e.currenUser)||void 0===n?void 0:n.sid)}));if(t.length){t.sort((function(e,t){return e.joinedAt-t.joinedAt}));var n=t;n.length>2&&(n=t.slice(0,2)),n.forEach((function(t){var n,r,o,a,i={type:Lr.SYSTEM,room_sid:e.currentRoom.sid,message_id:"",to:t.sid,body:{type:Br.INIT_WHITEBOARD,from:{sid:null!==(r=null===(n=e.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=e.currenUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""},msg:""}};Xa(JSON.stringify(i))}))}}(),j.requested&&m&&function(e,t){var n,r,o,a,i=e.getSceneElementsIncludingDeleted(),s=qe.getState().session,c={sid:null!==(r=null===(n=s.currenUser)||void 0===n?void 0:n.sid)&&void 0!==r?r:"",userId:null!==(a=null===(o=s.currenUser)||void 0===o?void 0:o.userId)&&void 0!==a?a:""};i.length&&oc(i,t);var l=qe.getState().whiteboard.whiteboardFiles;if(l){var u={type:Wr.ADD_WHITEBOARD_FILE,from:c,msg:l},d={type:Lr.WHITEBOARD,room_sid:s.currentRoom.sid,room_id:s.currentRoom.room_id,message_id:"",body:u,to:t};Xa(JSON.stringify(d))}qe.dispatch(He({requested:!1,sendTo:""}))}(m,j.sendTo)}),[j,m]),(0,a.useEffect)((function(){m&&(f.forEach((function(e){e.metadata.is_admin&&(s.has(e.userId)||s.set(e.userId,{}))})),m.updateScene({collaborators:s}))}),[f,m]),(0,a.useEffect)((function(){"undefined"!==typeof N&&x(N)}),[N]),(0,a.useEffect)((function(){if(S&&m){var e=JSON.parse(S),t=function(e,t,n){var r,o,a,i,s=e.reduce((function(e,t,n){return e[t.id]=[t,n],e}),{}),c=e.slice(),l=new WeakMap,u=0,d=0,f=-1;try{for(var p=Ls(t),m=p.next();!m.done;m=p.next()){var h=m.value;f++;var v=s[h.id];if(Bs(n,null===v||void 0===v?void 0:v[0],h))h.parent&&delete h.parent;else{v&&l.set(v[0],!0);var b=h.parent||(null===(a=t[f-1])||void 0===a?void 0:a.id)||null;if(null!=b)if(delete h.parent,"^"===b)d++,0===u?(c.unshift(h),s[h.id]=[h,u-d]):(c.splice(u+1,0,h),s[h.id]=[h,u+1-d],u++);else{var x=s[b]?null===(i=s[b])||void 0===i?void 0:i[1]:null;null!=x&&(x+=d),null!=x&&x>=u?(c.splice(x+1,0,h),d++,s[h.id]=[h,x+1-d],u=x+1):null!=x?(c.splice(u+1,0,h),d++,s[h.id]=[h,u+1-d],u++):(c.push(h),s[h.id]=[h,c.length-1-d])}else v?(c[v[1]]=h,s[h.id]=[h,v[1]]):(c.push(h),s[h.id]=[h,c.length-1-d])}}}catch(g){r={error:g}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return c.filter((function(e){return!l.has(e)}))}(m.getSceneElementsIncludingDeleted(),e,m.getAppState());C(t)}}),[S,m]),(0,a.useEffect)((function(){var e;if(_){var t=JSON.parse(_),n=t.pointer,r=t.button,o=t.name,a=t.userId,i=t.selectedElementIds,c=new Map(s),l=null!==(e=c.get(a))&&void 0!==e?e:{};l.pointer=n,l.button=r,l.selectedElementIds=i,l.username=o,c.set(a,l),null===m||void 0===m||m.updateScene({collaborators:c})}}),[_]),(0,a.useEffect)((function(){if(k&&m){var e=JSON.parse(k);E(m,e)}}),[k,m]);var E=function(e,t){return ic(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,d,f,p,m,h;return sc(this,(function(v){switch(v.label){case 0:v.trys.push([0,5,6,7]),n=lc(t),r=n.next(),v.label=1;case 1:if(r.done)return[3,4];for(d in o=r.value,a=window.PLUG_N_MEET_SERVER_URL+"/download/chat/"+o.filePath,s=e.getFiles(),u=!1,s)if(s[d].id===o.id){u=!0;break}return u?[3,3]:[4,Qs(a,o.id,i)];case 2:(f=v.sent())&&e&&(c.push(f.image),l.push(f.elm)),v.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return p=v.sent(),m={error:p},[3,7];case 6:try{r&&!r.done&&(h=n.return)&&h.call(n)}finally{if(m)throw m.error}return[7];case 7:return c.length?(e.addFiles(c),l.forEach((function(t){var n=e.getSceneElementsIncludingDeleted().slice(0);n.filter((function(e){return e.id===t.id})).length||n.push(t),e.updateScene({elements:n})})),c=[],l=[],[2]):[2]}}))}))},C=function(e,t){var n=(void 0===t?{}:t).init,r=void 0!==n&&n;e.length&&(null===m||void 0===m||m.updateScene({elements:e,commitToHistory:r}),i=(0,Ms.getSceneVersion)(e),null===m||void 0===m||m.history.clear())},A=function(e){if(m&&n&&e.length&&qa()){if(b)return;(0,Ms.getSceneVersion)(e)>i&&(i=(0,Ms.getSceneVersion)(e),function(e){var t,n,r=e.reduce((function(e,t,n,r){var o;return(!rc.has(t.id)||t.version>rc.get(t.id))&&e.push(tc(tc({},t),{parent:0===n?"^":null===(o=r[n-1])||void 0===o?void 0:o.id})),e}),[]);oc(r,"");try{for(var o=nc(r),a=o.next();!a.done;a=o.next()){var i=a.value;rc.set(i.id,i.version)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}(e))}},R=Is()((function(e){if(!b&&e.pointersMap.size<2&&n&&qa()){var t={pointer:e.pointer,button:e.button||"up",selectedElementIds:null===m||void 0===m?void 0:m.getAppState().selectedElementIds,userId:n.userId,name:n.name},o={type:Wr.POINTER_UPDATE,from:{sid:n.sid,userId:n.userId},msg:JSON.stringify(t)},a={type:Lr.WHITEBOARD,room_id:r.room_id,room_sid:r.sid,message_id:"",body:o};Xa(JSON.stringify(a))}}),33),P=function(){var e;return(0,o.jsx)(o.Fragment,{children:(null===(e=null===n||void 0===n?void 0:n.metadata)||void 0===e?void 0:e.is_admin)?(0,o.jsx)(Gs,{}):null})};return(0,o.jsxs)("div",ac({className:"middle-fullscreen-wrapper h-full flex"},{children:[(0,o.jsx)(Ss,{videoSubscribers:t}),(0,o.jsx)("div",ac({className:"excalidraw-wrapper flex-1 w-full max-w-[900px] m-auto h-[calc(100%-50px)] sm:px-5 mt-9"},{children:(0,o.jsx)(Ds(),{ref:h,onChange:A,onPointerUpdate:R,viewModeEnabled:b,isCollaborating:!0,theme:y,name:"plugNmeet whiteboard",UIOptions:{canvasActions:{loadScene:!1,export:!1}},autoFocus:!0,detectScroll:!0,langCode:u.languages[0],renderTopRightUI:P})}))]}))}));var vc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},bc=(0,nt.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),xc=(0,nt.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),gc=(0,nt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),yc=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),wc=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e}));const Sc=function(e){var t,n=e.audioSubscribers,r=e.videoSubscribers,i=e.screenShareTracks,s=Je(bc),c=Je(xc),l=Je(gc),u=Je(yc),d=Je(wc),f=vc((0,a.useState)(null!==(t=window.NUMBER_OF_WEBCAMS_PER_PAGE_PC)&&void 0!==t?t:25),2),p=f[0],m=f[1];(0,a.useEffect)((function(){var e,t=qe.getState().session.userDeviceType;"mobile"!==t&&"tablet"!==t||m(null!==(e=window.NUMBER_OF_WEBCAMS_PER_PAGE_MOBILE)&&void 0!==e?e:6)}),[]);return(0,o.jsx)(a.Fragment,{children:(0,o.jsxs)(a.Fragment,{children:[l&&s&&i?(0,o.jsx)(ks,{videoSubscribers:r,screenShareTracks:i}):null,!s&&u?(0,o.jsx)(Fs,{videoSubscribers:r}):null,!s&&d?(0,o.jsx)(hc,{videoSubscribers:r}):null,!c||(l||u||d)&&(s||u||d)||!r?null:(0,o.jsx)(xs,{videoSubscribers:r,perPage:p}),n?(0,o.jsx)(Es,{audioSubscribers:n}):null]})})};var _c=function(){return _c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_c.apply(this,arguments)},kc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},jc=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Tc=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),Nc=(0,nt.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e})),Ec=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveSharedNotePad}),(function(e){return e})),Cc=(0,nt.P1)((function(e){return e.bottomIconsActivity.isActiveWhiteboard}),(function(e){return e}));const Ac=function(e){var t,n=e.currentRoom,r=e.audioSubscribers,i=e.videoSubscribers,s=e.screenShareTracks,c=e.isRecorder,l=Je(jc),u=Je(Nc),d=Je(Ec),f=Je(Cc),p=Xe(),m=Je(Tc),h=kc((0,a.useState)(!0),2),v=h[0],b=h[1],x=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,a.useEffect)((function(){var e;(null===(e=qe.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(b(!1),p(oe(!1)))}),[p]),(0,o.jsxs)("div",_c({id:"main-area",className:"".concat(c?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-110px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(m?"showChatPanel":"hideChatPanel"," ").concat(l?"showParticipantsPanel":"hideParticipantsPanel"," ").concat((null===s||void 0===s?void 0:s.size)&&u?"showScreenShare":"hideScreenShare","\n      ").concat(d?"showSharedNotepad":"hideSharedNotepad","\n      ").concat(f?"showWhiteboard":"hideWhiteboard","\n      ")},{children:[(0,o.jsx)("div",{className:"main-app-bg absolute w-full h-full left-0 top-0 object-cover pointer-events-none ",style:{backgroundImage:'url("'.concat("".concat(x,"/imgs/app-banner.jpg"),'")')}}),(0,o.jsxs)("div",_c({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(ot.uT,_c({className:"transition-left-panel",show:l,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)(yi,{})})),(0,o.jsxs)("div",_c({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)($i,{}),(0,o.jsx)(Sc,{currentRoom:n,audioSubscribers:r,videoSubscribers:i,screenShareTracks:s})]})),v?(0,o.jsx)(ot.uT,_c({className:"transition-right-panel",show:m,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(qi,{currentRoom:n,isRecorder:c})})):null]}))]}))};var Rc=function(){return Rc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rc.apply(this,arguments)},Pc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Fc=(0,nt.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const Oc=function(e){var t=e.onCloseModal,n=Pc((0,a.useState)(!0),2),r=n[0],i=n[1],s=Je(Fc),c=Xe(),l=(0,Ke.$)().t,u=function(){i(!1),c(I(!1)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",Rc({id:"startupJoinModal",className:"".concat(r?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",Rc({className:"popup-inner bg-white w-full max-w-md rounded-2xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",Rc({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 rotate-45"}),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-brandColor1 absolute top-0 left-0 -rotate-45"})]})),(0,o.jsx)("p",Rc({className:"text-base md:text-lg brand-color1 font-normal mb-5 text-center"},{children:l("app.how-to-join")})),(0,o.jsxs)("div",Rc({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",Rc({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return c(ue(!0)),void u()}},{children:[(0,o.jsx)("div",Rc({className:"h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1 text-xl"})})),(0,o.jsx)("p",Rc({className:"text-sm md:text-base brand-color1 font-normal"},{children:l("app.microphone")}))]})),(0,o.jsxs)("button",Rc({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",Rc({className:"camera h-[40px] md:h-[60px] w-[40px] md:w-[60px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return u()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only brand-color1 text-xl"})})),(0,o.jsx)("p",Rc({className:"text-sm md:text-base brand-color1 font-normal"},{children:l("app.listen-only")}))]}))]}))]}))})):null})};var Ic=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var n,r,o;qe.dispatch(E({sid:e.sid,userId:e.identity,name:null!==(n=e.name)&&void 0!==n?n:"",metadata:e.metadata?JSON.parse(e.metadata):null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(o=null===(r=e.joinedAt)||void 0===r?void 0:r.getTime())&&void 0!==o?o:Date.now()})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var n=T.selectById(qe.getState(),e.identity);(null===n||void 0===n?void 0:n.screenShareTrack)&&qe.dispatch(U({isActive:!1,sharedBy:""})),qe.dispatch(C(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1),t.that.updateScreenShareOnUserDisconnect(e)},this.connectionQualityChanged=function(e,n){qe.dispatch(A({id:n.identity,changes:{connectionQuality:e}})),e===rt.ConnectionQuality.Poor&&n.sid===t.that.room.localParticipant.sid&&"RECORDER_BOT"!==n.identity&&"RTMP_BOT"!==n.identity&&(0,c.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,n){if(n.metadata){var r=JSON.parse(n.metadata);qe.dispatch(A({id:n.identity,changes:{metadata:r}})),t.that.room.localParticipant.sid===n.sid&&(qe.dispatch(B(r)),qe.dispatch(ie(r.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),qe.dispatch(ae(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const Mc=Ic;var Dc=function(){function e(e){var t=this;this.localTrackPublished=function(e,n){t.addSubscriber(e,n)},this.localTrackUnpublished=function(e,n){t.removeSubscriber(e,n)},this.trackSubscribed=function(e,n,r){t.addSubscriber(n,r)},this.trackUnsubscribed=function(e,n){t.removeSubscriber(e,n)},this.trackMuted=function(e,t){var n;qe.dispatch(A({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(n=qe.getState().session.currenUser)||void 0===n?void 0:n.userId)&&qe.dispatch(ne(!0))},this.trackUnmuted=function(e,t){var n;qe.dispatch(A({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(n=qe.getState().session.currenUser)||void 0===n?void 0:n.userId)&&qe.dispatch(ne(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,n){console.log(t,n.name)},this.that=e}return e.prototype.addSubscriber=function(e,t){var n,r,o,a,i,s;if((this.roomMetadata||(this.roomMetadata=qe.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=qe.getState().session.currenUser),t.identity!==(null===(n=this.currentUser)||void 0===n?void 0:n.userId)&&e.source===rt.Track.Source.Camera)&&(((null===(r=this.roomMetadata.room_features)||void 0===r?void 0:r.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(i=null===(a=this.currentUser)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===rt.Track.Source.ScreenShare||e.source===rt.Track.Source.ScreenShareAudio?(qe.dispatch(A({id:t.identity,changes:{screenShareTrack:1}})),qe.dispatch(U({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(qe.dispatch(A({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===rt.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===rt.Track.Source.Microphone})).length}})),e.source===rt.Track.Source.Microphone?(this.that.updateAudioSubscribers(t),qe.dispatch(A({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):e.source===rt.Track.Source.Camera&&this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var n;e.source===rt.Track.Source.ScreenShare||e.source===rt.Track.Source.ScreenShareAudio?(qe.dispatch(A({id:t.identity,changes:{screenShareTrack:0}})),qe.dispatch(U({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(qe.dispatch(A({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===rt.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===rt.Track.Source.Microphone})).length,isMuted:null===(n=e.audioTrack)||void 0===n?void 0:n.isMuted}})),e.source===rt.Track.Source.Microphone?this.that.updateAudioSubscribers(t,!1):e.source===rt.Track.Source.Camera&&this.that.updateVideoSubscribers(t,!1))},e}();const Uc=Dc;var Lc=new TextDecoder,Bc=function(e){var t=this;this.dataReceived=function(e,n,r){var o;t.requestedParticipant=n;var a=Lc.decode(e);if(a){var i;try{i=JSON.parse(a)}catch(s){return}r===rt.DataPacket_Kind.RELIABLE&&"SYSTEM"===i.type&&((null===(o=qe.getState().session.currenUser)||void 0===o?void 0:o.isRecorder)||t.handleSystemTypeData(i.body))}},this.handleSystemTypeData=function(e){switch(e.type){case Br.RAISE_HAND:case Br.INFO:(0,c.Am)(m.t(e.msg),{type:"info"}),t.playNotification(e.type);break;case Br.ALERT:(0,c.Am)(m.t(e.msg),{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==Br.RAISE_HAND&&e!==Br.ALERT||qe.dispatch(Re(!0))},this.that=e};const Wc=Bc;var Vc=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){(0,mo.isEmpty)(t)||(e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),qe.dispatch(W(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,n,r;if(!(null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.isRecorder)){var o=qe.getState().session.isActiveRecording;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)?(0,c.Am)(m.t("room-metadata.session-recording"),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_recording)&&(0,c.Am)(m.t("room-metadata.session-not-recording"),{type:"info"})}},this.showRTMPNotification=function(){var t,n,r;if(!(null===(t=qe.getState().session.currenUser)||void 0===t?void 0:t.isRecorder)){var o=qe.getState().session.isActiveRtmpBroadcasting;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)?(0,c.Am)(m.t("room-metadata.rtmp-started"),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_active_rtmp)&&(0,c.Am)(m.t("room-metadata.rtmp-stopped"),{type:"info"})}},this.publishWelcomeMessage=function(){var t,n,r;if(void 0===e.welcomeMessage)if((0,mo.isEmpty)(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(n=e.metadata)||void 0===n?void 0:n.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(r=e.welcomeMessage)&&void 0!==r?r:""};qe.dispatch(_e(o))}}};const Gc=Vc;var Hc=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(t.activeSpeakers=[],e.length){var n=qe.getState().session.isWebcamPaginating,r=Date.now();e.forEach((function(e){var o,a,i;if(!n&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;r>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=r)}var c={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(i=null===(a=e.lastSpokeAt)||void 0===a?void 0:a.getTime())&&void 0!==i?i:Date.now()};qe.dispatch(y(c)),t.activeSpeakers.push(c)}))}},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?qe.dispatch(S(t.activeSpeakers)):x.selectAll(qe.getState()).length&&qe.dispatch(w())}),1e3)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const zc=Hc;var qc=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Xc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Jc=function(){function e(e,t,n,r,o,a){var i=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.url=window.LIVEKIT_SERVER_URL,this.connect=function(){return qc(i,void 0,void 0,(function(){var e;return Xc(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),Na=qe.getState().session,Ia(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return qc(i,void 0,void 0,(function(){var e,t,n=this;return Xc(this,(function(r){return e=null!==(t="RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity)&&void 0!==t&&t,qe.dispatch(M({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name,isRecorder:e})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),e?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(e){n.handleParticipant.addParticipant(e),e.getTracks().forEach((function(t){t.isSubscribed&&(t.source===rt.Track.Source.ScreenShare||t.source===rt.Track.Source.ScreenShareAudio?(qe.dispatch(A({id:e.identity,changes:{screenShareTrack:1}})),qe.dispatch(U({isActive:!0,sharedBy:e.identity}))):n.updateVideoSubscribers(e))}))})),[2]}))}))},this.updateSession=function(){return qc(i,void 0,void 0,(function(){return Xc(this,(function(e){return qe.dispatch(O(this.token)),qe.dispatch(D({sid:this._room.sid,room_id:this._room.name})),!(0,mo.isEmpty)(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,n,r,o=new rt.Room({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:rt.VideoPresets.h720.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,videoSimulcastLayers:[rt.VideoPresets.h90,rt.VideoPresets.h180,rt.VideoPresets.h360],screenShareSimulcastLayers:[rt.ScreenSharePresets.h360fps3,rt.ScreenSharePresets.h720fps15],stopMicTrackOnMute:null!==(n=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==n&&n,videoCodec:null!==(r=window.VIDEO_CODEC)&&void 0!==r?r:"vp8"}});return o.on(rt.RoomEvent.Reconnecting,(function(){return i.roomConnectionStatusState("re-connecting")})),o.on(rt.RoomEvent.Reconnected,(function(){return i.roomConnectionStatusState("connected")})),o.on(rt.RoomEvent.Disconnected,i.onDisconnected),o.on(rt.RoomEvent.RoomMetadataChanged,i.handleRoomMetadata.setRoomMetadata),o.on(rt.RoomEvent.ActiveSpeakersChanged,i.handleActiveSpeakers.activeSpeakersChanged),o.on(rt.RoomEvent.MediaDevicesError,i.mediaDevicesError),o.on(rt.RoomEvent.DataReceived,i.handleDataMessages.dataReceived),o.on(rt.RoomEvent.ParticipantConnected,i.handleParticipant.participantConnected),o.on(rt.RoomEvent.ParticipantDisconnected,i.handleParticipant.participantDisconnected),o.on(rt.RoomEvent.ParticipantMetadataChanged,i.handleParticipant.setParticipantMetadata),o.on(rt.RoomEvent.ConnectionQualityChanged,i.handleParticipant.connectionQualityChanged),o.on(rt.RoomEvent.LocalTrackPublished,i.handleMediaTracks.localTrackPublished),o.on(rt.RoomEvent.LocalTrackUnpublished,i.handleMediaTracks.localTrackUnpublished),o.on(rt.RoomEvent.TrackSubscribed,i.handleMediaTracks.trackSubscribed),o.on(rt.RoomEvent.TrackUnpublished,i.handleMediaTracks.trackUnsubscribed),o.on(rt.RoomEvent.TrackSubscriptionFailed,i.handleMediaTracks.trackSubscriptionFailed),o.on(rt.RoomEvent.TrackMuted,i.handleMediaTracks.trackMuted),o.on(rt.RoomEvent.TrackUnmuted,i.handleMediaTracks.trackUnmuted),o.on(rt.RoomEvent.TrackStreamStateChanged,i.handleMediaTracks.trackStreamStateChanged),o},this.onDisconnected=function(){i.errorState({title:"Room disconnected",text:"Room was closed or disconnected. "}),i.roomConnectionStatusState("disconnected"),Pa&&(null===Ea||void 0===Ea||Ea.close(),Oa=!0),i.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(i.tokenRenewInterval),i.handleParticipant.clearParticipantCounterInterval()},this.mediaDevicesError=function(e){console.log(e)},this.startTokenRenewInterval=function(){i.tokenRenewInterval=setInterval((function(){var e=qe.getState().session.token,t={type:Lr.SYSTEM,message_id:"",room_sid:i._room.sid,room_id:i._room.name,body:{type:Br.RENEW_TOKEN,from:{sid:i._room.localParticipant.sid,userId:i._room.localParticipant.identity},msg:e}};Xa(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,n){void 0===n&&(n=!0),console.log("=== setScreenShareTrack ===",e.source),n?i._screenShareTracksMap.set(t.identity,e):i._screenShareTracksMap.delete(t.identity),i.screenShareTracksState(new Map(i._screenShareTracksMap))},this.updateScreenShareOnUserDisconnect=function(e){i._screenShareTracksMap.size&&i._screenShareTracksMap.has(e.identity)&&(i._screenShareTracksMap.delete(e.identity),i.screenShareTracksState(new Map(i._screenShareTracksMap)),i._screenShareTracksMap.size||qe.dispatch(U({isActive:!1,sharedBy:""})))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.identity?e.identity!==i._room.localParticipant.identity&&(t?i._audioSubscribersMap.set(e.identity,e):i._audioSubscribersMap.has(e.identity)&&i._audioSubscribersMap.delete(e.identity),i.audioSubscribersState(new Map(i._audioSubscribersMap)),qe.dispatch(H(i.audioSubscribersState.length))):console.log("participant.identity undefined")},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),console.log("==== updateVideoSubscribers ===="),"undefined"!==typeof e.identity)if(t?i._videoSubscribersMap.set(e.identity,e):i._videoSubscribersMap.has(e.identity)&&(console.log("removing..",e.identity),i._videoSubscribersMap.delete(e.identity)),qe.dispatch(G(i._videoSubscribersMap.size)),i._videoSubscribersMap.size<=1)i.videoSubscribersState(new Map(i._videoSubscribersMap));else{var n=Array.from(i._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=i._room.localParticipant)||void 0===t?void 0:t.identity)}));if(n.sort((function(e,t){var n,r,o,a,i,s,c,l,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var f=null!==(r=null===(n=u.lastSpokeAt)||void 0===n?void 0:n.getTime())&&void 0!==r?r:0;return(null!==(a=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==a?a:0)-f}return(null!==(s=null===(i=u.joinedAt)||void 0===i?void 0:i.getTime())&&void 0!==s?s:0)-(null!==(l=null===(c=d.joinedAt)||void 0===c?void 0:c.getTime())&&void 0!==l?l:0)})),i._room.localParticipant.getTracks().length){var r=[i._room.localParticipant.sid,i._room.localParticipant];n.unshift(r)}i.videoSubscribersState(new Map(n)),console.log("===ended update ====")}else console.log("participant.identity undefined")},this.token=qe.getState().session.token,this.audioSubscribersState=e,this.videoSubscribersState=t,this.screenShareTracksState=a,this.currentRoomState=n,this.errorState=r,this.roomConnectionStatusState=o,this.handleParticipant=new Mc(this),this.handleMediaTracks=new Uc(this),this.handleDataMessages=new Wc(this),this.handleRoomMetadata=new Gc,this.handleActiveSpeakers=new zc(this),this.roomConnectionStatusState("connecting"),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const Yc=Jc;var $c=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const Kc=function(){var e=$c((0,a.useState)(),2),t=e[0],n=e[1],r=$c((0,a.useState)(),2),o=r[0],i=r[1],s=$c((0,a.useState)("loading"),2),c=s[0],l=s[1],u=$c((0,a.useState)(),2),d=u[0],f=u[1],p=$c((0,a.useState)(),2),m=p[0],h=p[1],v=$c((0,a.useState)(),2),b=v[0],x=v[1];return{error:t,setError:n,roomConnectionStatus:c,setRoomConnectionStatus:l,currentRoom:o,audioSubscribers:d,videoSubscribers:m,screenShareTracks:b,startLivekitConnection:function(){new Yc(f,h,i,n,l,x)}}};var Qc=function(){return Qc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qc.apply(this,arguments)},Zc=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},el=(0,nt.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),tl=(0,nt.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const nl=a.memo((function(){var e,t=Xe(),n=(0,a.useRef)(null),r=Je(el),i=Je(tl),s=Zc((0,a.useState)(!1),2),c=s[0],l=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,a.useEffect)((function(){var e=n.current;r&&(!c&&i&&(null===e||void 0===e||e.play()),t(Re(!1)))}),[r,c,i,t]),(0,a.useEffect)((function(){var e=n.current;return e&&(e.addEventListener("playing",(function(){return l(!0)})),e.addEventListener("ended",(function(){return l(!1)}))),function(){e&&(e.pause(),e.src="",e.removeEventListener("playing",(function(){return l(!0)})),e.removeEventListener("ended",(function(){return l(!1)})))}}),[]),(0,o.jsx)("div",Qc({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:n,src:"".concat(u,"/audio/beep-07a.mp3")})}))}));var rl=n(95172),ol=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},al=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const il=function(e){var t=Xe(),n=(0,Ke.$)().t;(0,rl.y1)("ctrl+alt+m",(function(){e&&function(e){e&&e.localParticipant.audioTracks.forEach((function(e){return ol(void 0,void 0,void 0,(function(){return al(this,(function(n){switch(n.label){case 0:return e.track&&e.track.source===rt.Track.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return n.sent(),t(ne(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:n.sent(),t(ne(!0)),n.label=4;case 4:return[2]}}))}))}))}(e)}),[e]),(0,rl.y1)("ctrl+alt+a",(function(){var e=qe.getState().bottomIconsActivity;e.isActiveMicrophone||e.showMicrophoneModal||t(ue(!0))}));(0,rl.y1)("ctrl+alt+o",(function(){e&&function(e){e.localParticipant.audioTracks.forEach((function(t){return ol(void 0,void 0,void 0,(function(){return al(this,(function(n){return t.track&&t.kind===rt.Track.Kind.Audio&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(te(!1)),t(ne(!1)),t(Ce(""))}(e)}),[e]),(0,rl.y1)("ctrl+alt+v",(function(){var e=qe.getState().bottomIconsActivity;e.isActiveWebcam||e.showVideoShareModal||t(de(!0))}));(0,rl.y1)("ctrl+alt+x",(function(){e&&(qe.getState().bottomIconsActivity.isActiveWebcam&&function(e){e.localParticipant.videoTracks.forEach((function(t){return ol(void 0,void 0,void 0,(function(){return al(this,(function(n){return t.track&&t.track.source===rt.Track.Source.Camera&&e.localParticipant.unpublishTrack(t.track),[2]}))}))})),t(re(!1)),t(Ae("")),t(be({type:"none"}))}(e))}),[e]),(0,rl.y1)("ctrl+alt+u",(function(){var e=qe.getState().bottomIconsActivity.isActiveParticipantsPanel;t(ae(!e))})),(0,rl.y1)("ctrl+alt+c",(function(){var e=qe.getState().bottomIconsActivity.isActiveChatPanel;t(oe(!e))})),(0,rl.y1)("ctrl+alt+l",(function(){var e,n;if(null===(n=null===(e=qe.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===n?void 0:n.is_admin){var r=qe.getState().bottomIconsActivity.showLockSettingsModal;t(fe(!r))}})),(0,rl.y1)("ctrl+alt+s",(function(){var e=qe.getState().roomSettings.isShowRoomSettingsModal;t(Pe(!e))})),(0,rl.y1)("ctrl+alt+w",(function(){var e=qe.getState().bottomIconsActivity.isActiveWhiteboard;t(le(!e))}));(0,rl.y1)("ctrl+alt+r",(function(){e&&function(e,r){ol(void 0,void 0,void 0,(function(){var o,a;return al(this,(function(i){switch(i.label){case 0:return e?[3,2]:(o={sid:r.sid,room_id:r.name,msg_type:Br.RAISE_HAND,msg:n("footer.notice.has-raised-hand",{user:r.localParticipant.name})},[4,Ur("dataMessage",o)]);case 1:return(a=i.sent()).status?(t(ie(!0)),(0,c.Am)(n("footer.notice.you-raised-hand"),{type:"info"})):(0,c.Am)(a.msg,{type:"error"}),[3,4];case 2:return o={sid:r.sid,room_id:r.name,msg_type:Br.LOWER_HAND,msg:Br.LOWER_HAND},[4,Ur("dataMessage",o)];case 3:(a=i.sent()).status?t(ie(!1)):(0,c.Am)(a.msg,{type:"error"}),i.label=4;case 4:return[2]}}))}))}(qe.getState().bottomIconsActivity.isActiveRaisehand,e)}),[e])};var sl=function(){return sl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sl.apply(this,arguments)},cl=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},ll=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ul=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};const dl=function(){var e=Xe(),t=Kc(),n=t.error,r=t.setError,i=t.roomConnectionStatus,s=t.setRoomConnectionStatus,c=t.currentRoom,l=t.audioSubscribers,u=t.videoSubscribers,d=t.screenShareTracks,f=t.startLivekitConnection,p=ul((0,a.useState)(!0),2),m=p[0],h=p[1],v=ul((0,a.useState)(!1),2),b=v[0],x=v[1],g=ul((0,a.useState)(""),2),y=g[0],w=g[1],S=ul((0,a.useState)("landscape-device"),2),_=S[0],k=S[1],j=ul((0,a.useState)(""),2),T=j[0],N=j[1],E=ul((0,a.useState)("participant"),2),C=E[0],A=E[1],R=(0,a.useRef)(null),P=(0,Ke.$)().t;mn(),xn(ht),il(c),(0,a.useEffect)((function(){var t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries());if("undefined"===typeof n.access_token)h(!1),r({title:P("app.token-missing-title"),text:P("app.token-missing-des")});else{c||(s("checking"),cl(void 0,void 0,void 0,(function(){var t;return ll(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Ur("verifyToken",{})];case 1:return t=o.sent(),[3,3];case 2:return o.sent(),s("ready"),h(!1),r({title:P("app.verification-failed-title"),text:P("app.token-not-valid")}),[2];case 3:return s("ready"),h(!1),t.status?e(O(n.access_token)):r({title:P("app.verification-failed-title"),text:P(t.msg)}),[2]}}))})))}}),[P,e,c,r,s]),(0,a.useEffect)((function(){h("connecting"===i||"re-connecting"===i||"checking"===i)}),[i]),(0,a.useEffect)((function(){var e,t;c&&("RECORDER_BOT"!==c.localParticipant.identity&&"RTMP_BOT"!==c.localParticipant.identity||x(!0),(null===(t=null===(e=qe.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin)&&A("admin"))}),[c]),(0,a.useEffect)((function(){window.onresize=function(){e(me(window.innerWidth)),e(he(window.innerHeight)),F();var t=qe.getState().bottomIconsActivity.isActiveChatPanel,n=qe.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&t&&n&&e(ae(!1))},e(me(window.innerWidth)),e(he(window.innerHeight)),window.innerWidth<1024&&(e(ae(!1)),e(oe(!1)));var t="is-pc",n=new($e())(window.navigator.userAgent);n.mobile()?(t="is-mobile ",e(q("mobile"))):n.tablet()&&(t="is-tablet ",e(q("tablet")));var r=n.os();"AndroidOS"===r?t+="is-android":"iOS"!==r&&"iPadOS"!==r||(t+="is-ios"),w(t);var o=window.matchMedia("(orientation: portrait)");o.matches&&k("portrait-device"),o.addEventListener("change",(function(e){e.matches?k("portrait-device"):k("landscape-device")}))}),[e]),(0,a.useEffect)((function(){F()}),[null===c||void 0===c?void 0:c.state]);var F=function(){var e=R.current;e&&N("".concat(e.clientHeight,"px"))},I=function(){f()};return(0,o.jsx)("div",sl({className:"".concat(_," ").concat(y," ").concat(C),style:{height:T}},{children:m?(0,o.jsx)(tt,{text:P("app."+i)}):n&&!m?(0,o.jsx)(Ze,{title:n.title,text:n.text}):"connected"===(null===c||void 0===c?void 0:c.state)?c?(0,o.jsxs)("div",sl({className:"plugNmeet-app overflow-hidden",ref:R},{children:[b?null:(0,o.jsx)(va,{currentRoom:c}),(0,o.jsx)(Ac,{currentRoom:c,audioSubscribers:l,videoSubscribers:u,screenShareTracks:d,isRecorder:b}),(0,o.jsx)(zo,{currentRoom:c,isRecorder:b}),(0,o.jsx)(nl,{})]})):null:"ready"===i?(0,o.jsx)(Oc,{onCloseModal:I}):null}))};var fl=function(){return fl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fl.apply(this,arguments)};i.render((0,o.jsx)(a.StrictMode,{children:(0,o.jsxs)(s.zt,fl({store:qe},{children:[(0,o.jsx)(a.Suspense,fl({fallback:(0,o.jsx)(tt,{text:""})},{children:(0,o.jsx)(dl,{})})),(0,o.jsx)(c.Ix,{})]}))}),document.getElementById("plugNmeet-app"))},75410:()=>{},48628:()=>{},55778:()=>{},73908:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}},e=>{e.O(0,[736],(()=>{return t=48357,e(e.s=t);var t}));e.O()}]);