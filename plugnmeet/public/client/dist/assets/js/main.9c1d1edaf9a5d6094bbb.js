(self.webpackChunkplugnmeet=self.webpackChunkplugnmeet||[]).push([[179],{1818:(e,t,n)=>{"use strict";var r,o=n(5893),i=n(7294),a=n(3935),s=n(6372),c=n(9249),l=(n(1407),n(1796)),u=n(8718),d=n(6071),f=n(5538),v=null!==(r=window.STATIC_ASSETS_PATH)&&void 0!==r?r:"/assets";l.ZP.use(d.Z).use(u.Db).use(f.Z).init({debug:!1,fallbackLng:"en",interpolation:{escapeValue:!1},backend:{loadPath:v+"/locales/{{lng}}/{{ns}}.json"}});const p=l.ZP;var m,h=n(5973),x=(0,h.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.isSpeaking&&t.isSpeaking?e.audioLevel-t.audioLevel:e.isSpeaking!==t.isSpeaking?e.isSpeaking?-1:1:e.lastSpokeAt!==t.lastSpokeAt?t.lastSpokeAt-e.lastSpokeAt:0}}),b=x.getSelectors((function(e){return e.activeSpeakers})),y=(0,h.oM)({name:"activeSpeakers",initialState:x.getInitialState(),reducers:{addSpeaker:x.addOne,addManySpeakers:x.addMany,removeSpeakers:x.removeAll}}),g=(m=y.actions).addSpeaker,w=m.addManySpeakers,j=m.removeSpeakers;const S=y.reducer;var k,N=(0,h.HF)({selectId:function(e){return e.userId},sortComparer:function(e,t){return e.name.localeCompare(t.name)}}),_=N.getSelectors((function(e){return e.participants})),T=(0,h.oM)({name:"participants",initialState:N.getInitialState(),reducers:{addParticipant:N.addOne,removeParticipant:N.removeOne,updateParticipant:N.updateOne}}),P=(k=T.actions).addParticipant,O=k.removeParticipant,A=k.updateParticipant;const R=T.reducer;var C,E=(0,h.oM)({name:"session",initialState:{token:"",screenSharing:{isActive:!1,sharedBy:""},isActiveRtmpBroadcasting:!1,isActiveRecording:!1,isWebcamPaginating:!1,isStartup:!0,isChatServiceReady:!1,totalAudioSubscribers:0,totalVideoSubscribers:0,userDeviceType:"desktop",currentRoom:{sid:"",room_id:"",metadata:{room_title:"plugNmeet",is_recording:!1,is_active_rtmp:!1,room_features:{allow_webcams:!0,mute_on_start:!1,allow_screen_share:!0,allow_recording:!0,allow_rtmp:!0,allow_view_other_webcams:!0,allow_view_other_users_list:!0,admin_only_webcams:!1,chat_features:{allow_chat:!0,allow_file_upload:!0}}}}},reducers:{addToken:function(e,t){e.token=t.payload},toggleStartup:function(e,t){e.isStartup=t.payload},addCurrentUser:function(e,t){e.currenUser=t.payload},addCurrentRoom:function(e,t){e.currentRoom.room_id=t.payload.room_id,e.currentRoom.sid=t.payload.sid,t.payload.metadata&&(e.currentRoom.metadata=t.payload.metadata)},updateScreenSharing:function(e,t){e.screenSharing=t.payload},setWebcamPaginating:function(e,t){e.isWebcamPaginating=t.payload},updateCurrentUserMetadata:function(e,t){e.currenUser&&(e.currenUser.metadata=t.payload)},updateCurrentRoomMetadata:function(e,t){e.currentRoom&&(e.currentRoom.metadata=t.payload,e.isActiveRtmpBroadcasting=t.payload.is_active_rtmp,e.isActiveRecording=t.payload.is_recording)},updateIsChatServiceReady:function(e,t){e.isChatServiceReady=t.payload},updateTotalVideoSubscribers:function(e,t){e.totalVideoSubscribers=t.payload},updateTotalAudioSubscribers:function(e,t){e.totalAudioSubscribers=t.payload},updateMuteOnStart:function(e,t){e.currentRoom.metadata&&(e.currentRoom.metadata.room_features.mute_on_start=t.payload)},updateUserDeviceType:function(e,t){e.userDeviceType=t.payload}}}),I=(C=E.actions).addToken,F=C.toggleStartup,M=C.addCurrentUser,D=C.addCurrentRoom,U=C.updateScreenSharing,L=C.setWebcamPaginating,V=C.updateCurrentUserMetadata,B=C.updateCurrentRoomMetadata,W=C.updateIsChatServiceReady,G=C.updateTotalVideoSubscribers,z=C.updateTotalAudioSubscribers,H=C.updateMuteOnStart,$=C.updateUserDeviceType;const q=E.reducer;var J,K=(0,h.oM)({name:"bottomIconsActivity",initialState:{isActiveMicrophone:!1,isActiveWebcam:!1,isActiveChatPanel:!0,isActiveParticipantsPanel:!0,isActiveRaisehand:!1,isActiveRecording:!1,isActiveScreenshare:!1,isActiveMenu:!1,isActiveEndSession:!1,isMicMuted:!1,screenWidth:1024,showMicrophoneModal:!1,showVideoShareModal:!1,showLockSettingsModal:!1,showRtmpModal:!1,startMicrophoneShare:!1,startWebcamShare:!1,startRecording:!1},reducers:{updateIsActiveMicrophone:function(e,t){e.isActiveMicrophone=t.payload},updateIsMicMuted:function(e,t){e.isMicMuted=t.payload},updateIsActiveWebcam:function(e,t){e.isActiveWebcam=t.payload},updateIsActiveChatPanel:function(e,t){e.screenWidth<1024&&e.isActiveParticipantsPanel&&t.payload&&(e.isActiveParticipantsPanel=!1),e.isActiveChatPanel=t.payload},updateIsActiveParticipantsPanel:function(e,t){e.screenWidth<1024&&e.isActiveChatPanel&&t.payload&&(e.isActiveChatPanel=!1),e.isActiveParticipantsPanel=t.payload},updateIsActiveRaisehand:function(e,t){e.isActiveRaisehand=t.payload},updateIsActiveRecording:function(e,t){e.isActiveRecording=t.payload},updateIsActiveScreenshare:function(e,t){e.isActiveScreenshare=t.payload},updateIsActiveMenu:function(e,t){e.isActiveMenu=t.payload},updateIsActiveEndSession:function(e,t){e.isActiveEndSession=t.payload},updateScreenWidth:function(e,t){e.screenWidth=t.payload},updateShowMicrophoneModal:function(e,t){e.showMicrophoneModal=t.payload},updateShowVideoShareModal:function(e,t){e.showVideoShareModal=t.payload},updateShowLockSettingsModal:function(e,t){e.showLockSettingsModal=t.payload},updateShowRtmpModal:function(e,t){e.showRtmpModal=t.payload},updateStartMicrophoneShare:function(e,t){e.startMicrophoneShare=t.payload},updateStartWebcamShare:function(e,t){e.startWebcamShare=t.payload},updateStartRecording:function(e,t){e.startRecording=t.payload}}}),Y=(J=K.actions).updateIsActiveMicrophone,Q=J.updateIsMicMuted,Z=J.updateIsActiveWebcam,X=J.updateIsActiveChatPanel,ee=J.updateIsActiveParticipantsPanel,te=J.updateIsActiveRaisehand,ne=(J.updateIsActiveRecording,J.updateIsActiveScreenshare),re=(J.updateIsActiveMenu,J.updateIsActiveEndSession,J.updateShowMicrophoneModal),oe=J.updateShowVideoShareModal,ie=J.updateShowLockSettingsModal,ae=J.updateShowRtmpModal,se=(J.updateStartMicrophoneShare,J.updateStartWebcamShare,J.updateStartRecording,J.updateScreenWidth);const ce=K.reducer;var le,ue=(0,h.HF)({selectId:function(e){return e.message_id},sortComparer:function(e,t){var n=new Date(e.time),r=new Date(t.time);return n.getTime()>r.getTime()?1:n.getTime()<r.getTime()?-1:0}}),de=ue.getSelectors((function(e){return e.chatMessages})),fe=(0,h.oM)({name:"chat-messages",initialState:ue.getInitialState(),reducers:{addChatMessage:ue.addOne,removeChatMessage:ue.removeOne,updateChatMessage:ue.updateOne}}),ve=(le=fe.actions).addChatMessage;le.removeChatMessage,le.updateChatMessage;const pe=fe.reducer;var me,he=(0,h.oM)({name:"room-settings",initialState:{isShowRoomSettingsModal:!1,audioDevices:[],videoDevices:[],selectedAudioDevice:"",selectedVideoDevice:"",playAudioNotification:!1,activateWebcamsView:!0,activeScreenSharingView:!0,allowPlayAudioNotification:!0},reducers:{updateShowRoomSettingsModal:function(e,t){e.isShowRoomSettingsModal=t.payload},addAudioDevices:function(e,t){e.audioDevices=t.payload},addVideoDevices:function(e,t){e.videoDevices=t.payload},updateSelectedAudioDevice:function(e,t){e.selectedAudioDevice=t.payload},updateSelectedVideoDevice:function(e,t){e.selectedVideoDevice=t.payload},updatePlayAudioNotification:function(e,t){e.playAudioNotification=t.payload},updateActivateWebcamsView:function(e,t){e.activateWebcamsView=t.payload},updateActiveScreenSharingView:function(e,t){e.activeScreenSharingView=t.payload},updateAllowPlayAudioNotification:function(e,t){e.allowPlayAudioNotification=t.payload}}}),xe=(me=he.actions).addAudioDevices,be=me.addVideoDevices,ye=me.updateSelectedAudioDevice,ge=me.updateSelectedVideoDevice,we=me.updatePlayAudioNotification,je=me.updateShowRoomSettingsModal,Se=me.updateActivateWebcamsView,ke=me.updateActiveScreenSharingView,Ne=me.updateAllowPlayAudioNotification;const _e=he.reducer;var Te=(0,h.xC)({reducer:{participants:R,activeSpeakers:S,session:q,bottomIconsActivity:ce,chatMessages:pe,roomSettings:_e},devTools:!1}),Pe=function(){return(0,s.I0)()},Oe=s.v9,Ae=n(2437),Re=n.n(Ae),Ce=n(2327),Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ee.apply(this,arguments)};const Ie=function(e){var t,n=e.title,r=e.text,i=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,o.jsxs)("div",Ee({id:"errorPage",className:"error-page h-screen w-full flex items-center justify-center"},{children:[(0,o.jsx)("img",{className:"absolute w-full h-full left-0 top-0 object-cover pointer-events-none",src:"".concat(i,"/imgs/app-banner.jpg"),alt:"AppBG"},void 0),(0,o.jsxs)("div",Ee({className:"content relative z-20 text-center bg-white rounded-xl shadow-lg h-80 w-[450px] pt"},{children:[(0,o.jsx)("h2",Ee({className:"text-3xl font-medium mb-4 mt-[88px]"},{children:n}),void 0),(0,o.jsx)("p",{children:r},void 0)]}),void 0)]}),void 0)};var Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fe.apply(this,arguments)};const Me=function(e){var t=e.text;return(0,o.jsx)("div",Fe({className:"loader opacity-1 fixed top-0 left-0 w-full h-full bg-white/90 z-[999] flex flex-wrap items-center justify-center"},{children:(0,o.jsxs)("div",Fe({className:"inner"},{children:[(0,o.jsxs)("div",Fe({className:"lds-ripple"},{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]}),void 0),(0,o.jsx)("p",Fe({className:"block w-full text-center relative bottom-4 capitalize"},{children:t}),void 0)]}),void 0)}),void 0)};var De=n(573),Ue=n(8219),Le=n(6727),Ve=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Be=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function We(e){return Ve(this,void 0,void 0,(function(){var t,n,r;return Be(this,(function(o){switch(o.label){case 0:return t={audio:!0},"videoinput"===e&&(t={video:!0}),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:return r=(r=o.sent()).filter((function(t){return t.kind===e})),n.getTracks().forEach((function(e){e.stop()})),[2,r]}}))}))}const Ge=function(e){var t=e.deviceId,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current,o={video:{deviceId:t}};return navigator.mediaDevices.getUserMedia(o).then((function(t){r&&(e=t,r.srcObject=t)})),function(){r&&(r.pause(),r.removeAttribute("src")),e&&e.getTracks().forEach((function(e){e.stop()}))}}),[t]),(0,o.jsx)("div",{children:(0,o.jsx)("video",{className:"mt-5 mb-5",ref:n,autoPlay:!0,height:"50"},void 0)},void 0)};var ze=function(){return ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ze.apply(this,arguments)},He=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},$e=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},qe=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Je=(0,De.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e}));const Ke=function(e){var t=e.currentRoom,n=Oe(Je),r=qe((0,i.useState)(!0),2),a=r[0],s=r[1],c=qe((0,i.useState)(""),2),l=c[0],u=c[1],d=qe((0,i.useState)([]),2),f=d[0],v=d[1],p=Pe(),m=(0,Ce.$)().t;(0,i.useEffect)((function(){He(void 0,void 0,void 0,(function(){var e,t,n;return $e(this,(function(r){switch(r.label){case 0:return[4,We("videoinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",ze({value:e.deviceId},{children:e.label}),e.deviceId)})),v(n),u(e[0].deviceId),t.length&&p(be(t)),[2]}}))}))}),[p]),(0,i.useEffect)((function(){n&&s(!0)}),[n]);var h=function(){s(!1),p(oe(!1)),p(Z(!1))};return(0,o.jsx)(i.Fragment,{children:n?(0,o.jsx)(Le.uT,ze({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Le.Vq,ze({open:a,onClose:function(){return h()},className:"share-webcam-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",ze({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0),(0,o.jsxs)("div",ze({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",ze({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return h()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,ze({className:"mb-6"},{children:m("footer.modal.select-webcam")}),void 0),(0,o.jsx)("div",ze({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",ze({value:l,onChange:function(e){return u(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:f}),void 0)}),void 0),(0,o.jsx)("div",ze({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)(Ge,{deviceId:l},void 0)}),void 0),(0,o.jsx)("div",ze({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",ze({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return He(void 0,void 0,void 0,(function(){return $e(this,(function(e){switch(e.label){case 0:return h(),l?[4,(0,Ue.createLocalTracks)({audio:!1,video:{deviceId:l,resolution:Ue.VideoPresets.hd}})]:[2];case 1:return e.sent().forEach((function(e){return He(void 0,void 0,void 0,(function(){return $e(this,(function(n){switch(n.label){case 0:return e.kind!==Ue.Track.Kind.Video?[3,2]:[4,t.localParticipant.publishTrack(e)];case 1:n.sent(),p(Z(!0)),n.label=2;case 2:return[2]}}))}))})),p(ge(l)),[2]}}))}))}},{children:m("share")}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0):null},void 0)};var Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ye.apply(this,arguments)},Qe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ze=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xe=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},et=(0,De.P1)((function(e){return e.roomSettings.videoDevices}),(function(e){return e})),tt=(0,De.P1)((function(e){return e.roomSettings.selectedVideoDevice}),(function(e){return e}));const nt=function(e){var t=e.currentRoom,n=Pe(),r=(0,Ce.$)().t,a=Oe(et),s=Oe(tt),c=Xe((0,i.useState)(),2),l=c[0],u=c[1],d=Xe((0,i.useState)(),2),f=d[0],v=d[1];(0,i.useEffect)((function(){var e=a.map((function(e){return(0,o.jsx)("div",Ye({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:function(){return(0,o.jsx)("p",Ye({className:"".concat(s===e.id?"text-brandColor2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return v(e.id)}},{children:e.label}),void 0)}},void 0)}),e.id)}));u(e)}),[s,a]),(0,i.useEffect)((function(){var e;f&&(e=f,Qe(void 0,void 0,void 0,(function(){return Ze(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("videoinput",e)];case 1:return n.sent(),[2]}}))})),n(ge(f)))}),[f,t,n]);return(0,o.jsxs)(Le.v2.Items,Ye({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[l,(0,o.jsx)("div",Ye({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:function(){return(0,o.jsx)("p",Ye({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return t.localParticipant.videoTracks.forEach((function(e){return Qe(void 0,void 0,void 0,(function(){return Ze(this,(function(n){return e.track&&e.track.source===Ue.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(Z(!1)),void n(ge(""))}},{children:r("footer.menus.leave-webcam")}),void 0)}},void 0)}),void 0)]}),void 0)};var rt=function(){return rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rt.apply(this,arguments)};const ot=function(e){var t=e.currentRoom;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(Le.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Le.v2.Button,{children:[(0,o.jsx)("div",rt({className:"camera relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer has-tooltip"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 text-[10px] lg:text-[14px]"},void 0)}),void 0),(0,o.jsx)("div",rt({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[8px]"},void 0)}),void 0)]},void 0),(0,o.jsx)(Le.uT,rt({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(nt,{currentRoom:t},void 0)}),void 0)]},void 0)}},void 0)},void 0)};var it=function(){return it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},it.apply(this,arguments)},at=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},st=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveWebcam}),(function(e){return e})),ct=(0,De.P1)((function(e){return e.bottomIconsActivity.showVideoShareModal}),(function(e){return e})),lt=(0,De.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_webcam}),(function(e){return e}));const ut=function(e){var t=e.currentRoom,n=Pe(),r="desktop"===Te.getState().session.userDeviceType,a=Oe(ct),s=Oe(st),c=Oe(lt),l=(0,Ce.$)().t,u=at((0,i.useState)(!0),2),d=u[0],f=u[1],v=at((0,i.useState)(!1),2),p=v[0],m=v[1];(0,i.useEffect)((function(){var e,t,n,r=Te.getState().session,o=r.currentRoom.metadata,i=r.currenUser;(null===(e=o.room_features)||void 0===e?void 0:e.allow_webcams)?(null===(t=o.room_features)||void 0===t?void 0:t.admin_only_webcams)&&!(null===(n=null===i||void 0===i?void 0:i.metadata)||void 0===n?void 0:n.is_admin)&&f(!1):f(!1)}),[]),(0,i.useEffect)((function(){if(c){m(!0);var e=_.selectById(Te.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.videoTracks)&&(null===t||void 0===t||t.localParticipant.videoTracks.forEach((function(e){e.track&&e.source===Ue.Track.Source.Camera&&t.localParticipant.unpublishTrack(e.track)})),n(Z(!1)))}else m(!1)}),[c,t,n]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=Te.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_webcam,i=null===(r=null===(n=Te.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==c&&m(!0)}),[]);return(0,o.jsx)(i.Fragment,{children:d?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)("div",it({className:"camera relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){p||s||n(oe(!s))}},{children:[s?null:(0,o.jsx)("span",it({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:l(c?"footer.icons.webcam-locked":"footer.icons.start-webcam")}),void 0),(0,o.jsxs)(i.Fragment,{children:[s?null:(0,o.jsx)("i",{className:"pnm-webcam brand-color1 text-[10px] lg:text-[14px]"},void 0),p?(0,o.jsx)("div",it({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"},void 0)}),void 0):null]},void 0),s?(0,o.jsx)(ot,{currentRoom:t},void 0):null]}),void 0),a?(0,o.jsx)(Ke,{currentRoom:t},void 0):null]},void 0):null},void 0)};var dt=function(){return dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dt.apply(this,arguments)},ft=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},vt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},mt=(0,De.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e}));const ht=function(e){var t,n,r=e.currentRoom,a=Oe(mt),s=pt((0,i.useState)(!0),2),c=s[0],l=s[1],u=pt((0,i.useState)(""),2),d=u[0],f=u[1],v=pt((0,i.useState)([]),2),p=v[0],m=v[1],h=Pe(),x=(0,Ce.$)().t,b=null!==(n=null===(t=Te.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features.mute_on_start)&&void 0!==n&&n;(0,i.useEffect)((function(){ft(void 0,void 0,void 0,(function(){var e,t,n;return vt(this,(function(r){switch(r.label){case 0:return[4,We("audioinput")];case 1:return e=r.sent(),t=[],n=e.map((function(e){var n={id:e.deviceId,label:e.label};return t.push(n),(0,o.jsx)("option",dt({value:e.deviceId},{children:e.label}),e.deviceId)})),m(n),f(e[0].deviceId),t.length&&h(xe(t)),[2]}}))}))}),[h]),(0,i.useEffect)((function(){a&&l(!0)}),[a]);var y=function(){l(!1),h(re(!1))};return(0,o.jsx)(i.Fragment,{children:a?(0,o.jsx)(Le.uT,dt({show:c,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Le.Vq,dt({open:c,onClose:function(){return y()},className:"share-microphone-popup-wrap fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",dt({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0),(0,o.jsxs)("div",dt({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",dt({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,dt({className:"mb-6"},{children:x("footer.modal.select-microphone")}),void 0),(0,o.jsx)("div",dt({className:"col-span-6 sm:col-span-3"},{children:(0,o.jsx)("select",dt({value:d,onChange:function(e){return f(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:p}),void 0)}),void 0),(0,o.jsx)("div",dt({className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},{children:(0,o.jsx)("button",dt({className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return ft(void 0,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return l(!1),h(re(!1)),d?[4,(0,Ue.createLocalTracks)({audio:{deviceId:d},video:!1})]:[2];case 1:return e.sent().forEach((function(e){return ft(void 0,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return e.kind!==Ue.Track.Kind.Audio?[3,2]:[4,null===r||void 0===r?void 0:r.localParticipant.publishTrack(e)];case 1:t.sent(),h(Y(!0)),t.label=2;case 2:return[2]}}))}))})),b&&setTimeout((function(){return ft(void 0,void 0,void 0,(function(){return vt(this,(function(e){return null===r||void 0===r||r.localParticipant.audioTracks.forEach((function(e){return ft(void 0,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ue.Track.Source.Microphone?e.isMuted?[3,2]:[4,e.track.mute()]:[3,2];case 1:t.sent(),h(Q(!0)),h(H(!1)),t.label=2;case 2:return[2]}}))}))})),[2]}))}))}),500),h(ye(d)),[2]}}))}))}},{children:x("join")}),void 0)}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0):null},void 0)};var xt=function(){return xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xt.apply(this,arguments)},bt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},yt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},gt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},wt=(0,De.P1)((function(e){return e.roomSettings.audioDevices}),(function(e){return e})),jt=(0,De.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e})),St=(0,De.P1)((function(e){return e.roomSettings.selectedAudioDevice}),(function(e){return e}));const kt=function(e){var t=e.currentRoom,n=Pe(),r=(0,Ce.$)().t,a=Oe(wt),s=Oe(jt),c=Oe(St),l=gt((0,i.useState)(),2),u=l[0],d=l[1],f=gt((0,i.useState)(),2),v=f[0],p=f[1];(0,i.useEffect)((function(){var e=a.map((function(e){return(0,o.jsx)("div",xt({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:function(){return(0,o.jsx)("p",xt({className:"".concat(c===e.id?"text-brandColor2":"text-gray-700 dark:text-gray-400"," rounded group flex items-center px-3 py-[0.4rem] text-[10px] lg:text-xs transition ease-in hover:bg-brandColor1 hover:text-white"),onClick:function(){return p(e.id)}},{children:e.label}),void 0)}},void 0)}),e.id)}));d(e)}),[a,c]),(0,i.useEffect)((function(){var e;v&&(e=v,bt(void 0,void 0,void 0,(function(){return yt(this,(function(n){switch(n.label){case 0:return[4,t.switchActiveDevice("audioinput",e)];case 1:return n.sent(),[2]}}))})),n(ye(v)))}),[v,t,n]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(Le.v2.Items,xt({static:!0,className:"origin-bottom-right z-[9999] absolute left-0 mt-2 w-40 bottom-[40px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[u,(0,o.jsx)("div",xt({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:function(){return(0,o.jsx)("p",xt({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center px-3 py-[0.4rem] text-xs transition ease-in hover:bg-brandColor1 hover:text-white border-t border-solid border-red-100",onClick:function(){null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return bt(void 0,void 0,void 0,(function(){return yt(this,(function(t){switch(t.label){case 0:return e.track&&e.track.source===Ue.Track.Source.Microphone?e.isMuted?[4,e.track.unmute()]:[3,2]:[3,4];case 1:return t.sent(),n(Q(!1)),[3,4];case 2:return[4,e.track.mute()];case 3:t.sent(),n(Q(!0)),t.label=4;case 4:return[2]}}))}))}))}},{children:r(s?"footer.menus.unmute-microphone":"footer.menus.mute-microphone")}),void 0)}},void 0)}),void 0),(0,o.jsx)("div",xt({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:function(){return(0,o.jsx)("p",xt({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs transition ease-in hover:bg-red-400 hover:text-white",onClick:function(){return null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){return bt(void 0,void 0,void 0,(function(){return yt(this,(function(n){return e.track&&e.kind===Ue.Track.Kind.Audio&&t.localParticipant.unpublishTrack(e.track),[2]}))}))})),n(Y(!1)),n(Q(!1)),void n(ye(""))}},{children:r("footer.menus.leave-microphone")}),void 0)}},void 0)}),void 0)]}),void 0)},void 0)};var Nt=function(){return Nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Nt.apply(this,arguments)},_t=(0,De.P1)((function(e){return e.bottomIconsActivity.isMicMuted}),(function(e){return e}));const Tt=function(e){var t=e.currentRoom,n=Oe(_t);return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)("div",{children:(0,o.jsx)(Le.v2,{children:function(e){var r=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Le.v2.Button,{children:[(0,o.jsxs)("div",Nt({className:"microphone relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:[n?null:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 text-[10px] lg:text-[14px]"},void 0),n?(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 text-[10px] lg:text-[14px]"},void 0):null]}),void 0),(0,o.jsx)("div",Nt({className:"arrow-down absolute -bottom-1 -right-1 w-[15px] h-[15px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-arrow-below text-[8px]"},void 0)}),void 0)]},void 0),(0,o.jsx)(Le.uT,Nt({show:r,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(kt,{currentRoom:t},void 0)}),void 0)]},void 0)}},void 0)},void 0)},void 0)};var Pt=function(){return Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pt.apply(this,arguments)},Ot=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},At=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveMicrophone}),(function(e){return e})),Rt=(0,De.P1)((function(e){return e.bottomIconsActivity.showMicrophoneModal}),(function(e){return e})),Ct=(0,De.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_microphone}),(function(e){return e}));const Et=function(e){var t=e.currentRoom,n=Pe(),r="desktop"===Te.getState().session.userDeviceType,a=(0,Ce.$)().t,s=Oe(Rt),c=Oe(At),l=Oe(Ct),u=Ot((0,i.useState)(!1),2),d=u[0],f=u[1];(0,i.useEffect)((function(){if(l){f(!0);var e=_.selectById(Te.getState(),t.localParticipant.identity);(null===e||void 0===e?void 0:e.audioTracks)&&(null===t||void 0===t||t.localParticipant.audioTracks.forEach((function(e){e.track&&e.source===Ue.Track.Source.Microphone&&t.localParticipant.unpublishTrack(e.track)})),n(Y(!1)),n(Q(!1)))}else f(!1)}),[l,t,n]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=Te.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_microphone,i=null===(r=null===(n=Te.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==l&&f(!0)}),[]);return(0,o.jsxs)("div",{children:[s?(0,o.jsx)(ht,{currentRoom:t},void 0):null,(0,o.jsxs)("div",Pt({className:"microphone relative h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(r?"has-tooltip":""),onClick:function(){d||c||n(re(!0))}},{children:[c?null:(0,o.jsx)("span",Pt({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:a(d?"footer.icons.microphone-locked":"footer.icons.start-microphone-sharing")}),void 0),c?null:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1 text-[10px] lg:text-[14px]"},void 0),d?(0,o.jsx)("div",Pt({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"},void 0)}),void 0):null]},void 0),c?(0,o.jsx)(Tt,{currentRoom:t},void 0):null]}),void 0)]},void 0)};var It=function(){return It=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},It.apply(this,arguments)},Ft=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Mt=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e}));const Dt=function(){var e=Pe(),t="desktop"===Te.getState().session.userDeviceType,n=(0,Ce.$)().t,r=Oe(Mt),a=Ft((0,i.useState)("brand-color1"),2),s=a[0],c=a[1],l=Ft((0,i.useState)(!0),2),u=l[0],d=l[1];(0,i.useEffect)((function(){c(r?"brand-color2":"brand-color1")}),[r]),(0,i.useEffect)((function(){var t;(null===(t=Te.getState().session.currentRoom.metadata.room_features)||void 0===t?void 0:t.chat_features.allow_chat)||(d(!1),e(X(!1)))}),[e]);return(0,o.jsx)(i.Fragment,{children:u?(0,o.jsxs)("div",It({className:"message h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(X(!r))}},{children:[(0,o.jsx)("span",It({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-chat-panel":"footer.icons.show-chat-panel")}),void 0),(0,o.jsx)("i",{className:"pnm-chat ".concat(s," text-[12px] lg:text-[16px]")},void 0)]}),void 0):null},void 0)};var Ut=function(){return Ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ut.apply(this,arguments)},Lt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Vt=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e}));const Bt=function(){var e=Pe(),t="desktop"===Te.getState().session.userDeviceType,n=(0,Ce.$)().t,r=Oe(Vt),a=Lt((0,i.useState)("brand-color1"),2),s=a[0],c=a[1];(0,i.useEffect)((function(){c(r?"brand-color2":"brand-color1")}),[r]);return(0,o.jsxs)("div",Ut({className:"participants h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] mr-3 lg:mr-6 overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer ".concat(t?"has-tooltip":""),onClick:function(){e(ee(!r))}},{children:[(0,o.jsx)("span",Ut({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:n(r?"footer.icons.hide-users-list":"footer.icons.show-users-list")}),void 0),(0,o.jsx)("i",{className:"pnm-participant ".concat(s," text-[12px] lg:text-[16px]")},void 0)]}),void 0)};var Wt=n(9669),Gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},zt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ht=n.n(Wt)().create({baseURL:window.PLUG_N_MEET_SERVER_URL+"/api"}),$t=function(){if(Te.getState().session.token)return Te.getState().session.token;var e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).access_token};const qt=function(e,t){return Gt(void 0,void 0,void 0,(function(){return zt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Ht.post(e,JSON.stringify(t),{headers:{Authorization:$t(),"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw n.sent().response;case 3:return[2]}}))}))};var Jt,Kt;!function(e){e.USER="USER",e.SYSTEM="SYSTEM"}(Jt||(Jt={})),function(e){e.RAISE_HAND="RAISE_HAND",e.LOWER_HAND="LOWER_HAND",e.OTHER_USER_LOWER_HAND="OTHER_USER_LOWER_HAND",e.FILE_UPLOAD="FILE_UPLOAD",e.INFO="INFO",e.ALERT="ALERT",e.SEND_CHAT_MSGS="SEND_CHAT_MSGS",e.RENEW_TOKEN="RENEW_TOKEN",e.UPDATE_LOCK_SETTINGS="UPDATE_LOCK_SETTINGS"}(Kt||(Kt={}));var Yt=function(){return Yt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yt.apply(this,arguments)},Qt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Zt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},en=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveRaisehand}),(function(e){return e}));const tn=function(e){var t=e.currentRoom,n="desktop"===Te.getState().session.userDeviceType,r=(0,Ce.$)().t,a=Pe(),s=Oe(en),l=Xt((0,i.useState)("brand-color1"),2),u=l[0],d=l[1];(0,i.useEffect)((function(){d(s?"brand-color2":"brand-color1")}),[s]);return(0,o.jsxs)("div",Yt({className:"hands h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return Qt(void 0,void 0,void 0,(function(){var e,n;return Zt(this,(function(o){switch(o.label){case 0:return s?[3,2]:(e={sid:t.sid,room_id:t.name,msg_type:Kt.RAISE_HAND,msg:r("footer.notice.has-raised-hand",{user:t.localParticipant.name})},[4,qt("dataMessage",e)]);case 1:return(n=o.sent()).status?(a(te(!0)),(0,c.Am)(r("footer.notice.you-raised-hand"),{type:"info"})):(0,c.Am)(n.msg,{type:"error"}),[3,4];case 2:return e={sid:t.sid,room_id:t.name,msg_type:Kt.LOWER_HAND,msg:Kt.LOWER_HAND},[4,qt("dataMessage",e)];case 3:(n=o.sent()).status?a(te(!1)):(0,c.Am)(n.msg,{type:"error"}),o.label=4;case 4:return[2]}}))}))}},{children:[(0,o.jsx)("span",Yt({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(s?"footer.icons.lower-hand":"footer.icons.raise-hand")}),void 0),(0,o.jsx)("i",{className:"pnm-raise-hand ".concat(u," text-[12px] lg:text-[16px]")},void 0)]}),void 0)};var nn=function(){return nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nn.apply(this,arguments)},rn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},on=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},an=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},sn=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveScreenshare}),(function(e){return e})),cn=(0,De.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),ln=(0,De.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_screen_sharing}),(function(e){return e}));const un=function(e){var t=e.currentRoom,n="desktop"===Te.getState().session.userDeviceType,r=Pe(),a=(0,Ce.$)().t,s=Oe(sn),l=Oe(cn),u=Oe(ln),d=an((0,i.useState)("brand-color1"),2),f=d[0],v=d[1],p=an((0,i.useState)(!0),2),m=p[0],h=p[1],x=an((0,i.useState)(!1),2),b=x[0],y=x[1];(0,i.useEffect)((function(){v(s?"brand-color2":"brand-color1")}),[s]),(0,i.useEffect)((function(){var e;(null===(e=Te.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_webcams)||h(!1)}),[]);var g=(0,i.useCallback)((function(){s&&(t.localParticipant.tracks.forEach((function(e){e.source!==Ue.Track.Source.ScreenShare&&e.source!==Ue.Track.Source.ScreenShareAudio||!e.track||t.localParticipant.unpublishTrack(e.track)})),r(ne(!1)),r(U({isActive:!1,sharedBy:""})))}),[s,r,t]);(0,i.useEffect)((function(){u?(y(!0),g()):y(!1)}),[r,g,u]),(0,i.useEffect)((function(){var e,t,n,r,o=null===(t=null===(e=Te.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_screen_sharing,i=null===(r=null===(n=Te.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.is_admin;o&&!i&&!1!==u&&y(!0)}),[]),(0,i.useEffect)((function(){!l&&s&&r(ne(!1))}),[l]);return(0,o.jsx)(i.Fragment,{children:m?(0,o.jsxs)("div",nn({className:"share-screen h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] relative rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 hidden md:flex items-center justify-center cursor-pointer ".concat(n?"has-tooltip":""),onClick:function(){return rn(void 0,void 0,void 0,(function(){return on(this,(function(e){switch(e.label){case 0:return b?[2]:s?[3,2]:l?((0,c.Am)(a("footer.notice.already-active-screen-sharing"),{toastId:"dup-screen-share",type:"warning"}),[2]):[4,(0,Ue.createLocalScreenTracks)({resolution:Ue.VideoPresets.hd.resolution,audio:!0})];case 1:return e.sent().forEach((function(e){return rn(void 0,void 0,void 0,(function(){return on(this,(function(n){switch(n.label){case 0:return[4,t.localParticipant.publishTrack(e)];case 1:return n.sent(),[2]}}))}))})),r(ne(!0)),r(U({isActive:!0,sharedBy:t.localParticipant.identity})),[3,3];case 2:g(),e.label=3;case 3:return[2]}}))}))}},{children:[(0,o.jsx)("span",nn({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:s?a("footer.icons.stop-screen-sharing"):s||b?b?a("footer.icons.screen-sharing-locked"):void 0:a("footer.icons.start-screen-sharing")}),void 0),(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("i",{className:"pnm-screen-share ".concat(f," text-[12px] lg:text-[16px]")},void 0),b?(0,o.jsx)("div",nn({className:"arrow-down absolute -bottom-1 -right-1 w-[16px] h-[16px] rounded-full bg-white flex items-center justify-center"},{children:(0,o.jsx)("i",{className:"pnm-lock brand-color1"},void 0)}),void 0):null]},void 0)]}),void 0):null},void 0)};var dn=function(){return dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dn.apply(this,arguments)},fn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},vn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},mn=(0,De.P1)((function(e){return e.session.isActiveRecording}),(function(e){return e}));const hn=function(){var e,t,n="desktop"===Te.getState().session.userDeviceType,r=(0,Ce.$)().t,a=Oe(mn),s=pn((0,i.useState)(!1),2),l=s[0],u=s[1],d=pn((0,i.useState)(!1),2),f=d[0],v=d[1],p=pn((0,i.useState)(!0),2),m=p[0],h=p[1],x=null===(t=null===(e=Te.getState().session.currenUser)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.is_admin,b=0;(0,i.useEffect)((function(){return a?(v(!0),clearTimeout(b),u(!1)):!a&&f&&(v(!1),clearTimeout(b),u(!1)),function(){clearTimeout(b)}}),[a,f,b]),(0,i.useEffect)((function(){var e;(null===(e=Te.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.allow_recording)||h(!1)}),[]);var y=function(){return fn(void 0,void 0,void 0,(function(){var e,t,n;return vn(this,(function(o){switch(o.label){case 0:return e={task:"start-recording",sid:Te.getState().session.currentRoom.sid},[4,qt("recording",e)];case 1:return t=o.sent(),n="footer.notice.start-recording-progress",t.status||(n=t.msg),(0,c.Am)(r(n),{toastId:"recording-status",type:"info"}),b=setTimeout((function(){u(!1),(0,c.Am)(r("footer.notice.recording-not-start"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))},g=function(){return fn(void 0,void 0,void 0,(function(){var e,t,n;return vn(this,(function(o){switch(o.label){case 0:return e={task:"stop-recording",sid:Te.getState().session.currentRoom.sid},[4,qt("recording",e)];case 1:return t=o.sent(),n="footer.notice.stop-recording-service-in-progress",t.status||(n=t.msg),(0,c.Am)(r(n),{toastId:"recording-status",type:"info"}),b=setTimeout((function(){u(!1),(0,c.Am)(r("footer.notice.recording-did-not-stop"),{toastId:"recording-status",type:"error"})}),3e4),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:m&&x?(0,o.jsxs)("button",dn({className:"".concat(a?"record":""," h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mr-3 lg:mr-6 flex items-center justify-center cursor-pointer ").concat(n?"has-tooltip":""),onClick:function(){return u(!0),void(a?g():y())},disabled:l},{children:[(0,o.jsx)("span",dn({className:"tooltip rounded shadow-lg p-1 bg-gray-100 text-red-500 -mt-16 text-[10px] w-max"},{children:r(a?"footer.icons.stop-recording":"footer.icons.start-recording")}),void 0),(0,o.jsx)("i",{className:"pnm-rec brand-color1 text-[10px] lg:text-[12px] font-['Nunito Sans'] font-bold"},void 0)]}),void 0):null},void 0)};var xn=function(){return xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xn.apply(this,arguments)},bn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},yn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},gn=(0,De.P1)((function(e){var t;return null===(t=e.session.currentRoom.metadata)||void 0===t?void 0:t.default_lock_settings}),(function(e){return e}));const wn=function(){var e=Pe(),t=(0,Ce.$)().t,n=Oe(gn),r=Te.getState().session,a=function(e,n){return bn(void 0,void 0,void 0,(function(){var o,i,a;return yn(this,(function(s){switch(s.label){case 0:return o=e?"lock":"unlock",i={sid:r.currentRoom.sid,room_id:r.currentRoom.room_id,user_id:"all",service:n,direction:o},[4,qt("updateLockSettings",i)];case 1:return(a=s.sent()).status?(0,c.Am)(t("footer.notice.applied-settings"),{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(a.msg,{type:"error"}),[2]}}))}))},s=function(){e(ie(!1))},l=function(){var e,r,i,s,c,l;return(0,o.jsxs)(Le.rs.Group,{children:[(0,o.jsxs)("div",xn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(Le.rs.Label,xn({className:"pr-4 w-full max-w-[300px]"},{children:t("footer.modal.lock-microphone")}),void 0),(0,o.jsx)(Le.rs,xn({checked:null!==(e=null===n||void 0===n?void 0:n.lock_microphone)&&void 0!==e&&e,onChange:function(e){return a(e,"mic")},className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_microphone)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",xn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(Le.rs.Label,xn({className:"pr-4 w-full max-w-[300px]"},{children:t("footer.modal.lock-webcams")}),void 0),(0,o.jsx)(Le.rs,xn({checked:null!==(r=null===n||void 0===n?void 0:n.lock_webcam)&&void 0!==r&&r,onChange:function(e){return a(e,"webcam")},className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_webcam)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",xn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(Le.rs.Label,xn({className:"pr-4 w-full max-w-[300px]"},{children:t("footer.modal.lock-screen-sharing")}),void 0),(0,o.jsx)(Le.rs,xn({checked:null!==(i=null===n||void 0===n?void 0:n.lock_screen_sharing)&&void 0!==i&&i,onChange:function(e){return a(e,"screenShare")},className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_screen_sharing)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",xn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(Le.rs.Label,xn({className:"pr-4 w-full max-w-[300px]"},{children:t("footer.modal.lock-chat")}),void 0),(0,o.jsx)(Le.rs,xn({checked:null!==(s=null===n||void 0===n?void 0:n.lock_chat)&&void 0!==s&&s,onChange:function(e){return a(e,"chat")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",xn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(Le.rs.Label,xn({className:"pr-4 w-full max-w-[300px]"},{children:t("footer.modal.lock-send-message")}),void 0),(0,o.jsx)(Le.rs,xn({checked:null!==(c=null===n||void 0===n?void 0:n.lock_chat_send_message)&&void 0!==c&&c,onChange:function(e){return a(e,"sendChatMsg")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_send_message)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",xn({className:"flex items-center mb-4"},{children:[(0,o.jsx)(Le.rs.Label,xn({className:"pr-4 w-full max-w-[300px]"},{children:t("footer.modal.lock-chat-file-share")}),void 0),(0,o.jsx)(Le.rs,xn({checked:null!==(l=null===n||void 0===n?void 0:n.lock_chat_file_share)&&void 0!==l&&l,onChange:function(e){return a(e,"chatFile")},className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat((null===n||void 0===n?void 0:n.lock_chat_file_share)?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0)]},void 0)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Le.uT,xn({appear:!0,show:!0,as:i.Fragment},{children:(0,o.jsx)(Le.Vq,xn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:s},{children:(0,o.jsxs)("div",xn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Le.uT.Child,xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",xn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Le.uT.Child,xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",xn({className:"inline-block w-full h-96 max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",xn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return s()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,xn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("footer.modal.lock-settings-title")}),void 0),(0,o.jsx)("hr",{},void 0),(0,o.jsx)("div",xn({className:"mt-6"},{children:l()}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)},void 0)};var jn=n(8966),Sn=function(){return Sn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Sn.apply(this,arguments)},kn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Nn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_n=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Tn=(0,De.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e}));const Pn=function(){var e=Pe(),t=(0,Ce.$)().t,n=Oe(Tn),r=_n((0,i.useState)("youtube"),2),a=r[0],s=r[1],l=_n((0,i.useState)(!1),2),u=l[0],d=l[1],f=_n((0,i.useState)(""),2),v=f[0],p=f[1],m=_n((0,i.useState)(""),2),h=m[0],x=m[1],b={youtube:"rtmp://a.rtmp.youtube.com/live2/",facebook:"rtmps://live-api-s.facebook.com:443/rtmp/"};(0,i.useEffect)((function(){d("other"===a)}),[a]);var y=function(){e(ae(!1))},g=function(n){return void 0===n&&(n=!1),kn(void 0,void 0,void 0,(function(){var r,o,i;return Nn(this,(function(a){switch(a.label){case 0:return e(ae(!1)),n?(r={task:"stop-rtmp",sid:Te.getState().session.currentRoom.sid},[4,qt("rtmp",r)]):[2];case 1:return o=a.sent(),i=t("footer.notice.rtmp-ending"),o.status||(i=o.msg),(0,c.Am)(t(i),{toastId:"rtmp-status",type:"info"}),[2]}}))}))};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Le.uT,Sn({appear:!0,show:n,as:i.Fragment},{children:(0,o.jsx)(Le.Vq,Sn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:g},{children:(0,o.jsxs)("div",Sn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Le.uT.Child,Sn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",Sn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Le.uT.Child,Sn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Sn({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Sn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return g()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,Sn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:t("footer.modal.rtmp-close-confirm")}),void 0),(0,o.jsx)("div",Sn({className:"mt-2"},{children:(0,o.jsx)("p",Sn({className:"text-sm text-gray-500"},{children:t("footer.modal.rtmp-close-msg")}),void 0)}),void 0),(0,o.jsxs)("div",Sn({className:"mt-4"},{children:[(0,o.jsx)("button",Sn({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!0)}},{children:t("ok")}),void 0),(0,o.jsx)("button",Sn({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return g(!1)}},{children:t("close")}),void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Le.uT,Sn({appear:!0,show:!n,as:i.Fragment},{children:(0,o.jsx)(Le.Vq,Sn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:y},{children:(0,o.jsxs)("div",Sn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Le.uT.Child,Sn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",Sn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Le.uT.Child,Sn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Sn({className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Sn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return y()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,Sn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 text-left mb-2"},{children:t("footer.modal.rtmp-title")}),void 0),(0,o.jsx)("hr",{},void 0),(0,o.jsx)("div",Sn({className:"mt-6"},{children:(0,o.jsxs)("form",Sn({action:"#",method:"POST",onSubmit:function(n){return function(n){return kn(void 0,void 0,void 0,(function(){var r,o,i,s;return Nn(this,(function(l){switch(l.label){case 0:return n.preventDefault(),"other"===a&&(0,jn.isEmpty)(v)||(0,jn.isEmpty)(h)?[2]:(r="",r="other"===a?v:b[a],(0,jn.isURL)(r,{protocols:["rtmp","rtmps"]})?(o={task:"start-rtmp",sid:Te.getState().session.currentRoom.sid,rtmp_url:r+"/"+h},[4,qt("rtmp",o)]):[2]);case 1:return i=l.sent(),s="footer.notice.rtmp-starting",i.status||(s=i.msg),(0,c.Am)(t(s),{toastId:"rtmp-status",type:"info"}),e(ae(!1)),[2]}}))}))}(n)}},{children:[(0,o.jsx)("div",Sn({className:"s"},{children:(0,o.jsxs)("div",Sn({className:"grid grid-cols-6 gap-6"},{children:[(0,o.jsxs)("div",Sn({className:"col-span-6 sm:col-span-3"},{children:[(0,o.jsx)("label",Sn({htmlFor:"provider",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-select-provider")}),void 0),(0,o.jsxs)("select",Sn({id:"provider",name:"provider",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:function(e){return s(e.currentTarget.value)},value:a},{children:[(0,o.jsx)("option",Sn({value:"youtube"},{children:"YouTube"}),void 0),(0,o.jsx)("option",Sn({value:"facebook"},{children:"Facebook"}),void 0),(0,o.jsx)("option",Sn({value:"other"},{children:"Other"}),void 0)]}),void 0)]}),void 0),u?(0,o.jsxs)("div",Sn({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",Sn({htmlFor:"stream-url",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-server-url")}),void 0),(0,o.jsx)("input",{type:"text",name:"stream-url",id:"stream-url",value:v,onChange:function(e){return p(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"},void 0)]}),void 0):null,(0,o.jsxs)("div",Sn({className:"col-span-6 sm:col-span-4"},{children:[(0,o.jsx)("label",Sn({htmlFor:"stream-key",className:"block text-sm font-medium text-gray-700"},{children:t("footer.modal.rtmp-stream-key")}),void 0),(0,o.jsx)("input",{type:"text",name:"stream-key",id:"stream-key",value:h,onChange:function(e){return x(e.currentTarget.value)},className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md h-10 border border-solid border-black/50"},void 0)]}),void 0)]}),void 0)}),void 0),(0,o.jsx)("div",Sn({className:"px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4"},{children:(0,o.jsx)("button",Sn({type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{children:t("footer.modal.rtmp-start-broadcast")}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)},void 0)};var On=function(){return On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},On.apply(this,arguments)},An=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Rn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Cn=(0,De.P1)((function(e){return e.bottomIconsActivity.showLockSettingsModal}),(function(e){return e})),En=(0,De.P1)((function(e){return e.session.isActiveRtmpBroadcasting}),(function(e){return e})),In=(0,De.P1)((function(e){return e.bottomIconsActivity.showRtmpModal}),(function(e){return e}));const Fn=function(){var e=Te.getState().session,t=Pe(),n=(0,Ce.$)().t,r=Oe(Cn),i=Oe(In),a=Oe(En);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",On({className:"menu relative"},{children:(0,o.jsx)(Le.v2,{children:function(r){var i=r.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Le.v2.Button,On({className:"h-[35px] lg:h-[40px] w-[35px] lg:w-[40px] rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-menu-horizontal text-brandColor1 text-[3px] lg:text-[5px]"},void 0)}),void 0),(0,o.jsx)(Le.uT,On({show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Le.v2.Items,On({static:!0,className:"origin-bottom-left sm:-left-20 right-0 sm:right-auto z-[9999] absolute mt-2 w-56 bottom-[48px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",On({className:"py-1",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:(0,o.jsxs)("button",On({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){t(ae(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-broadcasting text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),n(a?"footer.icons.stop-rtmp-broadcasting":"footer.icons.start-rtmp-broadcasting")]}),void 0)},void 0)}),void 0),(0,o.jsx)("div",On({className:"py-1",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:(0,o.jsxs)("button",On({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){return An(void 0,void 0,void 0,(function(){var t,r;return Rn(this,(function(o){switch(o.label){case 0:return t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:"all",muted:!0},[4,qt("muteUnmuteTrack",t)];case 1:return(r=o.sent()).status?(0,c.Am)(n("footer.notice.muted-all-microphone"),{toastId:"asked-status",type:"info"}):(0,c.Am)(n(r.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))}},{children:[(0,o.jsx)("i",{className:"pnm-mic-mute text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),n("footer.menus.mute-all-users")]}),void 0)},void 0)}),void 0),(0,o.jsx)("div",On({className:"py-1",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:(0,o.jsxs)("button",On({className:"text-gray-700 dark:text-gray-400 rounded group flex items-center py-1 lg:py-2 px-4 text-xs lg:text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){t(ie(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-lock text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),n("footer.menus.room-lock-settings")]}),void 0)},void 0)}),void 0)]}),void 0)}),void 0)]},void 0)}},void 0)}),void 0)," ",r?(0,o.jsx)(wn,{},void 0):null," ",i?(0,o.jsx)(Pn,{},void 0):null]},void 0)};var Mn=function(){return Mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mn.apply(this,arguments)};const Dn=i.memo((function(e){var t,n,r=e.currentRoom,i=null===(n=null===(t=Te.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin;return(0,o.jsx)("footer",Mn({id:"main-footer",className:"h-[55px] lg:h-[70px] px-4 shadow-footer flex items-center justify-between"},{children:(0,o.jsxs)("div",Mn({className:"footer-inner flex items-center justify-between w-full"},{children:[(0,o.jsxs)("div",Mn({className:"footer-left w-52 flex items-center"},{children:[(0,o.jsx)(ut,{currentRoom:r},void 0),(0,o.jsx)(Et,{currentRoom:r},void 0)]}),void 0),(0,o.jsxs)("div",Mn({className:"footer-middle flex items-center"},{children:[(0,o.jsx)(Bt,{},void 0),(0,o.jsx)(Dt,{},void 0),(0,o.jsx)(un,{currentRoom:r},void 0),(0,o.jsx)(tn,{currentRoom:r},void 0),(0,o.jsx)(hn,{},void 0),i?(0,o.jsx)(Fn,{},void 0):null]}),void 0),(0,o.jsx)("div",{className:"footer-right w-52 hidden sm:flex items-center"},void 0)]}),void 0)}),void 0)}));var Un=function(){return Un=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Un.apply(this,arguments)};const Ln=i.memo((function(e){var t,n,r=e.onOpenAlert,i=null===(n=null===(t=Te.getState().session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.is_admin,a=Pe(),s=(0,Ce.$)().t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Le.v2.Items,Un({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)("div",Un({className:"py-1",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:(0,o.jsxs)("button",Un({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){a(je(!0))}},{children:[(0,o.jsx)("i",{className:"pnm-settings text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),s("header.menus.settings")]}),void 0)},void 0)}),void 0),(0,o.jsx)("div",Un({className:"py-1",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:(0,o.jsxs)("button",Un({className:"text-gray-700 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in hover:text-brandColor2",onClick:function(){r("logout")}},{children:[(0,o.jsx)("i",{className:"pnm-logout text-brandColor1 mr-2 transition ease-in group-hover:text-brandColor2"},void 0),s("header.menus.logout")]}),void 0)},void 0)}),void 0),i?(0,o.jsx)("div",Un({className:"py-1",role:"none"},{children:(0,o.jsx)(Le.v2.Item,{children:(0,o.jsxs)("button",Un({className:"text-red-900 rounded group flex items-center py-2 px-4 text-sm text-left w-full transition ease-in",onClick:function(){r("end Room")}},{children:[(0,o.jsx)("i",{className:"pnm-call text-red-900 mr-2 transition ease-in "},void 0),s("header.menus.end")]}),void 0)},void 0)}),void 0):null]}),void 0)},void 0)}));var Vn=function(){return Vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vn.apply(this,arguments)},Bn=(0,De.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),Wn=(0,De.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Gn=function(){var e=Pe(),t=(0,Ce.$)().t,n=Oe(Bn),r=Oe(Wn),i=function(){e(Se(!n))},a=function(){e(ke(!r))};return(0,o.jsx)("div",Vn({className:"mt-2"},{children:(0,o.jsxs)(Le.rs.Group,{children:[(0,o.jsxs)("div",Vn({className:"flex items-center mb-2"},{children:[(0,o.jsx)(Le.rs.Label,Vn({className:"pr-4 w-full max-w-[190px] lg:max-w-[200px]"},{children:t("header.room-settings.show-webcams")}),void 0),(0,o.jsx)(Le.rs,Vn({checked:n,onChange:i,className:"".concat(n?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0),(0,o.jsxs)("div",Vn({className:"flex items-center"},{children:[(0,o.jsx)(Le.rs.Label,Vn({className:"pr-4 w-full max-w-[190px] lg:max-w-[200px]"},{children:t("header.room-settings.show-screen-share")}),void 0),(0,o.jsx)(Le.rs,Vn({checked:r,onChange:a,className:"".concat(r?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(r?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0)]},void 0)}),void 0)};var zn=function(){return zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zn.apply(this,arguments)},Hn=(0,De.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const $n=function(){var e=Pe(),t=(0,Ce.$)().t,n=Oe(Hn),r=function(){e(Ne(!n))};return(0,o.jsx)("div",zn({className:"mt-2"},{children:(0,o.jsx)(Le.rs.Group,{children:(0,o.jsxs)("div",zn({className:"flex items-center mb-2"},{children:[(0,o.jsx)(Le.rs.Label,zn({className:"pr-4 w-full max-w-[190px] lg:max-w-[200px]"},{children:t("header.room-settings.allow-audio-notification")}),void 0),(0,o.jsx)(Le.rs,zn({checked:n,onChange:r,className:"".concat(n?"bg-blue-600":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},{children:(0,o.jsx)("span",{className:"".concat(n?"translate-x-6":"translate-x-1"," inline-block w-4 h-4 transform bg-white rounded-full transition-transform")},void 0)}),void 0)]}),void 0)},void 0)}),void 0)};var qn=function(){return qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qn.apply(this,arguments)};const Jn=function(){var e=(0,Ce.$)(),t=e.t,n=e.i18n,r=[{code:"en",text:"English"},{code:"zh-CN",text:"Chinese simplified"}];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",qn({className:"s"},{children:(0,o.jsx)("div",qn({className:"grid grid-cols-6 gap-6"},{children:(0,o.jsxs)("div",qn({className:"col-span-6 sm:col-span-3"},{children:[(0,o.jsx)("label",qn({htmlFor:"language",className:"block text-sm font-medium text-gray-700"},{children:t("header.room-settings.language")}),void 0),(0,o.jsx)("select",qn({id:"language",name:"language",value:n.languages[0],onChange:function(e){return n.changeLanguage(e.target.value)},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{children:r.map((function(e){var t=e.code,n=e.text;return(0,o.jsx)("option",qn({value:t},{children:n}),t)}))}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)};var Kn=function(){return Kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kn.apply(this,arguments)},Yn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Qn=(0,De.P1)((function(e){return e.roomSettings.isShowRoomSettingsModal}),(function(e){return e}));const Zn=function(){var e=Pe(),t=(0,Ce.$)().t,n=Oe(Qn),r=Yn((0,i.useState)({"header.room-settings.application":[{id:1,elm:(0,o.jsx)(Jn,{},void 0)}],"header.room-settings.data-savings":[{id:1,elm:(0,o.jsx)(Gn,{},void 0)}],"header.room-settings.notifications":[{id:1,elm:(0,o.jsx)($n,{},void 0)}]}),1)[0],a=function(){e(je(!1))};var s=function(){return(0,o.jsx)("div",Kn({className:"max-w-full"},{children:(0,o.jsxs)(Le.OK.Group,Kn({vertical:!0},{children:[(0,o.jsx)(Le.OK.List,Kn({className:"flex p-1 space-x-1 bg-blue-900 rounded-xl"},{children:Object.keys(r).map((function(e){return(0,o.jsx)(Le.OK,Kn({className:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}("w-full py-1 text-sm leading-5 font-medium text-blue-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")}},{children:t(e)}),e)}))}),void 0),(0,o.jsx)(Le.OK.Panels,Kn({className:"mt-2"},{children:Object.values(r).map((function(e,t){return(0,o.jsx)(Le.OK.Panel,Kn({className:"bg-white rounded-xl p-3"},{children:(0,o.jsx)("ul",{children:e.map((function(e){return(0,o.jsx)("li",{children:e.elm},e.id)}))},void 0)}),t)}))}),void 0)]}),void 0)}),void 0)};return(0,o.jsx)(o.Fragment,{children:n?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Le.uT,Kn({appear:!0,show:n,as:i.Fragment},{children:(0,o.jsx)(Le.Vq,Kn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:a},{children:(0,o.jsxs)("div",Kn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Le.uT.Child,Kn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",Kn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Le.uT.Child,Kn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Kn({className:"inline-block w-full h-96 max-w-lg py-6 px-4 lg:px-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Kn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return a()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,Kn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-2"},{children:t("header.room-settings.title")}),void 0),(0,o.jsx)("hr",{},void 0),(0,o.jsx)("div",Kn({className:"mt-2"},{children:s()}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0):null},void 0)};var Xn=function(){return Xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xn.apply(this,arguments)},er=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},tr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},rr=(0,De.P1)((function(e){return e.session.currentRoom.metadata}),(function(e){return e}));const or=i.memo((function(e){var t,n,r=e.currentRoom,a=Oe(rr),s=(0,Ce.$)().t,l=nr((0,i.useState)(""),2),u=l[0],d=l[1],f=nr((0,i.useState)(!1),2),v=f[0],p=f[1],m=nr((0,i.useState)(""),2),h=m[0],x=m[1],b=nr((0,i.useState)(""),2),y=b[0],g=b[1],w=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets",j=null!==(n=window.CUSTOM_LOGO)&&void 0!==n?n:"".concat(w,"/imgs/plugNmeet-logo.png");(0,i.useEffect)((function(){a&&d(a.room_title)}),[a]);var S=function(e){return void 0===e&&(e=!1),er(void 0,void 0,void 0,(function(){var t,n,o;return tr(this,(function(i){switch(i.label){case 0:return p(!1),e?"logout"!==y?[3,1]:(r.disconnect(),[3,3]):[2];case 1:return"end Room"!==y?[3,3]:(t=Te.getState().session,n={room_id:t.currentRoom.room_id},[4,qt("endRoom",n)]);case 2:(o=i.sent()).status||(0,c.Am)(o.msg,{type:"error"}),i.label=3;case 3:return[2]}}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",Xn({id:"main-header",className:"relative z-[99999] h-[50px] lg:h-[60px] px-4 shadow-header flex items-center justify-between bg-white"},{children:[(0,o.jsx)("img",{className:"absolute top-[-90px] left-[-35px] w-[300px] pointer-events-none",src:"".concat(w,"/imgs/header-before2.png"),alt:"BeforeBG"},void 0),(0,o.jsx)("div",Xn({className:"logo w-28 relative z-20"},{children:(0,o.jsx)("img",{className:window.CUSTOM_LOGO?"h-8":"h-5",src:j,alt:"logo"},void 0)}),void 0),(0,o.jsx)("div",Xn({className:"middle flex-auto relative z-20"},{children:(0,o.jsx)("h2",Xn({className:"text-base text-black leading-[1] text-center"},{children:u}),void 0)}),void 0),(0,o.jsx)("div",Xn({className:"dark w-28 flex items-center justify-end relative z-20 -right-3"},{children:(0,o.jsx)(Le.v2,{children:function(e){var t=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Le.v2.Button,Xn({className:"relative flex-shrink-0 p-2"},{children:(0,o.jsx)("div",Xn({className:"h-5 w-5 rotate-90 "},{children:(0,o.jsx)("i",{className:"pnm-menu-small"},void 0)}),void 0)}),void 0),(0,o.jsx)(Le.uT,Xn({show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Ln,{onOpenAlert:function(e){return function(e){g(e),"logout"===e?x(s("header.menus.alert.logout")):"end Room"===e&&x(s("header.menus.alert.end")),p(!0)}(e)}},void 0)}),void 0)]},void 0)}},void 0)}),void 0),(0,o.jsx)("img",{className:"absolute top-[-105px] right-[-100px] w-[350px] lg:w-[380px] rotate-[156deg] pointer-events-none",src:"".concat(w,"/imgs/header-before2.png"),alt:"BeforeBG"},void 0),v?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Le.uT,Xn({appear:!0,show:v,as:i.Fragment},{children:(0,o.jsx)(Le.Vq,Xn({as:"div",className:"fixed inset-0 z-[9999] overflow-y-auto",onClose:S},{children:(0,o.jsxs)("div",Xn({className:"min-h-screen px-4 text-center"},{children:[(0,o.jsx)(Le.uT.Child,Xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{children:(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0)}),void 0),(0,o.jsx)("span",Xn({className:"inline-block h-screen align-middle","aria-hidden":"true"},{children:"\u200b"}),void 0),(0,o.jsx)(Le.uT.Child,Xn({as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},{children:(0,o.jsxs)("div",Xn({className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl"},{children:[(0,o.jsxs)("button",Xn({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return S()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,Xn({as:"h3",className:"text-lg font-medium leading-6 text-gray-900"},{children:s("header.menus.alert.confirm")}),void 0),(0,o.jsx)("div",Xn({className:"mt-2"},{children:(0,o.jsx)("p",Xn({className:"text-sm text-gray-500"},{children:h}),void 0)}),void 0),(0,o.jsxs)("div",Xn({className:"mt-4"},{children:[(0,o.jsx)("button",Xn({className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return S(!0)}},{children:s("ok")}),void 0),(0,o.jsx)("button",Xn({type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return S(!1)}},{children:s("close")}),void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0):null]}),void 0),(0,o.jsx)(Zn,{},void 0)]},void 0)}));var ir=function(){return ir=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ir.apply(this,arguments)};const ar=function(e){var t=e.participant;return(0,o.jsx)("div",ir({className:"thumb h-[22px] xl:h-[30px] w-[22px] xl:w-[30px] mr-2 rounded-full overflow-hidden bg-[rgba(0,69,131)] flex items-center justify-center text-white text-xs xl:text-sm"},{children:t.metadata.profile_pic?(0,o.jsx)("img",{src:t.metadata.profile_pic,alt:t.name},void 0):(0,o.jsx)(i.Fragment,{children:t.name.slice(0,2).toUpperCase()},void 0)}),void 0)};var sr=function(){return sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sr.apply(this,arguments)};const cr=function(e){var t=e.name,n=e.isCurrentUser;return(0,o.jsxs)("p",sr({className:"text-[11px] xl:text-[13px] text-[#003767]"},{children:[t," ",n?" (me)":null]}),void 0)};var lr=function(){return lr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lr.apply(this,arguments)};const ur=function(e){var t=e.userId,n=Oe((function(e){return _.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",lr({className:"hand mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-raise-hand text-[#ffbd40] text-[8px]"},void 0)}),void 0):null},void 0)};var dr=function(){return dr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},dr.apply(this,arguments)};const fr=function(e){var t=e.userId,n=Oe((function(e){return _.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?n.isMuted?(0,o.jsx)("div",dr({className:"mic muted mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute brand-color2 opacity-50 text-[8px]"},void 0)}),void 0):(0,o.jsx)("div",dr({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color2 opacity-50 text-[8px]"},void 0)}),void 0):null},void 0)};var vr=function(){return vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vr.apply(this,arguments)};const pr=function(e){var t=e.userId,n=Oe((function(e){return _.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.videoTracks)?(0,o.jsx)("div",vr({className:"mic mr-2 cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-webcam brand-color2 opacity-50 text-[8px]"},void 0)}),void 0):null},void 0)};var mr,hr,xr,br=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},yr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},gr=!1,wr=0,jr=!1,Sr=function(){var e=Rr();(hr=new WebSocket(e)).onopen=function(){gr=!0,Ar(),Te.dispatch(W(!0)),xr&&(clearInterval(xr),xr=0,wr=0)},hr.onclose=function(){gr=!1,Te.dispatch(W(!1)),xr||jr||(xr=setInterval((function(){wr>10&&(clearInterval(xr),wr=0),hr=void 0,Sr(),wr++}),2e3))},hr.onerror=function(){console.log("Error in websocket")},hr.onmessage=function(e){kr(e)}},kr=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(n){return void console.log(e.data)}"USER"===t.type?Nr(t.body,t.message_id):"SYSTEM"===t.type&&_r(t)}},Nr=function(e,t){"CHAT"===e.type&&(e.message_id||(e.message_id=t),Te.dispatch(ve(e)))},_r=function(e){switch(e.body.type){case Kt.SEND_CHAT_MSGS:Tr(e);break;case Kt.RENEW_TOKEN:Pr(e);break;case Kt.INFO:case Kt.ALERT:Or(e)}},Tr=function(e){de.selectAll(Te.getState()).filter((function(e){return"system"!==e.from.sid})).slice(-30).map((function(t){return br(void 0,void 0,void 0,(function(){var n,r;return yr(this,(function(o){return n=t,r={type:Jt.USER,body:n,to:e.body.from.sid,room_sid:mr.currentRoom.sid,message_id:""},Er(JSON.stringify(r)),[2]}))}))}))},Pr=function(e){Te.dispatch(I(e.body.msg))},Or=function(e){switch(e.body.type){case Kt.INFO:(0,c.Am)(e.body.msg,{toastId:"info-status",type:"info"});break;case Kt.ALERT:(0,c.Am)(e.body.msg,{toastId:"alert-status",type:"warning"})}},Ar=function(){var e,t,n,r,o=_.selectAll(Te.getState()).filter((function(e){var t;return e.sid!==(null===(t=mr.currenUser)||void 0===t?void 0:t.sid)}));if(o.length){o.sort((function(e,t){return e.joinedAt-t.joinedAt}));var i=o[0],a={type:Jt.SYSTEM,room_sid:mr.currentRoom.sid,message_id:"",to:i.sid,body:{type:Kt.SEND_CHAT_MSGS,from:{sid:null!==(t=null===(e=mr.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=mr.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:""}};Er(JSON.stringify(a))}},Rr=function(){var e,t=new URL(window.PLUG_N_MEET_SERVER_URL),n="ws://";"https:"===t.protocol&&(n="wss://"),e=n+t.host,"/"!==t.pathname&&(e+=t.pathname);var r=mr.token,o=mr.currenUser,i=mr.currentRoom;return e=e+"/ws?token="+r+"&roomSid="+i.sid+"&userSid="+(null===o||void 0===o?void 0:o.sid)+"&roomId="+i.room_id+"&userId="+(null===o||void 0===o?void 0:o.userId)},Cr=function(){return gr},Er=function(e){gr&&(null===hr||void 0===hr||hr.send(e))},Ir=function(){return Ir=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ir.apply(this,arguments)},Fr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Mr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Dr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Ur=function(e){var t,n=e.userId,r=Oe((function(e){return _.selectById(e,n)})),a=Te.getState().session,s=Dr((0,i.useState)("Ask to share Microphone"),2),l=s[0],u=s[1],d=Dr((0,i.useState)(""),2),f=d[0],v=d[1],p=(0,Ce.$)().t;(0,i.useEffect)((function(){0===(null===r||void 0===r?void 0:r.audioTracks)?(u(p("left-panel.menus.items.ask-to-share-microphone")),v("left-panel.menus.items.share-microphone")):(null===r||void 0===r?void 0:r.isMuted)?(u(p("left-panel.menus.items.ask-to-unmute-mic")),v("left-panel.menus.items.unmute-mic")):(null===r||void 0===r?void 0:r.audioTracks)&&(u(p("left-panel.menus.items.mute-mic")),v("mute"))}),[p,null===r||void 0===r?void 0:r.isMuted,null===r||void 0===r?void 0:r.audioTracks]);var m=function(){return Fr(void 0,void 0,void 0,(function(){var e,t,n;return Mr(this,(function(o){switch(o.label){case 0:return e=Te.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,user_id:null===r||void 0===r?void 0:r.userId,muted:!0},[4,qt("muteUnmuteTrack",t)];case 1:return(n=o.sent()).status?(0,c.Am)(p("left-panel.menus.notice.you-have-muted-to",{name:null===r||void 0===r?void 0:r.name}),{toastId:"asked-status",type:"info"}):(0,c.Am)(p(n.msg),{toastId:"asked-status",type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(null===(t=a.currenUser)||void 0===t?void 0:t.userId)!==(null===r||void 0===r?void 0:r.userId)?(0,o.jsx)("div",Ir({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,Ir({onClick:function(){return function(){var e,t,n,o,i;if("mute"!==f){var s={type:Jt.SYSTEM,room_sid:a.currentRoom.sid,message_id:"",to:null===r||void 0===r?void 0:r.sid,body:{type:Kt.INFO,from:{sid:null!==(t=null===(e=a.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(o=null===(n=a.currenUser)||void 0===n?void 0:n.userId)&&void 0!==o?o:""},msg:p("left-panel.menus.notice.asked-you-to",{name:null===(i=a.currenUser)||void 0===i?void 0:i.name})+p(f)}};Er(JSON.stringify(s)),(0,c.Am)(p("left-panel.menus.notice.you-have-asked",{name:null===r||void 0===r?void 0:r.name})+p(f),{toastId:"asked-status",type:"info"})}else m()}()}},{children:function(){return(0,o.jsx)("button",Ir({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:l}),void 0)}}),void 0)}),void 0):null},void 0)};var Lr=function(){return Lr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lr.apply(this,arguments)},Vr=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Br=function(e){var t,n,r=e.userId,a=(0,Ce.$)().t,s=Oe((function(e){return _.selectById(e,r)})),l=null===(t=Te.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,u=Te.getState().session,d=Vr((0,i.useState)("Ask to share Webcam"),2),f=d[0],v=d[1],p=Vr((0,i.useState)(""),2),m=p[0],h=p[1];(0,i.useEffect)((function(){0===(null===s||void 0===s?void 0:s.videoTracks)?(v(a("left-panel.menus.items.ask-to-share-webcam")),h("left-panel.menus.items.share-webcam")):(v(a("left-panel.menus.items.ask-to-stop-webcam")),h("left-panel.menus.items.stop-webcam"))}),[a,null===s||void 0===s?void 0:s.videoTracks]);return(0,o.jsx)(i.Fragment,{children:(null===(n=u.currenUser)||void 0===n?void 0:n.userId)!==(null===s||void 0===s?void 0:s.userId)&&(null===l||void 0===l?void 0:l.allow_webcams)&&!l.admin_only_webcams?(0,o.jsx)("div",Lr({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,Lr({onClick:function(){return function(){var e,t,n,r,o,i={type:Jt.SYSTEM,room_sid:u.currentRoom.sid,message_id:"",to:null===s||void 0===s?void 0:s.sid,body:{type:Kt.INFO,from:{sid:null!==(t=null===(e=u.currenUser)||void 0===e?void 0:e.sid)&&void 0!==t?t:"",userId:null!==(r=null===(n=u.currenUser)||void 0===n?void 0:n.userId)&&void 0!==r?r:""},msg:a("left-panel.menus.notice.asked-you-to",{name:null===(o=u.currenUser)||void 0===o?void 0:o.name})+a(m)}};Er(JSON.stringify(i)),(0,c.Am)(a("left-panel.menus.notice.you-have-asked",{name:null===s||void 0===s?void 0:s.name})+a(m),{toastId:"asked-status",type:"info"})}()}},{children:function(){return(0,o.jsx)("button",Lr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:f}),void 0)}}),void 0)}),void 0):null},void 0)};var Wr=function(){return Wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Wr.apply(this,arguments)},Gr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},zr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Hr=function(e){var t=e.userId,n=Oe((function(e){return _.selectById(e,t)})),r=Pe(),a=(0,Ce.$)().t;return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.metadata.raised_hand)?(0,o.jsx)("div",Wr({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,Wr({onClick:function(){return Gr(void 0,void 0,void 0,(function(){var e,t,o;return zr(this,(function(i){switch(i.label){case 0:return e=Te.getState().session,t={sid:e.currentRoom.sid,room_id:e.currentRoom.room_id,msg_type:Kt.OTHER_USER_LOWER_HAND,msg:null===n||void 0===n?void 0:n.userId},[4,qt("dataMessage",t)];case 1:return(o=i.sent()).status?r(te(!1)):(0,c.Am)(a(o.msg),{type:"error"}),[2]}}))}))}},{children:function(){return(0,o.jsx)("button",Wr({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:a("footer.icons.lower-hand")}),void 0)}}),void 0)}),void 0):null},void 0)};var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$r.apply(this,arguments)},qr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Jr=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Kr=function(e){var t,n=e.userId,r=null===(t=Te.getState().session.currentRoom.metadata)||void 0===t?void 0:t.room_features,a=(0,Ce.$)().t,s=Oe((function(e){return _.selectById(e,n)})),l=function(e){return qr(void 0,void 0,void 0,(function(){var t,n,r,o,i,l;return Jr(this,(function(u){switch(u.label){case 0:switch(t=s.metadata,n=Te.getState().session,r=e,o="lock",e){case"mic":o=(null===t||void 0===t?void 0:t.lock_settings.lock_microphone)?"unlock":"lock";break;case"webcam":o=(null===t||void 0===t?void 0:t.lock_settings.lock_webcam)?"unlock":"lock";break;case"screenShare":o=(null===t||void 0===t?void 0:t.lock_settings.lock_screen_sharing)?"unlock":"lock";break;case"chat":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat)?"unlock":"lock";break;case"sendChatMsg":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_send_message)?"unlock":"lock";break;case"chatFile":o=(null===t||void 0===t?void 0:t.lock_settings.lock_chat_file_share)?"unlock":"lock"}return i={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:null===s||void 0===s?void 0:s.userId,service:r,direction:o},[4,qt("updateLockSettings",i)];case 1:return(l=u.sent()).status?(0,c.Am)(a("left-panel.menus.notice.applied-new-setting"),{toastId:"lock-setting-status",type:"info"}):(0,c.Am)(a(l.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",$r({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,$r({onClick:function(){return l("mic")}},{children:function(){return(0,o.jsx)("button",$r({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_microphone)?a("left-panel.menus.items.unlock-microphone"):a("left-panel.menus.items.lock-microphone")}),void 0)}}),void 0)}),void 0),(null===r||void 0===r?void 0:r.allow_webcams)&&!(null===r||void 0===r?void 0:r.admin_only_webcams)?(0,o.jsx)("div",$r({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,$r({onClick:function(){return l("webcam")}},{children:function(){return(0,o.jsx)("button",$r({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_webcam)?a("left-panel.menus.items.unlock-webcam"):a("left-panel.menus.items.lock-webcam")}),void 0)}}),void 0)}),void 0):null,(null===r||void 0===r?void 0:r.allow_screen_share)?(0,o.jsx)("div",$r({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,$r({onClick:function(){return l("screenShare")}},{children:function(){return(0,o.jsx)("button",$r({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_screen_sharing)?a("left-panel.menus.items.unlock-screen-sharing"):a("left-panel.menus.items.lock-screen-sharing")}),void 0)}}),void 0)}),void 0):null,(null===r||void 0===r?void 0:r.chat_features.allow_chat)?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("div",$r({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,$r({onClick:function(){return l("chat")}},{children:function(){return(0,o.jsx)("button",$r({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat)?a("left-panel.menus.items.unlock-chat"):a("left-panel.menus.items.lock-chat")}),void 0)}}),void 0)}),void 0),(0,o.jsx)("div",$r({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,$r({onClick:function(){return l("sendChatMsg")}},{children:function(){return(0,o.jsx)("button",$r({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat_send_message)?a("left-panel.menus.items.unlock-send-chat-message"):a("left-panel.menus.items.lock-send-chat-message")}),void 0)}}),void 0)}),void 0),r.chat_features.allow_file_upload?(0,o.jsx)("div",$r({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,$r({onClick:function(){return l("chatFile")}},{children:function(){return(0,o.jsx)("button",$r({className:"text-gray-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-brandColor1 hover:text-white"},{children:(null===s||void 0===s?void 0:s.metadata.lock_settings.lock_chat_file_share)?a("left-panel.menus.items.unlock-send-file"):a("left-panel.menus.items.lock-send-file")}),void 0)}}),void 0)}),void 0):null]},void 0):null]},void 0)},void 0)};var Yr=function(){return Yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yr.apply(this,arguments)};const Qr=function(e){var t=e.userId,n=e.onOpenAlert,r=(0,Ce.$)().t;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(i.Fragment,{children:(0,o.jsx)("div",Yr({className:"",role:"none"},{children:(0,o.jsx)(Le.v2.Item,Yr({onClick:function(){n(t)}},{children:function(){return(0,o.jsx)("button",Yr({className:"text-red-900 group flex rounded-md items-center text-left w-full px-2 py-[0.4rem] text-xs lg:text-sm transition ease-in hover:bg-red-400 hover:text-white"},{children:r("left-panel.menus.items.remove-participant")}),void 0)}}),void 0)}),void 0)},void 0)},void 0)};var Zr=function(){return Zr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zr.apply(this,arguments)},Xr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},eo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},to=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const no=function(e){var t=e.userId,n=e.name,r=to((0,i.useState)(!1),2),a=r[0],s=r[1],l=(0,Ce.$)().t,u=function(e){e===t&&s(!0)},d=function(e){return void 0===e&&(e=!1),Xr(void 0,void 0,void 0,(function(){var n,r,o;return eo(this,(function(i){switch(i.label){case 0:return s(!1),e?(n=Te.getState().session,r={sid:n.currentRoom.sid,room_id:n.currentRoom.room_id,user_id:t},[4,qt("removeParticipant",r)]):[2];case 1:return(o=i.sent()).status?(0,c.Am)(l("left-panel.menus.notice.participant-removed"),{toastId:"user-remove-status",type:"info"}):(0,c.Am)(l(o.msg),{type:"error"}),[2]}}))}))};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(Le.v2,{children:function(e){var n=e.open;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Le.v2.Button,Zr({className:"relative flex-shrink-0 mt-2"},{children:(0,o.jsx)("i",{className:"pnm-menu-small brand-color1 opacity-50"},void 0)}),void 0),(0,o.jsx)(Le.uT,Zr({show:n,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsxs)(Le.v2.Items,Zr({static:!0,className:"origin-top-right z-10 absolute right-0 mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100 focus:outline-none"},{children:[(0,o.jsx)(Ur,{userId:t},void 0),(0,o.jsx)(Br,{userId:t},void 0),(0,o.jsx)(Hr,{userId:t},void 0),(0,o.jsx)(Kr,{userId:t},void 0),(0,o.jsx)(Qr,{onOpenAlert:u,userId:t},void 0)]}),void 0)}),void 0)]},void 0)}},void 0),(0,o.jsx)(Le.uT,Zr({show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0"},{children:(0,o.jsx)(Le.Vq,Zr({open:a,onClose:function(){return d()},className:"remove-participants-popup fixed z-[99999] inset-0 overflow-y-auto"},{children:(0,o.jsxs)("div",Zr({className:"flex items-center justify-center min-h-screen"},{children:[(0,o.jsx)(Le.Vq.Overlay,{className:"fixed inset-0 bg-black opacity-30"},void 0),(0,o.jsxs)("div",Zr({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-4 lg:px-6 py-12 lg:py-14"},{children:[(0,o.jsxs)("button",Zr({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return d()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)(Le.Vq.Title,Zr({className:"mb-4 md:mb-6 text-sm"},{children:l("left-panel.menus.notice.confirm",{name:n})}),void 0),(0,o.jsx)("button",Zr({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-white bg-red-600 mr-4 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return d(!0)}},{children:l("left-panel.menus.notice.remove")}),void 0),(0,o.jsx)("button",Zr({className:"inline-flex justify-center px-4 py-2 text-xs md:text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){return d(!1)}},{children:l("cancel")}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0)]},void 0)},void 0)};var ro=function(){return ro=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ro.apply(this,arguments)};const oo=function(e){var t,n=e.participant,r=Te.getState().session.currenUser;return(0,o.jsx)("li",ro({className:"mb-3 w-full list-none"},{children:(0,o.jsxs)("div",ro({className:"flex items-center justify-between"},{children:[(0,o.jsxs)("div",ro({className:"left flex items-center "},{children:[(0,o.jsx)(ar,{participant:n},void 0),(0,o.jsx)(cr,{name:n.name,isCurrentUser:(null===r||void 0===r?void 0:r.userId)===n.userId},void 0)]}),void 0),(0,o.jsxs)("div",ro({className:"right ml-2 flex-auto flex items-center justify-end"},{children:[(0,o.jsx)(ur,{userId:n.userId},void 0),(0,o.jsx)(fr,{userId:n.userId},void 0),(0,o.jsx)(pr,{userId:n.userId},void 0),(null===(t=null===r||void 0===r?void 0:r.metadata)||void 0===t?void 0:t.is_admin)&&r.userId!==n.userId?(0,o.jsx)(no,{userId:n.userId,name:n.name},void 0):null]}),void 0)]}),void 0)}),void 0)};var io=function(){return io=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},io.apply(this,arguments)};const ao=i.memo((function(){var e=Oe(_.selectAll),t=(0,Ce.$)().t;return(0,o.jsx)("div",io({id:"main-left-panel",className:"participants-wrapper scrollBar relative z-10 left-0 top-0 h-full w-[200px] xl:w-[270px] px-2 xl:px-4 pt-2 xl:pt-5 overflow-auto multi-gradient"},{children:(0,o.jsxs)("div",io({className:"inner-wrapper relative z-20"},{children:[(0,o.jsx)("div",io({className:"top flex items-center justify-between font-medium mb-3 xl:mb-5"},{children:(0,o.jsx)("p",io({className:"text-sm text-black"},{children:t("left-panel.participants",{total:e.length})}),void 0)}),void 0),(0,o.jsx)("div",io({className:"all-participants-wrap"},{children:function(){var t,n,r,i,a,s,c,l=Te.getState().session,u=null===(t=l.currenUser)||void 0===t?void 0:t.userId,d=null!==(i=null===(r=null===(n=l.currentRoom.metadata)||void 0===n?void 0:n.room_features)||void 0===r?void 0:r.allow_view_other_users_list)&&void 0!==i&&i,f=null!==(c=null===(s=null===(a=l.currenUser)||void 0===a?void 0:a.metadata)||void 0===s?void 0:s.is_admin)&&void 0!==c&&c;return e.map((function(e){if(f||d||e.metadata.is_admin||u===e.userId)return(0,o.jsx)(oo,{participant:e},e.sid)}))}()}),void 0)]}),void 0)}),void 0)}));var so=function(){return so=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},so.apply(this,arguments)};const co=function(e){var t=e.participant,n=e.from;return(0,o.jsx)("div",so({className:"avatar flex items-center justify-center text-white h-8 w-8 overflow-hidden rounded-full shadow-header bg-brandColor1"},{children:function(){var e;if(null===(e=null===t||void 0===t?void 0:t.metadata)||void 0===e?void 0:e.profile_pic)return(0,o.jsx)("img",{src:null===t||void 0===t?void 0:t.metadata.profile_pic,alt:t.name},void 0);var r=n.name;return(null===t||void 0===t?void 0:t.name)&&(r=null===t||void 0===t?void 0:t.name),(0,o.jsx)(i.Fragment,{children:null===r||void 0===r?void 0:r.slice(0,2).toUpperCase()},void 0)}()}),void 0)};var lo=function(){return lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lo.apply(this,arguments)};const uo=i.memo((function(e){var t=e.body,n=e.currentUser,r=Oe((function(e){return _.selectById(e,t.from.userId)})),a=(0,Ce.$)().t;return(0,o.jsx)("div",lo({className:"message-item mb-2 xl:mb-3"},{children:(0,o.jsx)("div",lo({className:"wrapper flex "},{children:"system"===t.from.userId?(0,o.jsx)("div",lo({className:"content w-[calc(100%)] pt-2 system mb-2"},{children:(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}},void 0)}),void 0):(null===n||void 0===n?void 0:n.userId)===t.from.userId?(0,o.jsxs)("div",lo({className:"content me w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsx)("p",lo({className:"name pl-2 text-sm pb-1"},{children:a("right-panel.you")}),void 0),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}},void 0)]}),void 0):(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(co,{participant:r,from:t.from},void 0),(0,o.jsxs)("div",lo({className:"content w-[calc(100%-2rem)] pt-2"},{children:[(0,o.jsxs)("p",lo({className:"name pl-2 text-sm pb-1"},{children:[t.from.name?t.from.name:null===r||void 0===r?void 0:r.name," ",(0,o.jsx)("span",lo({style:{fontSize:"10px"}},{children:r?null:" (offline)"}),void 0)]}),void 0),(0,o.jsx)("p",{className:"message-content max-w-fit bg-white shadow-footer text-xs",dangerouslySetInnerHTML:{__html:t.msg}},void 0)]}),void 0)]},void 0)}),void 0)}),void 0)}));var fo=function(){return fo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fo.apply(this,arguments)},vo=(0,De.P1)((function(e){return e.session.currenUser}),(function(e){return e}));const po=function(){var e=(0,i.useRef)(null),t=Oe(de.selectAll),n=Oe(vo);(0,i.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}));return(0,o.jsx)("div",fo({className:"pb-3",ref:e},{children:t.map((function(e){var t=e;return(0,o.jsx)(uo,{body:t,currentUser:n},t.message_id)}))}),void 0)};var mo=n(1036),ho=n.n(mo),xo=n(5342),bo=n.n(xo),yo=function(){return yo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yo.apply(this,arguments)},go=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const wo=function(e){var t=e.isChatServiceReady,n=e.lockSendFile,r=e.currentRoom,a=(0,i.useRef)(null),s=i.useRef(null),l=go((0,i.useState)(!1),2),u=l[0],d=l[1],f=(0,Ce.$)().t,v=function(e,t){var n,r="",o=new(bo())({target:window.PLUG_N_MEET_SERVER_URL+"/api/fileUpload",uploadMethod:"POST",query:{sid:e.currentRoom.sid,roomId:e.currentRoom.room_id,userId:null===(n=e.currenUser)||void 0===n?void 0:n.userId,resumable:!0},headers:{Authorization:e.token}});o.on("fileAdded",(function(e){r=e.fileName,o.isUploading()||(d(!0),o.upload())})),o.on("fileSuccess",(function(e,t){var n=JSON.parse(t);d(!1),setTimeout((function(){var e;c.Am.done(null!==(e=s.current)&&void 0!==e?e:"")}),300),n.status&&(p(n.filePath,n.fileName),(0,c.Am)(f("right-panel.file-upload-success"),{type:c.Am.TYPE.SUCCESS}))})),o.on("fileError",(function(e,t){var n=JSON.parse(t);d(!1),setTimeout((function(){var e;c.Am.done(null!==(e=s.current)&&void 0!==e?e:"")}),300),(0,c.Am)(f(n.msg),{type:c.Am.TYPE.ERROR})})),o.on("uploadStart",(function(){s.current=(0,c.Am)(f("right-panel.uploading-file",{fileName:r}),{closeButton:!1,progress:0})})),o.on("fileProgress",(function(e){var t,n=e.progress(!1);c.Am.update(null!==(t=s.current)&&void 0!==t?t:"",{progress:Number(n)})})),o.addFiles(t)},p=function(e,t){if(Cr()){var n='<a href="'.concat(window.PLUG_N_MEET_SERVER_URL+"/download/chat/"+e,'" target="_blank">').concat(t,"</a>"),o={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:r.localParticipant.sid,userId:r.localParticipant.identity,name:r.localParticipant.name},msg:n},i={type:Jt.USER,room_sid:r.sid,message_id:"",body:o};Er(JSON.stringify(i))}};return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)("input",{type:"file",id:"chat-file",ref:a,style:{display:"none"},onChange:function(e){return function(e){var t=e.target.files;if(t.length){var n=Te.getState().session;v(n,t)}}(e)}},void 0),(0,o.jsx)("button",yo({disabled:!t||n||u,onClick:function(){return function(){var e;u||null===(e=a.current)||void 0===e||e.click()}()},className:"w-4 h-6 px-2"},{children:(0,o.jsx)("i",{className:"pnm-attachment brand-color1 text-[20px] opacity-50"},void 0)}),void 0)]},void 0)},void 0)};var jo=function(){return jo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jo.apply(this,arguments)},So=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ko=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},No=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},_o=(0,De.P1)((function(e){return e.session.isChatServiceReady}),(function(e){return e})),To=(0,De.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_send_message}),(function(e){return e})),Po=(0,De.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat_file_share}),(function(e){return e}));const Oo=function(e){var t=e.currentRoom,n=Oe(_o),r=Oe(To),a=Oe(Po),s=(0,Ce.$)().t,c=No((0,i.useState)(!1),2),l=c[0],u=c[1],d=No((0,i.useState)(!1),2),f=d[0],v=d[1],p=No((0,i.useState)(!0),2),m=p[0],h=p[1],x=No((0,i.useState)(""),2),b=x[0],y=x[1];(0,i.useEffect)((function(){Te.getState().session.currentRoom.metadata.room_features.chat_features.allow_file_upload||h(!1)}),[]),(0,i.useEffect)((function(){u(!!r),v(!!a)}),[r,a]),(0,i.useEffect)((function(){var e,t,n,o,i,a,s=null===(t=null===(e=Te.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat_send_message,c=null===(o=null===(n=Te.getState().session.currentRoom.metadata)||void 0===n?void 0:n.default_lock_settings)||void 0===o?void 0:o.lock_chat_file_share,l=null===(a=null===(i=Te.getState().session.currenUser)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.is_admin;s&&!l&&!1!==r&&u(!0),c&&!l&&!1!==r&&v(!0)}),[]);var g=function(){return So(void 0,void 0,void 0,(function(){var e,n,r;return ko(this,(function(o){var i;return i=b,e=ho()(i,{allowedTags:["b","i","strong","br"]}),(0,jn.isEmpty)(e)||(n={type:"CHAT",isPrivate:!1,time:"",message_id:"",from:{sid:t.localParticipant.sid,userId:t.localParticipant.identity,name:t.localParticipant.name},msg:e.replace(/\r?\n/g,"<br />")},r={type:Jt.USER,room_sid:t.sid,message_id:"",body:n},Cr()&&(Er(JSON.stringify(r)),y(""))),[2]}))}))};return(0,o.jsxs)("div",jo({className:"flex items-start justify-between h-[4.5rem] p-2"},{children:[(0,o.jsx)("textarea",{name:"message-textarea",id:"message-textarea",className:"w-full bg-white h-14 max-h-14 mt-1 leading-[1.2] rounded-xl py-2 px-4 outline-none text-xs lg:text-sm text-brandColor1/70 placeholder:text-brandColor1/70",value:b,onChange:function(e){return y(e.currentTarget.value)},disabled:!n||l,placeholder:s("right-panel.chat-box-placeholder"),onKeyDown:function(e){return function(e){13==e.keyCode&&0==e.shiftKey&&(e.preventDefault(),g())}(e)}},void 0),(0,o.jsxs)("div",jo({className:"btns"},{children:[(0,o.jsx)("button",jo({disabled:!n||l,onClick:function(){return g()},className:"w-4 h-6 p-2"},{children:(0,o.jsx)("i",{className:"pnm-send brand-color1 text-[20px]"},void 0)}),void 0),m?(0,o.jsx)(wo,{isChatServiceReady:n,lockSendFile:f,currentRoom:t},void 0):null]}),void 0)]}),void 0)};var Ao=function(){return Ao=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ao.apply(this,arguments)},Ro=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Co=(0,De.P1)((function(e){var t,n;return null===(n=null===(t=e.session.currenUser)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.lock_settings.lock_chat}),(function(e){return e}));const Eo=i.memo((function(e){var t=e.currentRoom,n=e.isRecorder,r=Oe(Co),a=Ro((0,i.useState)(!1),2),s=a[0],c=a[1];return(0,i.useEffect)((function(){var e,t,n,o,i=null===(t=null===(e=Te.getState().session.currentRoom.metadata)||void 0===e?void 0:e.default_lock_settings)||void 0===t?void 0:t.lock_chat,a=null===(o=null===(n=Te.getState().session.currenUser)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.is_admin;i&&!a&&!1!==r&&c(!1)}),[]),(0,i.useEffect)((function(){n&&c(!1)}),[n]),(0,i.useEffect)((function(){n||c(!r)}),[r,n]),(0,o.jsxs)("div",Ao({id:"main-right-panel",className:"h-[calc(100%)]"},{children:[(0,o.jsx)("div",Ao({className:"h-[calc(100%)] MessageModule-wrapper scrollBar relative z-10 right-0 top-0 w-[230px] xl:w-[300px] px-2 xl:px-4 pt-2 xl:pt-4 overflow-auto multi-gradient"},{children:(0,o.jsx)("div",Ao({className:"all-MessageModule-wrap"},{children:(0,o.jsx)(po,{},void 0)}),void 0)}),void 0),n?(0,o.jsx)("div",{className:"w-[10px] h-[10px] hiddenAnimation"},void 0):null,s?(0,o.jsx)("div",Ao({className:"message-form fixed z-[99] xl:z-0 bottom-1 w-[230px] xl:w-[300px] bg-white"},{children:(0,o.jsx)(Oo,{currentRoom:t},void 0)}),void 0):null]}),void 0)}));var Io=function(){return Io=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Io.apply(this,arguments)};const Fo=function(e){var t=e.speaker;return(0,o.jsxs)("div",Io({className:"m-1 px-3 py-1 text-[#003767] text-[12px] rounded-2xl inline-flex items-center bg-white border border-solid border-white"},{children:[(0,o.jsx)("i",{className:"pnm-mic-unmute text-[10px] brand-color2 mr-2"},void 0),t.name]}),void 0)};var Mo=function(){return Mo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mo.apply(this,arguments)};const Do=i.memo((function(){var e=Oe(b.selectAll);return(0,o.jsx)("div",Mo({className:"active-speakers-wrap flex w-full items-center justify-center absolute top-0 left-0 z-[9999]"},{children:e.length?e.map((function(e){return(0,o.jsx)(Fo,{speaker:e},e.sid)})):null}),void 0)}));var Uo=function(){return Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Uo.apply(this,arguments)},Lo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Vo=function(e){var t=e.track,n=(0,i.useRef)(null),r=Lo((0,i.useState)(),2),a=r[0],s=r[1];(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Uo({className:"screen-share-video relative pb-[calc(100vh-210px)]"},{children:[a?null:(0,o.jsx)("div",Uo({className:"loading flex justify-center"},{children:(0,o.jsxs)("div",Uo({className:"lds-ripple"},{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]}),void 0)}),void 0),(0,o.jsx)("button",Uo({className:"absolute z-[99] bottom-0 right-0 p-1 bg-black/50",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[20px] text-white"},void 0)}),void 0),(0,o.jsx)("video",{onLoadedData:function(){console.log("onPlaying"),s(!0)},ref:n,className:"video-player absolute"},void 0)]}),void 0)};var Bo=function(){return Bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bo.apply(this,arguments)};const Wo=function(e){var t=e.track,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",Bo({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n},void 0)}),void 0)};var Go=function(){return Go=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Go.apply(this,arguments)},zo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Ho=function(e){var t=e.track,n=(0,i.useRef)(null),r=zo((0,i.useState)(),2),a=r[0],s=r[1];(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.videoTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.videoTrack)||void 0===e||e.detach(r))}}),[t]);return(0,o.jsxs)("div",Go({className:"camera-video-player"},{children:[a?null:(0,o.jsx)("div",Go({className:"loading absolute text-center top-3 z-[999] left-0 right-0 m-auto"},{children:(0,o.jsxs)("div",Go({className:"lds-ripple"},{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]}),void 0)}),void 0),(0,o.jsx)("button",Go({className:"absolute z-[999] top-2 right-2 p-1 bg-black/50 w-6 h-6 flex",onClick:function(){var e;document.fullscreenElement?document.exitFullscreen():null===(e=n.current)||void 0===e||e.requestFullscreen().catch((function(e){alert("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}},{children:(0,o.jsx)("i",{className:"icon pnm-fullscreen text[14px] text-white"},void 0)}),void 0),(0,o.jsx)("video",{className:"camera-video",onLoadedData:function(){s(!0)},ref:n,height:"200px",width:"200px"},void 0)]}),void 0)};var $o=function(){return $o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$o.apply(this,arguments)},qo=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const Jo=function(e){var t=e.userId,n=Oe((function(e){return _.selectById(e,t)})),r=qo((0,i.useState)("#FFFFFF"),2),a=r[0],s=r[1];(0,i.useEffect)((function(){switch(null===n||void 0===n?void 0:n.connectionQuality){case Ue.ConnectionQuality.Excellent:s("#38f105");break;case Ue.ConnectionQuality.Good:s("#c8f6bd");break;case Ue.ConnectionQuality.Poor:s("#FF0000");break;default:s("#FFFFFF")}}),[null===n||void 0===n?void 0:n.connectionQuality]);return(0,o.jsx)("div",$o({className:"connection-status"},{children:(0,o.jsx)("i",{style:{color:a},className:"pnm-network text-[7px]"},void 0)}),void 0)};var Ko=function(){return Ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ko.apply(this,arguments)};const Yo=function(e){var t=e.userId,n=Oe((function(e){return _.selectById(e,t)}));return(0,o.jsx)(i.Fragment,{children:(null===n||void 0===n?void 0:n.audioTracks)?(0,o.jsx)("div",Ko({className:"mic-status"},{children:(null===n||void 0===n?void 0:n.isMuted)?(0,o.jsx)("p",Ko({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-mute text-white text-[9px]"},void 0)}),void 0):(0,o.jsx)("p",Ko({className:"mute"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute text-white text-[9px]"},void 0)}),void 0)}),void 0):null},void 0)};var Qo=function(){return Qo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qo.apply(this,arguments)};const Zo=i.memo((function(e){var t=e.userId,n=e.track;return(0,o.jsx)("div",Qo({className:"camera-modules"},{children:(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(Jo,{userId:t},void 0),(0,o.jsx)(Yo,{userId:t},void 0),(0,o.jsx)(Ho,{track:n},void 0)]},void 0)}),void 0)}));var Xo=function(){return Xo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xo.apply(this,arguments)};const ei=function(e){var t,n=e.participantType,r=e.participant,i=Oe((function(e){return b.selectById(e,r.identity)}));return(0,o.jsx)("div",Xo({className:"video-camera-item relative ".concat(i?"speaking":""," ").concat(n.isAdmin?"admin":"participants")},{children:(t=[],r.tracks.forEach((function(e){if(e.source===Ue.Track.Source.Camera){var i=(0,o.jsxs)("div",Xo({className:"video-camera-item-inner"},{children:[(0,o.jsxs)("div",Xo({className:"name"},{children:[r.name," ",n.isLocal?"(me)":null]}),void 0),(0,o.jsx)(Zo,{userId:r.identity,track:e},void 0)]}),e.trackSid);t.push(i)}})),t)}),void 0)};var ti=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const ni=function(e){var t=ti((0,i.useState)([]),2),n=t[0],r=t[1],a=ti((0,i.useState)(0),2),s=a[0],c=a[1];return(0,i.useEffect)((function(){var t=0,n=[];e.forEach((function(e){var r;if(e.metadata){var i={isAdmin:null!==(r=JSON.parse(e.metadata).is_admin)&&void 0!==r&&r,isLocal:e instanceof Ue.LocalParticipant},a=e.getTracks().filter((function(e){return e.source===Ue.Track.Source.Camera}));if(t+=a.length,a.length){var s=(0,o.jsx)(ei,{participantType:i,participant:e},e.sid);n.push(s)}}})),c(t),r(n)}),[e]),{allParticipants:n,totalNumWebcams:s}};var ri=function(){return ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ri.apply(this,arguments)},oi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const ii=i.memo((function(e){var t=e.videoSubscribers,n=e.perPage,r=null!==n&&void 0!==n?n:25,a=Pe(),s=ni(t),c=s.allParticipants,l=s.totalNumWebcams,u=oi((0,i.useState)(0),2),d=u[0],f=u[1],v=oi((0,i.useState)([]),2),p=v[0],m=v[1],h=oi((0,i.useState)(!1),2),x=h[0],b=h[1],y=oi((0,i.useState)(!1),2),g=y[0],w=y[1];(0,i.useEffect)((function(){c.length<=r?m(c):(f(1),j(c,1,r))}),[c]),(0,i.useEffect)((function(){l>r?(b(1!==d),w(!(d>=l/r))):(b(!1),w(!1))}),[l,d,r]);var j=function(e,t,n){var r=oi(e).slice(0).slice((t-1)*n,t*n);m(r),a(L(1!==t))};return(0,o.jsx)(i.Fragment,{children:l>0?(0,o.jsx)("div",ri({className:"all-webcam-wrapper total-cam-".concat(l)},{children:(0,o.jsx)("div",ri({className:"all-webcam-wrapper-inner"},{children:(0,o.jsxs)(i.Fragment,{children:[x?(0,o.jsx)("button",ri({type:"button",className:"previous-cam",onClick:function(){return j(c,d-1,r),void f(d-1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-up"},void 0)}),void 0):null,(0,o.jsx)(i.Fragment,{children:p},void 0),g?(0,o.jsx)("button",ri({type:"button",className:"next-cam",onClick:function(){return j(c,d+1,r),void f(d+1)}},{children:(0,o.jsx)("i",{className:"pnm-arrow-down"},void 0)}),void 0):null]},void 0)}),void 0)}),void 0):null},void 0)}));var ai=function(){return ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ai.apply(this,arguments)},si=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),ci=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),li=(0,De.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e}));const ui=i.memo((function(e){var t=e.screenShareTracks,n=e.videoSubscribers,r=Pe(),a=Oe(si),s=Oe(ci),c=Oe(li);(0,i.useEffect)((function(){r(ee(!1))}),[r]);return(0,o.jsxs)("div",ai({className:"share-screen-wrapper is-share-screen-running"},{children:[!n||!c||s&&a?null:(0,o.jsx)(ii,{videoSubscribers:n,perPage:3},void 0),function(){if(t){var e=Array();return t.forEach((function(t){t.source===Ue.Track.Source.ScreenShare?e.push((0,o.jsx)(Vo,{track:t},t.trackSid)):t.source===Ue.Track.Source.ScreenShareAudio&&e.push((0,o.jsx)(Wo,{track:t},t.trackSid))})),e}return null}()]}),void 0)}));var di=function(){return di=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},di.apply(this,arguments)};const fi=i.memo((function(e){var t=e.track,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e,r=n.current;return r&&(null===(e=t.audioTrack)||void 0===e||e.attach(r)),function(){var e;r&&(null===(e=t.audioTrack)||void 0===e||e.detach(r))}}),[t]),(0,o.jsx)("div",di({style:{display:"none"}},{children:(0,o.jsx)("audio",{autoPlay:!0,ref:n},void 0)}),void 0)}));var vi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const pi=i.memo((function(e){var t=e.audioSubscribers,n=vi((0,i.useState)([]),2),r=n[0],a=n[1];return(0,i.useEffect)((function(){var e=[];t.forEach((function(t){t.tracks.forEach((function(t){e.push((0,o.jsx)(fi,{track:t},t.trackSid))}))})),a(e)}),[t]),(0,o.jsx)(i.Fragment,{children:r.length?r:null},void 0)}));var mi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},hi=(0,De.P1)((function(e){return e.session.screenSharing}),(function(e){return e.isActive})),xi=(0,De.P1)((function(e){return e.roomSettings.activateWebcamsView}),(function(e){return e})),bi=(0,De.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const yi=function(e){var t,n=e.audioSubscribers,r=e.videoSubscribers,a=e.screenShareTracks,s=Oe(hi),c=Oe(xi),l=Oe(bi),u=mi((0,i.useState)(null!==(t=window.NUMBER_OF_WEBCAMS_PER_PAGE_PC)&&void 0!==t?t:25),2),d=u[0],f=u[1];(0,i.useEffect)((function(){var e,t=Te.getState().session.userDeviceType;"mobile"!==t&&"tablet"!==t||f(null!==(e=window.NUMBER_OF_WEBCAMS_PER_PAGE_MOBILE)&&void 0!==e?e:6)}),[]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)(i.Fragment,{children:[l&&s&&a?(0,o.jsx)(ui,{videoSubscribers:r,screenShareTracks:a},void 0):null,!c||l&&s||!r?null:(0,o.jsx)(ii,{videoSubscribers:r,perPage:d},void 0),n?(0,o.jsx)(pi,{audioSubscribers:n},void 0):null]},void 0)},void 0)};var gi=function(){return gi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gi.apply(this,arguments)},wi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ji=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveParticipantsPanel}),(function(e){return e})),Si=(0,De.P1)((function(e){return e.bottomIconsActivity.isActiveChatPanel}),(function(e){return e})),ki=(0,De.P1)((function(e){return e.roomSettings.activeScreenSharingView}),(function(e){return e}));const Ni=function(e){var t,n=e.currentRoom,r=e.audioSubscribers,a=e.videoSubscribers,s=e.screenShareTracks,c=e.isRecorder,l=Oe(ji),u=Oe(ki),d=Pe(),f=Oe(Si),v=wi((0,i.useState)(!0),2),p=v[0],m=v[1],h=null!==(t=window.STATIC_ASSETS_PATH)&&void 0!==t?t:"./assets";return(0,i.useEffect)((function(){var e;(null===(e=Te.getState().session.currentRoom.metadata.room_features)||void 0===e?void 0:e.chat_features.allow_chat)||(m(!1),d(X(!1)))}),[d]),(0,o.jsxs)("div",gi({id:"main-area",className:"".concat(c?"h-[calc(100vh)] isRecorder":"lg:h-[calc(100vh-130px)]","  plugNmeet-app-main-area overflow-hidden relative flex ").concat(f?"showChatPanel":"hideChatPanel"," ").concat(l?"showParticipantsPanel":"hideParticipantsPanel"," ").concat((null===s||void 0===s?void 0:s.size)&&u?"showScreenShare":"hideScreenShare")},{children:[(0,o.jsx)("img",{className:"absolute w-full h-full left-0 top-0 object-cover pointer-events-none",src:"".concat(h,"/imgs/app-banner.jpg"),alt:"AppBG"},void 0),(0,o.jsxs)("div",gi({className:"inner flex justify-between w-full"},{children:[(0,o.jsx)(Le.uT,gi({className:"transition-left-panel",show:l,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 -translate-x-full"},{children:(0,o.jsx)(ao,{},void 0)}),void 0),(0,o.jsxs)("div",gi({className:"middle-area relative flex-auto"},{children:[(0,o.jsx)(Do,{},void 0),(0,o.jsx)(yi,{currentRoom:n,audioSubscribers:r,videoSubscribers:a,screenShareTracks:s},void 0)]}),void 0),p?(0,o.jsx)(Le.uT,gi({className:"transition-right-panel",show:f,enter:"transform transition duration-[400ms]",enterFrom:"opacity-0 translate-x-0",enterTo:"opacity-100",leave:"transform transition duration-[400ms]",leaveFrom:"opacity-100",leaveTo:"opacity-0 translate-x-full"},{children:(0,o.jsx)(Eo,{currentRoom:n,isRecorder:c},void 0)}),void 0):null]}),void 0)]}),void 0)};var _i=function(){return _i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_i.apply(this,arguments)},Ti=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Pi=(0,De.P1)((function(e){return e.session.isStartup}),(function(e){return e}));const Oi=function(e){var t=e.onCloseModal,n=Ti((0,i.useState)(!0),2),r=n[0],a=n[1],s=Oe(Pi),c=Pe(),l=(0,Ce.$)().t,u=function(){a(!1),c(F(!1)),t()};return(0,o.jsx)("div",{children:s?(0,o.jsx)("div",_i({id:"startupJoinModal",className:"".concat(r?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"," join-the-audio-popup fixed transition ease-in top-0 left-0 w-full h-full z-[999] bg-white/80 px-6 flex items-center justify-center")},{children:(0,o.jsxs)("div",_i({className:"popup-inner bg-white w-full max-w-sm rounded-3xl shadow-header relative px-6 py-14"},{children:[(0,o.jsxs)("button",_i({className:"close-btn absolute top-8 right-6 w-[25px] h-[25px] outline-none",type:"button",onClick:function(){return u()}},{children:[(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 rotate-45"},void 0),(0,o.jsx)("span",{className:"inline-block h-[1px] w-[20px] bg-[#004D90] absolute top-0 left-0 -rotate-45"},void 0)]}),void 0),(0,o.jsx)("p",_i({className:"text-base text-[#004D90] font-normal mb-5 text-center"},{children:l("app.how-to-join")}),void 0),(0,o.jsxs)("div",_i({className:"btn flex justify-center"},{children:[(0,o.jsxs)("button",_i({type:"button",className:"microphone bg-transparent mr-4 text-center",onClick:function(){return c(re(!0)),void u()}},{children:[(0,o.jsx)("div",_i({className:"h-[40px] w-[40px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer"},{children:(0,o.jsx)("i",{className:"pnm-mic-unmute brand-color1"},void 0)}),void 0),(0,o.jsx)("p",_i({className:"text-sm brand-color1 font-normal"},{children:l("app.microphone")}),void 0)]}),void 0),(0,o.jsxs)("button",_i({type:"button",id:"listenOnlyJoin",className:"headphone bg-transparent ml-4 text-center"},{children:[(0,o.jsx)("div",_i({className:"camera h-[40px] w-[40px] m-auto overflow-hidden rounded-full bg-[#F2F2F2] hover:bg-[#ECF4FF] mb-1 flex items-center justify-center cursor-pointer",onClick:function(){return u()}},{children:(0,o.jsx)("i",{className:"pnm-listen-only brand-color1"},void 0)}),void 0),(0,o.jsx)("p",_i({className:"text-sm brand-color1 font-normal"},{children:l("app.listen-only")}),void 0)]}),void 0)]}),void 0)]}),void 0)}),void 0):null},void 0)};var Ai=function(){function e(e){var t=this;this.isRecorderJoin=!1,this.participantsCount=0,this.participantCounterInterval=0,this.participantConnected=function(e){t.addParticipant(e)},this.addParticipant=function(e){var n,r,o;Te.dispatch(P({sid:e.sid,userId:e.identity,name:null!==(n=e.name)&&void 0!==n?n:"",metadata:e.metadata?JSON.parse(e.metadata):null,audioTracks:e.audioTracks.size,videoTracks:e.videoTracks.size,screenShareTrack:0,isMuted:!1,connectionQuality:e.connectionQuality,isLocal:!1,joinedAt:null!==(o=null===(r=e.joinedAt)||void 0===r?void 0:r.getTime())&&void 0!==o?o:Date.now()})),t.isRecorderJoin&&t.participantsCount++},this.participantDisconnected=function(e){t.removeParticipant(e),t.isRecorderJoin&&t.participantsCount--},this.removeParticipant=function(e){var n=_.selectById(Te.getState(),e.identity);(null===n||void 0===n?void 0:n.screenShareTrack)&&Te.dispatch(U({isActive:!1,sharedBy:""})),Te.dispatch(O(e.identity)),t.that.updateVideoSubscribers(e,!1),t.that.updateAudioSubscribers(e,!1)},this.connectionQualityChanged=function(e,n){Te.dispatch(A({id:n.identity,changes:{connectionQuality:e}})),e===Ue.ConnectionQuality.Poor&&n.sid===t.that.room.localParticipant.sid&&"RECORDER_BOT"!==n.identity&&"RTMP_BOT"!==n.identity&&(0,c.Am)("Your connection quality isn't good enough",{toastId:"connection-status",type:"error"})},this.setParticipantMetadata=function(e,n){if(n.metadata){var r=JSON.parse(n.metadata);Te.dispatch(A({id:n.identity,changes:{metadata:r}})),t.that.room.localParticipant.sid===n.sid&&(Te.dispatch(V(r)),Te.dispatch(te(r.raised_hand)))}},this.that=e}return e.prototype.recorderJoined=function(){this.isRecorderJoin=!0,this.startParticipantCounter(),Te.dispatch(ee(!1))},e.prototype.clearParticipantCounterInterval=function(){this.participantCounterInterval&&clearInterval(this.participantCounterInterval)},e.prototype.startParticipantCounter=function(){var e=this;this.participantCounterInterval=setInterval((function(){0===e.participantsCount&&(console.log("NO_USER_ONLINE"),e.that.room.disconnect())}),3e3)},e}();const Ri=Ai;var Ci=function(){function e(e){var t=this;this.localTrackPublished=function(e,n){t.addSubscriber(e,n)},this.localTrackUnpublished=function(e,n){t.removeSubscriber(e,n)},this.trackSubscribed=function(e,n,r){t.addSubscriber(n,r)},this.trackUnsubscribed=function(e,n){t.removeSubscriber(e,n)},this.trackMuted=function(e,t){var n;Te.dispatch(A({id:t.identity,changes:{isMuted:!0}})),t.identity===(null===(n=Te.getState().session.currenUser)||void 0===n?void 0:n.userId)&&Te.dispatch(Q(!0))},this.trackUnmuted=function(e,t){var n;Te.dispatch(A({id:t.identity,changes:{isMuted:!1}})),t.identity===(null===(n=Te.getState().session.currenUser)||void 0===n?void 0:n.userId)&&Te.dispatch(Q(!1))},this.trackSubscriptionFailed=function(e,t){console.log("==== trackSubscriptionFailed ===="),console.log(e,t)},this.trackStreamStateChanged=function(e,t,n){console.log(t,n)},this.that=e}return e.prototype.addSubscriber=function(e,t){var n,r,o,i,a,s;if((this.roomMetadata||(this.roomMetadata=Te.getState().session.currentRoom.metadata),this.currentUser||(this.currentUser=Te.getState().session.currenUser),t.identity!==(null===(n=this.currentUser)||void 0===n?void 0:n.userId)&&e.source===Ue.Track.Source.Camera)&&(((null===(r=this.roomMetadata.room_features)||void 0===r?void 0:r.admin_only_webcams)||!(null===(o=this.roomMetadata.room_features)||void 0===o?void 0:o.allow_view_other_webcams))&&!(null===(a=null===(i=this.currentUser)||void 0===i?void 0:i.metadata)||void 0===a?void 0:a.is_admin)&&t.metadata&&!JSON.parse(t.metadata).is_admin))return;e.source===Ue.Track.Source.ScreenShare||e.source===Ue.Track.Source.ScreenShareAudio?(Te.dispatch(A({id:t.identity,changes:{screenShareTrack:1}})),Te.dispatch(U({isActive:!0,sharedBy:t.identity})),this.that.setScreenShareTrack(e,t,!0)):(Te.dispatch(A({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ue.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ue.Track.Source.Microphone})).length}})),e.source===Ue.Track.Source.Microphone?(this.that.updateAudioSubscribers(t),Te.dispatch(A({id:t.identity,changes:{isMuted:null===(s=e.audioTrack)||void 0===s?void 0:s.isMuted}}))):this.that.updateVideoSubscribers(t))},e.prototype.removeSubscriber=function(e,t){var n;e.source===Ue.Track.Source.ScreenShare||e.source===Ue.Track.Source.ScreenShareAudio?(Te.dispatch(A({id:t.identity,changes:{screenShareTrack:0}})),Te.dispatch(U({isActive:!1,sharedBy:""})),this.that.setScreenShareTrack(e,t,!1)):(Te.dispatch(A({id:t.identity,changes:{videoTracks:t.getTracks().filter((function(e){return e.source===Ue.Track.Source.Camera})).length,audioTracks:t.getTracks().filter((function(e){return e.source===Ue.Track.Source.Microphone})).length,isMuted:null===(n=e.audioTrack)||void 0===n?void 0:n.isMuted}})),e.source===Ue.Track.Source.Microphone?this.that.updateAudioSubscribers(t,!1):this.that.updateVideoSubscribers(t,!1))},e}();const Ei=Ci;var Ii=new TextDecoder,Fi=function(e){var t=this;this.dataReceived=function(e,n,r){var o;t.requestedParticipant=n;var i=Ii.decode(e);if(i){var a;try{a=JSON.parse(i)}catch(s){return}r===Ue.DataPacket_Kind.RELIABLE&&"SYSTEM"===a.type&&((null===(o=Te.getState().session.currenUser)||void 0===o?void 0:o.isRecorder)||t.handleSystemTypeData(a.body))}},this.handleSystemTypeData=function(e){switch(e.type){case Kt.RAISE_HAND:case Kt.INFO:(0,c.Am)(p.t(e.msg),{type:"info"}),t.playNotification(e.type);break;case Kt.ALERT:(0,c.Am)(p.t(e.msg),{type:"error"}),t.playNotification(e.type)}},this.playNotification=function(e){e!==Kt.RAISE_HAND&&e!==Kt.ALERT||Te.dispatch(we(!0))},this.that=e};const Mi=Fi;var Di=function(){var e=this;this.metadata=null,this.welcomeMessage=void 0,this.setRoomMetadata=function(t){console.log(t),(0,jn.isEmpty)(t)||(e.metadata=JSON.parse(t),e.metadata&&(e.setWindowTitle(e.metadata.room_title),e.showRecordingNotification(),e.showRTMPNotification(),e.publishWelcomeMessage(),Te.dispatch(B(e.metadata))))},this.setWindowTitle=function(e){document.title=e},this.showRecordingNotification=function(){var t,n,r;if(!(null===(t=Te.getState().session.currenUser)||void 0===t?void 0:t.isRecorder)){var o=Te.getState().session.isActiveRecording;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_recording)?(0,c.Am)(p.t("room-metadata.session-recording"),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_recording)&&(0,c.Am)(p.t("room-metadata.session-not-recording"),{type:"info"})}},this.showRTMPNotification=function(){var t,n,r;if(!(null===(t=Te.getState().session.currenUser)||void 0===t?void 0:t.isRecorder)){var o=Te.getState().session.isActiveRtmpBroadcasting;!o&&(null===(n=e.metadata)||void 0===n?void 0:n.is_active_rtmp)?(0,c.Am)(p.t("room-metadata.rtmp-started"),{type:"info"}):o&&!(null===(r=e.metadata)||void 0===r?void 0:r.is_active_rtmp)&&(0,c.Am)(p.t("room-metadata.rtmp-stopped"),{type:"info"})}},this.publishWelcomeMessage=function(){var t,n,r;if(void 0===e.welcomeMessage)if((0,jn.isEmpty)(null===(t=e.metadata)||void 0===t?void 0:t.welcome_message))e.welcomeMessage="";else{e.welcomeMessage=null===(n=e.metadata)||void 0===n?void 0:n.welcome_message;var o={type:"CHAT",message_id:"",time:"",isPrivate:!1,from:{userId:"system",name:"System",sid:"system"},msg:null!==(r=e.welcomeMessage)&&void 0!==r?r:""};Te.dispatch(ve(o))}}};const Ui=Di;var Li=function(e){var t=this;this.lastActiveWebcamChanged=Date.now(),this.activeSpeakers=[],this.activeSpeakersChanged=function(e){if(e.length){var n=Te.getState().session.isWebcamPaginating,r=Date.now();e.forEach((function(e){var o,i,a;if(!n&&t.that.videoSubscribersMap.size>2){var s=t.lastActiveWebcamChanged+4e3;r>s&&t.that.videoSubscribersMap.has(e.sid)&&(t.that.updateVideoSubscribers(e),t.lastActiveWebcamChanged=r)}var c={sid:e.sid,userId:e.identity,metadata:e.metadata,name:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"",isSpeaking:e.isSpeaking,audioLevel:e.audioLevel,lastSpokeAt:null!==(a=null===(i=e.lastSpokeAt)||void 0===i?void 0:i.getTime())&&void 0!==a?a:Date.now()};Te.dispatch(g(c)),t.activeSpeakers.push(c)}))}else t.activeSpeakers=[]},this.runInterval=function(){t.interval=setInterval((function(){t.activeSpeakers.length?Te.dispatch(w(t.activeSpeakers)):b.selectAll(Te.getState()).length&&Te.dispatch(j())}),1500)},this.onLivekitDisconnect=function(){clearInterval(t.interval)},this.that=e,this.runInterval()};const Vi=Li;var Bi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Wi=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Gi=function(){function e(e,t,n,r,o,i){var a=this;this._audioSubscribersMap=new Map,this._videoSubscribersMap=new Map,this._screenShareTracksMap=new Map,this.url=window.LIVEKIT_SERVER_URL,this.connect=function(){return Bi(a,void 0,void 0,(function(){var e;return Wi(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,this._room.connect(this.url,this.token)];case 1:return t.sent(),[4,this.initiateParticipants()];case 2:return t.sent(),[4,this.updateSession()];case 3:return t.sent(),mr=Te.getState().session,Sr(),this.roomConnectionStatusState("connected"),this.currentRoomState(this._room),this.startTokenRenewInterval(),[3,5];case 4:return e=t.sent(),this.roomConnectionStatusState("error"),this.errorState({title:"Error",text:String(e)}),[3,5];case 5:return[2]}}))}))},this.initiateParticipants=function(){return Bi(a,void 0,void 0,(function(){var e,t,n=this;return Wi(this,(function(r){return e=null!==(t="RECORDER_BOT"===this._room.localParticipant.identity||"RTMP_BOT"===this._room.localParticipant.identity)&&void 0!==t&&t,Te.dispatch(M({sid:this._room.localParticipant.sid,userId:this._room.localParticipant.identity,name:this._room.localParticipant.name,isRecorder:e})),this.handleParticipant.setParticipantMetadata("",this._room.localParticipant),e?this.handleParticipant.recorderJoined():this.handleParticipant.addParticipant(this._room.localParticipant),this._room.participants.forEach((function(e){n.handleParticipant.addParticipant(e),e.getTracks().forEach((function(t){t.isSubscribed&&(t.source===Ue.Track.Source.ScreenShare||t.source===Ue.Track.Source.ScreenShareAudio?(Te.dispatch(A({id:e.identity,changes:{screenShareTrack:1}})),Te.dispatch(U({isActive:!0,sharedBy:e.identity}))):n.updateVideoSubscribers(e))}))})),[2]}))}))},this.updateSession=function(){return Bi(a,void 0,void 0,(function(){return Wi(this,(function(e){return Te.dispatch(I(this.token)),Te.dispatch(D({sid:this._room.sid,room_id:this._room.name})),!(0,jn.isEmpty)(this._room.metadata)&&this._room.metadata&&this.handleRoomMetadata.setRoomMetadata(this._room.metadata),[2]}))}))},this.configureRoom=function(){var e,t,n,r=new Ue.Room({adaptiveStream:!0,dynacast:null!==(e=window.ENABLE_DYNACAST)&&void 0!==e&&e,videoCaptureDefaults:{resolution:Ue.VideoPresets.hd.resolution},publishDefaults:{simulcast:null!==(t=window.ENABLE_SIMULCAST)&&void 0!==t&&t,stopMicTrackOnMute:null!==(n=window.STOP_MIC_TRACK_ON_MUTE)&&void 0!==n&&n}});return r.on(Ue.RoomEvent.Reconnecting,(function(){return a.roomConnectionStatusState("re-connecting")})),r.on(Ue.RoomEvent.Reconnected,(function(){return a.roomConnectionStatusState("connected")})),r.on(Ue.RoomEvent.Disconnected,a.onDisconnected),r.on(Ue.RoomEvent.RoomMetadataChanged,a.handleRoomMetadata.setRoomMetadata),r.on(Ue.RoomEvent.ActiveSpeakersChanged,a.handleActiveSpeakers.activeSpeakersChanged),r.on(Ue.RoomEvent.MediaDevicesError,a.mediaDevicesError),r.on(Ue.RoomEvent.DataReceived,a.handleDataMessages.dataReceived),r.on(Ue.RoomEvent.ParticipantConnected,a.handleParticipant.participantConnected),r.on(Ue.RoomEvent.ParticipantDisconnected,a.handleParticipant.participantDisconnected),r.on(Ue.RoomEvent.ParticipantMetadataChanged,a.handleParticipant.setParticipantMetadata),r.on(Ue.RoomEvent.ConnectionQualityChanged,a.handleParticipant.connectionQualityChanged),r.on(Ue.RoomEvent.LocalTrackPublished,a.handleMediaTracks.localTrackPublished),r.on(Ue.RoomEvent.LocalTrackUnpublished,a.handleMediaTracks.localTrackUnpublished),r.on(Ue.RoomEvent.TrackSubscribed,a.handleMediaTracks.trackSubscribed),r.on(Ue.RoomEvent.TrackUnpublished,a.handleMediaTracks.trackUnsubscribed),r.on(Ue.RoomEvent.TrackSubscriptionFailed,a.handleMediaTracks.trackSubscriptionFailed),r.on(Ue.RoomEvent.TrackMuted,a.handleMediaTracks.trackMuted),r.on(Ue.RoomEvent.TrackUnmuted,a.handleMediaTracks.trackUnmuted),r.on(Ue.RoomEvent.TrackStreamStateChanged,a.handleMediaTracks.trackStreamStateChanged),r},this.onDisconnected=function(){a.errorState({title:"Room disconnected",text:"Room was closed or disconnected. "}),a.roomConnectionStatusState("disconnected"),gr&&(null===hr||void 0===hr||hr.close(),jr=!0),a.handleActiveSpeakers.onLivekitDisconnect(),clearInterval(a.tokenRenewInterval),a.handleParticipant.clearParticipantCounterInterval()},this.mediaDevicesError=function(e){console.log(e)},this.startTokenRenewInterval=function(){a.tokenRenewInterval=setInterval((function(){var e=Te.getState().session.token,t={type:Jt.SYSTEM,message_id:"",room_sid:a._room.sid,room_id:a._room.name,body:{type:Kt.RENEW_TOKEN,from:{sid:a._room.localParticipant.sid,userId:a._room.localParticipant.identity},msg:e}};Er(JSON.stringify(t))}),3e5)},this.setScreenShareTrack=function(e,t,n){void 0===n&&(n=!0),console.log("=== setScreenShareTrack ===",e.source),n?(a._screenShareTracksMap.set(e.source,e),t.sid!==a._room.localParticipant.sid&&e.source===Ue.Track.Source.ScreenShareAudio&&a._screenShareTracksMap.set(e.source,e)):a._screenShareTracksMap.delete(e.source),a.screenShareTracksState(new Map(a._screenShareTracksMap))},this.updateAudioSubscribers=function(e,t){void 0===t&&(t=!0),"undefined"!==typeof e.sid?e.sid!==a._room.localParticipant.sid&&(t?a._audioSubscribersMap.set(e.sid,e):a._audioSubscribersMap.has(e.sid)&&a._audioSubscribersMap.delete(e.sid),a.audioSubscribersState(new Map(a._audioSubscribersMap)),Te.dispatch(z(a.audioSubscribersState.length))):console.log("participant.sid undefined")},this.updateVideoSubscribers=function(e,t){if(void 0===t&&(t=!0),console.log("==== updateVideoSubscribers ===="),"undefined"!==typeof e.sid)if(t?a._videoSubscribersMap.set(e.sid,e):a._videoSubscribersMap.has(e.sid)&&(console.log("removing..",e.sid),a._videoSubscribersMap.delete(e.sid)),Te.dispatch(G(a._videoSubscribersMap.size)),a._videoSubscribersMap.size<=1)a.videoSubscribersState(new Map(a._videoSubscribersMap));else{var n=Array.from(a._videoSubscribersMap).filter((function(e){var t;return e[0]!==(null===(t=a._room.localParticipant)||void 0===t?void 0:t.sid)}));if(n.sort((function(e,t){var n,r,o,i,a,s,c,l,u=e[1],d=t[1];if(u.isSpeaking&&d.isSpeaking)return d.audioLevel-u.audioLevel;if(u.isSpeaking!==d.isSpeaking)return u.isSpeaking?-1:1;if(u.lastSpokeAt!==d.lastSpokeAt){var f=null!==(r=null===(n=u.lastSpokeAt)||void 0===n?void 0:n.getTime())&&void 0!==r?r:0;return(null!==(i=null===(o=d.lastSpokeAt)||void 0===o?void 0:o.getTime())&&void 0!==i?i:0)-f}return(null!==(s=null===(a=u.joinedAt)||void 0===a?void 0:a.getTime())&&void 0!==s?s:0)-(null!==(l=null===(c=d.joinedAt)||void 0===c?void 0:c.getTime())&&void 0!==l?l:0)})),a._room.localParticipant.getTracks().length){var r=[a._room.localParticipant.sid,a._room.localParticipant];n.unshift(r)}a.videoSubscribersState(new Map(n)),console.log("===ended update ====")}else console.log("participant.sid undefined")},this.token=Te.getState().session.token,this.audioSubscribersState=e,this.videoSubscribersState=t,this.screenShareTracksState=i,this.currentRoomState=n,this.errorState=r,this.roomConnectionStatusState=o,this.handleParticipant=new Ri(this),this.handleMediaTracks=new Ei(this),this.handleDataMessages=new Mi(this),this.handleRoomMetadata=new Ui,this.handleActiveSpeakers=new Vi(this),this.roomConnectionStatusState("connecting"),this._room=this.configureRoom(),this.connect()}return Object.defineProperty(e.prototype,"videoSubscribersMap",{get:function(){return this._videoSubscribersMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this._room},enumerable:!1,configurable:!0}),e}();const zi=Gi;var Hi=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const $i=function(){var e=Hi((0,i.useState)(),2),t=e[0],n=e[1],r=Hi((0,i.useState)(),2),o=r[0],a=r[1],s=Hi((0,i.useState)("loading"),2),c=s[0],l=s[1],u=Hi((0,i.useState)(),2),d=u[0],f=u[1],v=Hi((0,i.useState)(),2),p=v[0],m=v[1],h=Hi((0,i.useState)(),2),x=h[0],b=h[1];return{error:t,setError:n,roomConnectionStatus:c,setRoomConnectionStatus:l,currentRoom:o,audioSubscribers:d,videoSubscribers:p,screenShareTracks:x,startLivekitConnection:function(){new zi(f,m,a,n,l,b)}}};var qi=function(){return qi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},qi.apply(this,arguments)},Ji=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ki=(0,De.P1)((function(e){return e.roomSettings.playAudioNotification}),(function(e){return e})),Yi=(0,De.P1)((function(e){return e.roomSettings.allowPlayAudioNotification}),(function(e){return e}));const Qi=i.memo((function(){var e,t=Pe(),n=(0,i.useRef)(null),r=Oe(Ki),a=Oe(Yi),s=Ji((0,i.useState)(!1),2),c=s[0],l=s[1],u=null!==(e=window.STATIC_ASSETS_PATH)&&void 0!==e?e:"./assets";return(0,i.useEffect)((function(){var e=n.current;r&&(!c&&a&&(null===e||void 0===e||e.play()),t(we(!1)))}),[r,c,a,t]),(0,i.useEffect)((function(){var e=n.current;return e&&(e.addEventListener("playing",(function(){return l(!0)})),e.addEventListener("ended",(function(){return l(!1)}))),function(){e&&(e.pause(),e.src="",e.removeEventListener("playing",(function(){return l(!0)})),e.removeEventListener("ended",(function(){return l(!1)})))}}),[]),(0,o.jsx)("div",qi({style:{display:"none"}},{children:(0,o.jsx)("audio",{ref:n,src:"".concat(u,"/audio/beep-07a.mp3")},void 0)}),void 0)}));var Zi=function(){return Zi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zi.apply(this,arguments)},Xi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ea=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ta=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};const na=function(){var e=Pe(),t=$i(),n=t.error,r=t.setError,a=t.roomConnectionStatus,s=t.setRoomConnectionStatus,c=t.currentRoom,l=t.audioSubscribers,u=t.videoSubscribers,d=t.screenShareTracks,f=t.startLivekitConnection,v=ta((0,i.useState)(!0),2),p=v[0],m=v[1],h=ta((0,i.useState)(!1),2),x=h[0],b=h[1],y=ta((0,i.useState)(""),2),g=y[0],w=y[1],j=ta((0,i.useState)("landscape-device"),2),S=j[0],k=j[1],N=ta((0,i.useState)(""),2),_=N[0],T=N[1],P=(0,i.useRef)(null),O=(0,Ce.$)().t;(0,i.useEffect)((function(){var t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries());if("undefined"===typeof n.access_token)m(!1),r({title:O("app.token-missing-title"),text:O("app.token-missing-des")});else{c||(s("checking"),Xi(void 0,void 0,void 0,(function(){var t;return ea(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,qt("verifyToken",{})];case 1:return t=o.sent(),[3,3];case 2:return o.sent(),s("ready"),m(!1),r({title:O("app.verification-failed-title"),text:O("app.token-not-valid")}),[2];case 3:return s("ready"),m(!1),t.status?e(I(n.access_token)):r({title:O("app.verification-failed-title"),text:O(t.msg)}),[2]}}))})))}}),[O,e,c,r,s]),(0,i.useEffect)((function(){m("connecting"===a||"re-connecting"===a||"checking"===a)}),[a]),(0,i.useEffect)((function(){c&&("RECORDER_BOT"!==c.localParticipant.identity&&"RTMP_BOT"!==c.localParticipant.identity||b(!0))}),[c]),(0,i.useEffect)((function(){window.onresize=function(){e(se(window.innerWidth)),A();var t=Te.getState().bottomIconsActivity.isActiveChatPanel,n=Te.getState().bottomIconsActivity.isActiveParticipantsPanel;window.innerWidth<1024&&t&&n&&e(ee(!1))},e(se(window.innerWidth)),window.innerWidth<1024&&(e(ee(!1)),e(X(!1)));var t="is-pc",n=new(Re())(window.navigator.userAgent);n.mobile()?(t="is-mobile ",e($("mobile"))):n.tablet()&&(t="is-tablet ",e($("tablet")));var r=n.os();"AndroidOS"===r?t+="is-android":"iOS"!==r&&"iPadOS"!==r||(t+="is-ios"),w(t);var o=window.matchMedia("(orientation: portrait)");o.matches&&k("portrait-device"),o.addEventListener("change",(function(e){e.matches?k("portrait-device"):k("landscape-device")}))}),[e]),(0,i.useEffect)((function(){A()}),[null===c||void 0===c?void 0:c.state]);var A=function(){var e=P.current;e&&T("".concat(e.clientHeight,"px"))},R=function(){f()};return(0,o.jsx)("div",Zi({className:"".concat(S," ").concat(g),style:{height:_}},{children:p?(0,o.jsx)(Me,{text:O("app."+a)},void 0):n&&!p?(0,o.jsx)(Ie,{title:n.title,text:n.text},void 0):"connected"===(null===c||void 0===c?void 0:c.state)?c?(0,o.jsxs)("div",Zi({className:"plugNmeet-app overflow-hidden",ref:P},{children:[x?null:(0,o.jsx)(or,{currentRoom:c},void 0),(0,o.jsx)(Ni,{currentRoom:c,audioSubscribers:l,videoSubscribers:u,screenShareTracks:d,isRecorder:x},void 0),x?null:(0,o.jsx)(Dn,{currentRoom:c},void 0),(0,o.jsx)(Qi,{},void 0)]}),void 0):null:"ready"===a?(0,o.jsx)(Oi,{onCloseModal:R},void 0):null}),void 0)};var ra=function(){return ra=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ra.apply(this,arguments)};a.render((0,o.jsx)(i.StrictMode,{children:(0,o.jsxs)(s.zt,ra({store:Te},{children:[(0,o.jsx)(i.Suspense,ra({fallback:(0,o.jsx)(Me,{text:""},void 0)},{children:(0,o.jsx)(na,{},void 0)}),void 0),(0,o.jsx)(c.Ix,{},void 0)]}),void 0)},void 0),document.getElementById("plugNmeet-app"))},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{}},e=>{e.O(0,[736],(()=>{return t=1818,e(e.s=t);var t}));e.O()}]);